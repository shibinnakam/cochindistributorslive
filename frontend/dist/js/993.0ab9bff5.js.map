{"version":3,"file":"js/993.0ab9bff5.js","mappings":"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","sources":["webpack://frontend/./src/views/StaffLeave.vue","webpack://frontend/./src/views/StaffLeave.vue?6984","webpack://frontend/./src/views/StaffPage.vue","webpack://frontend/./src/views/StaffPage.vue?74cb"],"sourcesContent":["<template>\n  <div class=\"leave-container\">\n    <h2>Apply for Leave</h2>\n    <form @submit.prevent=\"submitLeave\" class=\"leave-form\">\n      <label for=\"leave-date\">Date</label>\n      <input id=\"leave-date\" type=\"date\" v-model=\"date\" required />\n\n      <label for=\"leave-reason\">Reason</label>\n      <textarea\n        id=\"leave-reason\"\n        v-model=\"reason\"\n        placeholder=\"Enter your reason\"\n        required\n      ></textarea>\n\n      <div class=\"buttons\">\n        <button type=\"submit\" :disabled=\"loading\">\n          {{ loading ? \"Submitting...\" : \"Request Leave\" }}\n        </button>\n        <button type=\"button\" @click=\"resetForm\" :disabled=\"loading\">\n          Clear\n        </button>\n      </div>\n    </form>\n\n    <p v-if=\"message\" :class=\"{ success: isSuccess, error: !isSuccess }\">\n      {{ message }}\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      date: \"\",\n      reason: \"\",\n      message: \"\",\n      isSuccess: false,\n      loading: false,\n      leaves: [],\n    };\n  },\n  computed: {\n    staffEmail() {\n      const user = JSON.parse(localStorage.getItem(\"user\"));\n      return user?.email || \"\";\n    },\n  },\n  mounted() {\n    if (this.staffEmail) this.fetchLeaves();\n  },\n  methods: {\n    async submitLeave() {\n      if (!this.staffEmail) {\n        this.message = \"You must be logged in!\";\n        this.isSuccess = false;\n        return;\n      }\n      if (!this.date || !this.reason.trim()) {\n        this.message = \"Please fill all fields.\";\n        this.isSuccess = false;\n        return;\n      }\n\n      this.loading = true;\n\n      try {\n        const res = await fetch(\"http://localhost:5000/api/leaves/request\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            email: this.staffEmail,\n            date: this.date,\n            reason: this.reason.trim(),\n          }),\n        });\n\n        const data = await res.json();\n\n        if (res.ok) {\n          this.message = data.message || \"Leave request submitted!\";\n          this.isSuccess = true;\n          this.resetForm();\n          this.fetchLeaves(); // update history\n        } else {\n          this.message = data.error || \"Failed to submit leave\";\n          this.isSuccess = false;\n        }\n      } catch (err) {\n        console.error(err);\n        this.message = \"Error submitting leave. Try again later.\";\n        this.isSuccess = false;\n      } finally {\n        this.loading = false;\n      }\n    },\n    resetForm() {\n      this.date = \"\";\n      this.reason = \"\";\n    },\n    async fetchLeaves() {\n      try {\n        const res = await fetch(\n          `http://localhost:5000/api/leaves/my?email=${this.staffEmail}`\n        );\n        const data = await res.json();\n        this.leaves = data || [];\n      } catch (err) {\n        console.error(\"Error fetching leaves:\", err);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.leave-container {\n  max-width: 500px;\n  margin: auto;\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.leave-form {\n  display: grid;\n  gap: 15px;\n}\n\n.leave-form label {\n  font-weight: bold;\n}\n\n.leave-form input,\n.leave-form textarea {\n  padding: 8px;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.leave-form textarea {\n  min-height: 80px;\n  resize: vertical;\n}\n\n.buttons {\n  display: flex;\n  gap: 10px;\n}\n\nbutton {\n  padding: 10px 15px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  color: #fff;\n}\n\nbutton[type=\"submit\"] {\n  background-color: #3498db;\n}\n\nbutton[type=\"submit\"]:hover {\n  background-color: #2980b9;\n}\n\nbutton[type=\"button\"] {\n  background-color: #95a5a6;\n}\n\nbutton[type=\"button\"]:hover {\n  background-color: #7f8c8d;\n}\n\n.success {\n  color: #27ae60;\n  margin-top: 10px;\n}\n\n.error {\n  color: #c0392b;\n  margin-top: 10px;\n}\n</style>\n","import { render } from \"./StaffLeave.vue?vue&type=template&id=781ca996&scoped=true\"\nimport script from \"./StaffLeave.vue?vue&type=script&lang=js\"\nexport * from \"./StaffLeave.vue?vue&type=script&lang=js\"\n\nimport \"./StaffLeave.vue?vue&type=style&index=0&id=781ca996&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-781ca996\"]])\n\nexport default __exports__","<template>\n  <div class=\"staff-dashboard\">\n    <!-- Sidebar -->\n    <aside class=\"sidebar\">\n      <h2 class=\"sidebar-title\">Staff Panel</h2>\n      <ul>\n        <li\n          :class=\"{ active: currentTab === 'dashboard' }\"\n          @click=\"currentTab = 'dashboard'\"\n        >\n          Dashboard\n        </li>\n        <li\n          :class=\"{ active: currentTab === 'profile' }\"\n          @click=\"currentTab = 'profile'\"\n        >\n          Profile\n        </li>\n        <li\n          :class=\"{ active: currentTab === 'items' }\"\n          @click=\"currentTab = 'items'\"\n        >\n          Manage Items\n        </li>\n\n        <li @click=\"toggleLeaves\" class=\"has-submenu\">\n          Leaves <span class=\"arrow\">{{ showLeaves ? \"â–¼\" : \"â–¶\" }}</span>\n        </li>\n        <ul v-if=\"showLeaves\" class=\"submenu\">\n          <li\n            :class=\"{ active: currentTab === 'apply-leave' }\"\n            @click.stop=\"currentTab = 'apply-leave'\"\n          >\n            Apply for Leave\n          </li>\n          <li\n            :class=\"{ active: currentTab === 'leave-status' }\"\n            @click.stop=\"currentTab = 'leave-status'\"\n          >\n            Leave Status\n          </li>\n        </ul>\n\n        <li @click=\"logout\">Logout</li>\n      </ul>\n    </aside>\n\n    <!-- Main Content -->\n    <main class=\"content\">\n      <!-- Dashboard Tab -->\n      <div v-if=\"currentTab === 'dashboard'\" class=\"dashboard-tab\">\n        <h2>Dashboard</h2>\n        <div class=\"stats-grid\">\n          <div class=\"stat-box total-items\">\n            Total Items: {{ stats.totalItems }}\n          </div>\n          <div class=\"stat-box leaves-taken\">\n            Leaves Taken: {{ stats.leavesTaken }}\n          </div>\n          <div class=\"stat-box pending-tasks\">\n            Pending Tasks: {{ stats.pendingTasks }}\n          </div>\n          <div class=\"stat-box completed-tasks\">\n            Completed Tasks: {{ stats.completedTasks }}\n          </div>\n        </div>\n      </div>\n\n      <!-- Profile Tab -->\n      <div v-if=\"currentTab === 'profile'\" class=\"profile-tab\">\n        <h2>My Profile</h2>\n        <div class=\"profile-card\">\n          <div class=\"photo-section\">\n            <img\n              :src=\"\n                staff.profilePhoto ? apiBase + staff.profilePhoto : defaultPhoto\n              \"\n              alt=\"Profile Photo\"\n              class=\"profile-photo\"\n            />\n            <input type=\"file\" @change=\"onFileChange\" />\n          </div>\n          <form @submit.prevent=\"updateProfile\" class=\"profile-form\">\n            <label>Name</label>\n            <input v-model=\"staff.name\" required />\n            <label>Email (cannot be changed)</label>\n            <input v-model=\"staff.email\" disabled />\n            <label>Phone</label>\n            <input v-model=\"staff.phone\" required />\n            <label>Gender</label>\n            <select v-model=\"staff.gender\">\n              <option value=\"male\">Male</option>\n              <option value=\"female\">Female</option>\n              <option value=\"other\">Other</option>\n            </select>\n            <label>Address</label>\n            <input v-model=\"staff.address\" required />\n            <label>Pincode</label>\n            <input v-model=\"staff.pincode\" required />\n            <button type=\"submit\">Update Profile</button>\n          </form>\n        </div>\n        <p v-if=\"message\" class=\"message\">{{ message }}</p>\n      </div>\n\n      <!-- Manage Items Tab -->\n      <div v-if=\"currentTab === 'items'\" class=\"items-tab\">\n        <h2>Manage Items</h2>\n        <p>ðŸ‘‰ Here you can add, update, or delete items.</p>\n      </div>\n\n      <!-- Apply Leave Tab -->\n      <div v-if=\"currentTab === 'apply-leave'\" class=\"apply-leave-tab\">\n        <StaffLeave @leave-submitted=\"fetchLeaveStatus\" />\n      </div>\n\n      <!-- Leave Status Tab -->\n      <div v-if=\"currentTab === 'leave-status'\" class=\"leave-status-tab\">\n        <h2>Leave Status</h2>\n        <table class=\"leave-table\">\n          <thead>\n            <tr>\n              <th>Reason</th>\n              <th>Date</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"leave in leaveStatus\" :key=\"leave._id\">\n              <td>{{ leave.reason }}</td>\n              <td>{{ formatDate(leave.date) }}</td>\n              <td>{{ leave.status }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport StaffLeave from \"./StaffLeave.vue\";\n\nexport default {\n  components: { StaffLeave },\n  data() {\n    return {\n      currentTab: \"dashboard\",\n      showLeaves: false,\n      staff: {\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        gender: \"\",\n        address: \"\",\n        pincode: \"\",\n        profilePhoto: \"\",\n      },\n      stats: {\n        totalItems: 0,\n        leavesTaken: 0,\n        pendingTasks: 0,\n        completedTasks: 0,\n      },\n      leaveStatus: [],\n      selectedFile: null,\n      message: \"\",\n      apiBase: \"http://localhost:5000\",\n      defaultPhoto: \"/default-avatar.png\",\n    };\n  },\n  methods: {\n    async fetchProfile() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(`${this.apiBase}/api/staff/me`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.staff = res.data.staff;\n      } catch {\n        this.message = \"Error loading profile\";\n      }\n    },\n    async fetchStats() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(`${this.apiBase}/api/staff/stats`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.stats = res.data;\n      } catch (err) {\n        console.error(\"Error fetching stats\", err);\n      }\n    },\n    onFileChange(e) {\n      this.selectedFile = e.target.files[0];\n    },\n    async updateProfile() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const formData = new FormData();\n        Object.keys(this.staff).forEach((key) => {\n          if (key !== \"email\") formData.append(key, this.staff[key]);\n        });\n        if (this.selectedFile)\n          formData.append(\"profilePhoto\", this.selectedFile);\n\n        const res = await axios.put(\n          `${this.apiBase}/api/staff/update`,\n          formData,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              \"Content-Type\": \"multipart/form-data\",\n            },\n          }\n        );\n        this.message = res.data.message;\n        this.fetchProfile();\n      } catch (err) {\n        this.message = err.response?.data?.message || \"Error updating profile\";\n      }\n    },\n    toggleLeaves() {\n      this.showLeaves = !this.showLeaves;\n    },\n    logout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/login\");\n    },\n    async fetchLeaveStatus() {\n      try {\n        const user = JSON.parse(localStorage.getItem(\"user\"));\n        const email = user?.email;\n        if (!email) return;\n\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(`${this.apiBase}/api/leaves/my`, {\n          headers: { Authorization: `Bearer ${token}` },\n          params: { email },\n        });\n\n        this.leaveStatus = res.data;\n      } catch (err) {\n        console.error(\"Error fetching leave status\", err);\n      }\n    },\n    formatDate(dateStr) {\n      return new Date(dateStr).toLocaleDateString();\n    },\n  },\n  watch: {\n    currentTab(newTab) {\n      if (newTab === \"leave-status\") this.fetchLeaveStatus();\n    },\n  },\n  mounted() {\n    this.fetchProfile();\n    this.fetchStats();\n  },\n};\n</script>\n\n<style scoped>\n.staff-dashboard {\n  display: flex;\n  min-height: 100vh;\n}\n\n/* Sidebar */\n.sidebar {\n  width: 220px;\n  background: #2c3e50;\n  color: white;\n  padding: 20px;\n}\n.sidebar-title {\n  font-size: 18px;\n  margin-bottom: 20px;\n}\n.sidebar ul {\n  list-style: none;\n  padding: 0;\n}\n.sidebar li {\n  padding: 12px 10px;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: background 0.3s;\n}\n.sidebar li:hover,\n.sidebar li.active {\n  background: #34495e;\n}\n.has-submenu {\n  font-weight: bold;\n}\n.arrow {\n  float: right;\n}\n.submenu {\n  margin-left: 15px;\n}\n.submenu li {\n  padding: 8px 10px;\n  background: #3b4a5a;\n  border-radius: 4px;\n  margin: 4px 0;\n}\n.submenu li.active {\n  background: #1abc9c;\n}\n\n/* Content Area */\n.content {\n  flex: 1;\n  padding: 20px;\n  background: #f4f6f9;\n}\n\n/* Dashboard Boxes */\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 20px;\n}\n.stat-box {\n  padding: 20px;\n  border-radius: 10px;\n  color: white;\n  font-weight: bold;\n  text-align: center;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n}\n.total-items {\n  background: #3498db;\n}\n.leaves-taken {\n  background: #e74c3c;\n}\n.pending-tasks {\n  background: #f39c12;\n}\n.completed-tasks {\n  background: #2ecc71;\n}\n\n/* Profile Card */\n.profile-card {\n  display: flex;\n  gap: 20px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);\n}\n.photo-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.profile-photo {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 10px;\n}\n.profile-form {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 15px;\n}\n.profile-form label {\n  grid-column: span 2;\n  font-weight: bold;\n}\n.profile-form input,\n.profile-form select,\n.profile-form textarea {\n  grid-column: span 2;\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n}\nbutton {\n  grid-column: span 2;\n  padding: 10px;\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n}\nbutton:hover {\n  background: #0056b3;\n}\n\n/* Leave Table */\n.leave-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 15px;\n}\n.leave-table th,\n.leave-table td {\n  border: 1px solid #ccc;\n  padding: 10px;\n  text-align: center;\n}\n.leave-table th {\n  background: #34495e;\n  color: white;\n}\n</style>\n","import { render } from \"./StaffPage.vue?vue&type=template&id=57c3d200&scoped=true\"\nimport script from \"./StaffPage.vue?vue&type=script&lang=js\"\nexport * from \"./StaffPage.vue?vue&type=script&lang=js\"\n\nimport \"./StaffPage.vue?vue&type=style&index=0&id=57c3d200&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57c3d200\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","submitLeave","for","id","type","$data","date","$event","required","reason","placeholder","_hoisted_2","disabled","loading","_hoisted_3","onClick","resetForm","_hoisted_4","message","_normalizeClass","success","isSuccess","error","data","leaves","computed","staffEmail","user","JSON","parse","localStorage","getItem","email","mounted","this","fetchLeaves","methods","trim","res","fetch","method","headers","body","stringify","json","ok","err","console","__exports__","render","active","currentTab","toggleLeaves","_toDisplayString","showLeaves","logout","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","stats","totalItems","_hoisted_9","leavesTaken","_hoisted_10","pendingTasks","_hoisted_11","completedTasks","_hoisted_12","_hoisted_13","_hoisted_14","src","staff","profilePhoto","apiBase","defaultPhoto","alt","onChange","onFileChange","updateProfile","name","phone","gender","value","address","pincode","_hoisted_16","_hoisted_17","_hoisted_18","_createVNode","_component_StaffLeave","onLeaveSubmitted","fetchLeaveStatus","_hoisted_19","_hoisted_20","_Fragment","_renderList","leaveStatus","leave","key","_id","formatDate","status","components","StaffLeave","selectedFile","fetchProfile","token","axios","get","Authorization","fetchStats","e","target","files","formData","FormData","Object","keys","forEach","append","put","response","removeItem","$router","push","params","dateStr","Date","toLocaleDateString","watch","newTab"],"sourceRoot":""}