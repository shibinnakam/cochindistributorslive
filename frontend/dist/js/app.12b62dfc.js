(function(){"use strict";var e={1663:function(e,t,a){var o=a(5130),s=a(6768);const r={id:"app"};function i(e,t,a,o,i,n){const l=(0,s.g2)("Navbar"),d=(0,s.g2)("router-view"),c=(0,s.g2)("LoginModal");return(0,s.uX)(),(0,s.CE)("div",r,[n.isDashboard?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(l,{key:0,onOpenLogin:t[0]||(t[0]=e=>i.showLogin=!0)})),(0,s.bF)(d),i.showLogin?((0,s.uX)(),(0,s.Wv)(c,{key:1,onClose:t[1]||(t[1]=e=>i.showLogin=!1)})):(0,s.Q3)("",!0)])}var n=a(2750);const l={class:"navbar"},d={class:"nav-links"};function c(e,t,a,o,r,i){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("header",null,[(0,s.Lk)("nav",l,[t[5]||(t[5]=(0,s.Lk)("div",{class:"logo-area"},[(0,s.Lk)("img",{src:n,alt:"Logo",class:"site-logo"}),(0,s.Lk)("span",{class:"site-name"},"Cochin Distributors")],-1)),(0,s.Lk)("ul",d,[(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/",exact:""},{default:(0,s.k6)(()=>t[0]||(t[0]=[(0,s.eW)("Home",-1)])),_:1,__:[0]})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/about"},{default:(0,s.k6)(()=>t[1]||(t[1]=[(0,s.eW)("About",-1)])),_:1,__:[1]})]),t[4]||(t[4]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#products"},"Products")],-1)),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/contact"},{default:(0,s.k6)(()=>t[2]||(t[2]=[(0,s.eW)("Contact",-1)])),_:1,__:[2]})]),(0,s.Lk)("li",null,[(0,s.bF)(c,{to:"/login",class:"login-link"},{default:(0,s.k6)(()=>t[3]||(t[3]=[(0,s.eW)("Login",-1)])),_:1,__:[3]})])])])])}var u={name:"AppNavbar"},p=a(1241);const h=(0,p.A)(u,[["render",c],["__scopeId","data-v-0557f8ba"]]);var m=h,g=a(4232),f=a.p+"img/google-icon.c6d3071b.png";const k={class:"login-container"},v={class:"login-form-section"},L={class:"form-title"},b={class:"signup-link"},y=["aria-invalid"],w={key:0,class:"error"},C={key:1},P=["aria-invalid"],E={key:0,class:"error"},D=["disabled"],S={key:0},A={key:1},_={class:"google-login-section"};function I(e,t,a,r,i,l){return(0,s.uX)(),(0,s.CE)("div",k,[t[12]||(t[12]=(0,s.Lk)("div",{class:"overlay"},null,-1)),(0,s.Lk)("div",v,[(0,s.Lk)("div",{class:(0,g.C4)(["login-box",i.isFilled?"box-filled":""])},[t[10]||(t[10]=(0,s.Lk)("img",{src:n,alt:"Company Logo",class:"logo"},null,-1)),(0,s.Lk)("h2",L,(0,g.v_)(l.formTitle),1),(0,s.Lk)("p",b,[(0,s.eW)((0,g.v_)(l.toggleText)+" ",1),(0,s.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.D$)((...e)=>l.toggleMode&&l.toggleMode(...e),["prevent"]))},(0,g.v_)(l.toggleLinkText),1)]),(0,s.Lk)("form",{class:"login-form",onSubmit:t[4]||(t[4]=(0,o.D$)((...e)=>l.handleSubmit&&l.handleSubmit(...e),["prevent"])),onInput:t[5]||(t[5]=(...e)=>l.checkFilled&&l.checkFilled(...e)),novalidate:""},[t[8]||(t[8]=(0,s.Lk)("label",{for:"email",class:"sr-only"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e),placeholder:"Enter email",required:"",autocomplete:"username","aria-invalid":i.emailError?"true":"false"},null,8,y),[[o.Jo,i.email,void 0,{trim:!0}]]),i.emailError?((0,s.uX)(),(0,s.CE)("p",w,(0,g.v_)(i.emailError),1)):(0,s.Q3)("",!0),i.isSignup?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",C,[t[7]||(t[7]=(0,s.Lk)("label",{for:"password",class:"sr-only"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),placeholder:"Enter password",required:"",autocomplete:"current-password","aria-invalid":i.passwordError?"true":"false"},null,8,P),[[o.Jo,i.password,void 0,{trim:!0}]]),i.passwordError?((0,s.uX)(),(0,s.CE)("p",E,(0,g.v_)(i.passwordError),1)):(0,s.Q3)("",!0)])),i.isSignup?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("a",{key:2,href:"#",class:"forgot-password",onClick:t[3]||(t[3]=(0,o.D$)((...e)=>l.forgotPassword&&l.forgotPassword(...e),["prevent"]))}," Forgot your password? ")),(0,s.Lk)("button",{type:"submit",class:"login-button",disabled:i.loading},[i.loading?((0,s.uX)(),(0,s.CE)("span",S,"Processing...")):((0,s.uX)(),(0,s.CE)("span",A,(0,g.v_)(i.isSignup?"Sign Up":"Login"),1))],8,D)],32),(0,s.Lk)("div",_,[(0,s.Lk)("button",{class:"google-button",onClick:t[6]||(t[6]=(...e)=>l.loginWithGoogle&&l.loginWithGoogle(...e))},t[9]||(t[9]=[(0,s.Lk)("img",{src:f,alt:"Google Logo"},null,-1),(0,s.eW)(" Continue with Google ",-1)]))]),t[11]||(t[11]=(0,s.Lk)("footer",{class:"form-footer"},[(0,s.Lk)("small",null,"Â© 2025 CochinDistributors. All rights reserved.")],-1))],2)])])}a(4114);var M=a(586),X={name:"LoginPage",data(){return{isSignup:!1,email:"",password:"",isFilled:!1,emailError:"",passwordError:"",loading:!1,API_BASE:"http://localhost:5000/api/auth"}},computed:{formTitle(){return this.isSignup?"Sign Up":"Login"},toggleText(){return this.isSignup?"Already have an account?":"Donâ€™t have an account?"},toggleLinkText(){return this.isSignup?"Login":"Create an account"}},methods:{toggleMode(){this.isSignup=!this.isSignup,this.resetForm()},loginWithGoogle(){window.location.href=`${this.API_BASE}/google`},resetForm(){this.email="",this.password="",this.isFilled=!1,this.emailError="",this.passwordError=""},checkFilled(){this.isFilled=this.isSignup?""!==this.email.trim():""!==this.email.trim()&&""!==this.password.trim()},validateEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},async handleSubmit(){if(this.emailError="",this.passwordError="",this.validateEmail(this.email)){this.loading=!0;try{if(this.isSignup){const{data:e}=await M.A.post(`${this.API_BASE}/register-email`,{email:this.email});alert(e.msg||"A password setup link has been sent to your email."),this.toggleMode()}else{const{data:e}=await M.A.post(`${this.API_BASE}/login`,{email:this.email,password:this.password});switch(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),alert(`${e.user.role.toUpperCase()} login successful!`),e.user.role){case"user":this.$router.push("/user");break;case"admin":this.$router.push("/admin");break;case"staff":this.$router.push("/staff");break;default:this.$router.push("/")}}}catch(e){console.error("Auth error:",e),alert(e.response?.data?.msg||"Something went wrong. Please try again.")}finally{this.loading=!1}}else this.emailError="Please enter a valid email address."},forgotPassword(){this.$router.push({name:"ForgotPassword"})}}};const F=(0,p.A)(X,[["render",I]]);var N=F,x={name:"App",components:{Navbar:m,LoginModal:N},data(){return{showLogin:!1}},computed:{isDashboard(){return this.$route.path.startsWith("/admin")||this.$route.path.startsWith("/staff")}}};const $=(0,p.A)(x,[["render",i]]);var U=$,Q=a(1387),O=a.p+"img/bg.18355f06.jpg",T=a(4027);const J={class:"home-page"},q={class:"cochin-section"},V={class:"cochin-container"};function j(e,t,a,o,r,i){return(0,s.uX)(),(0,s.CE)("div",J,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.backgrounds,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,g.C4)(["background-layer",{active:r.backgroundIndex===t}]),style:(0,g.Tr)({backgroundImage:`url(${e})`})},null,6))),128)),t[2]||(t[2]=(0,s.Lk)("section",{class:"hero"},[(0,s.Lk)("h1",null,"Welcome to My Website"),(0,s.Lk)("p",null,"Explore our products and services")],-1)),(0,s.Lk)("section",q,[(0,s.Lk)("div",V,[(0,s.Lk)("div",{class:(0,g.C4)(["cochin-images",{"slide-left":r.animate}])},t[0]||(t[0]=[(0,s.Lk)("img",{src:O,class:"img-large",alt:"Main"},null,-1),(0,s.Lk)("div",{class:"img-small-column"},[(0,s.Lk)("img",{src:T,class:"img-small",alt:"Login"}),(0,s.Lk)("img",{src:n,class:"img-small",alt:"Logo"})],-1)]),2),(0,s.Lk)("div",{class:(0,g.C4)(["cochin-content",{"slide-right":r.animate}])},t[1]||(t[1]=[(0,s.Lk)("h3",{class:"cochinhead"},[(0,s.Lk)("span",{class:"welcome-red"},"WELCOME TO"),(0,s.Lk)("br"),(0,s.Lk)("strong",null,"Cochin Distributors")],-1),(0,s.Lk)("p",{class:"cochintext"}," At Cochin Distributors, we believe in delivering the finest quality baking products to every kitchen, whether you're a home baker or a commercial chef... ",-1)]),2)])])])}var W={name:"HomePage",data(){return{animate:!1,backgroundIndex:0,backgrounds:[a(4027),a(7052)]}},mounted(){setTimeout(()=>{this.animate=!0},100),this.interval=setInterval(()=>{this.backgroundIndex=(this.backgroundIndex+1)%this.backgrounds.length},5e3)},beforeUnmount(){clearInterval(this.interval)}};const R=(0,p.A)(W,[["render",j],["__scopeId","data-v-b290817e"]]);var B=R;const z={class:"about-page"},G={class:"about-container"},Y={class:"about-image"},H={class:"about-text"};function K(e,t,a,o,r,i){const n=(0,s.gN)("scroll-animation");return(0,s.uX)(),(0,s.CE)("div",z,[t[2]||(t[2]=(0,s.Lk)("section",{class:"about-banner"},null,-1)),(0,s.Lk)("div",G,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",Y,t[0]||(t[0]=[(0,s.Lk)("img",{src:O,alt:"About Us"},null,-1)]))),[[n]]),(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",H,t[1]||(t[1]=[(0,s.Lk)("h2",null,"Who We Are",-1),(0,s.Lk)("p",null," We are a passionate team committed to delivering top-quality products and services. Our mission is to bring the best experiences to our customers through innovation, dedication, and trust. ",-1)]))),[[n]])])])}a(8111),a(7588);var Z={name:"AboutPage",directives:{scrollAnimation:{mounted(e){e.style.opacity=0,e.style.transform="translateY(30px)";const t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(e.style.transition="all 0.8s ease-out",e.style.opacity=1,e.style.transform="translateY(0)")})},{threshold:.2});t.observe(e)}}}};const ee=(0,p.A)(Z,[["render",K],["__scopeId","data-v-fbba0e70"]]);var te=ee;const ae={class:"contact-page"},oe={class:"form-wrapper"},se={class:"form-container"},re={class:"row"},ie={class:"row"};function ne(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",ae,[t[9]||(t[9]=(0,s.Lk)("div",{class:"header-bg"},null,-1)),(0,s.Lk)("div",oe,[(0,s.Lk)("div",se,[t[7]||(t[7]=(0,s.Lk)("h2",null,"Get in Touch",-1)),t[8]||(t[8]=(0,s.Lk)("p",{class:"subtitle"},"Nunc erat cursus tellus gravida.",-1)),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)((...e)=>n.submitForm&&n.submitForm(...e),["prevent"]))},[(0,s.Lk)("div",re,[(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Please enter first name...","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.firstName=e),required:""},null,512),[[o.Jo,i.form.firstName]]),(0,s.bo)((0,s.Lk)("input",{type:"text",placeholder:"Please enter last name...","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.lastName=e),required:""},null,512),[[o.Jo,i.form.lastName]])]),(0,s.Lk)("div",ie,[(0,s.bo)((0,s.Lk)("input",{type:"email",placeholder:"Please enter email...","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.email=e),required:""},null,512),[[o.Jo,i.form.email]]),(0,s.bo)((0,s.Lk)("input",{type:"tel",placeholder:"Please enter phone number...","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.phone=e)},null,512),[[o.Jo,i.form.phone]])]),(0,s.bo)((0,s.Lk)("textarea",{placeholder:"Please enter query...","onUpdate:modelValue":t[4]||(t[4]=e=>i.form.message=e),rows:"4",required:""},null,512),[[o.Jo,i.form.message]]),t[6]||(t[6]=(0,s.Lk)("button",{type:"submit"},"Submit",-1))],32)])])])}var le={name:"ContactPage",data(){return{form:{firstName:"",lastName:"",email:"",phone:"",message:""}}},methods:{submitForm(){alert("Form submitted successfully!")}}};const de=(0,p.A)(le,[["render",ne],["__scopeId","data-v-4fb5718c"]]);var ce=de;const ue={class:"forgot-container"},pe={class:"forgot-box"},he=["disabled"],me={key:0},ge={key:1},fe={key:0,class:"success"},ke={key:1,class:"error"};function ve(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",ue,[(0,s.Lk)("div",pe,[t[2]||(t[2]=(0,s.Lk)("h2",null,"Forgot Password",-1)),t[3]||(t[3]=(0,s.Lk)("p",null,"Enter your email to receive a password reset link.",-1)),(0,s.Lk)("form",{onSubmit:t[1]||(t[1]=(0,o.D$)((...e)=>n.handleForgotPassword&&n.handleForgotPassword(...e),["prevent"])),novalidate:""},[(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),placeholder:"Enter your email",required:"",autocomplete:"email"},null,512),[[o.Jo,i.email,void 0,{trim:!0}]]),(0,s.Lk)("button",{type:"submit",disabled:i.loading},[i.loading?((0,s.uX)(),(0,s.CE)("span",me,"Sending...")):((0,s.uX)(),(0,s.CE)("span",ge,"Send Reset Link"))],8,he)],32),i.message?((0,s.uX)(),(0,s.CE)("p",fe,(0,g.v_)(i.message),1)):(0,s.Q3)("",!0),i.error?((0,s.uX)(),(0,s.CE)("p",ke,(0,g.v_)(i.error),1)):(0,s.Q3)("",!0)])])}var Le={name:"ForgotPassword",data(){return{email:"",message:"",error:"",loading:!1}},methods:{async handleForgotPassword(){if(this.message="",this.error="",this.email)try{this.loading=!0;const e=await M.A.post("/api/auth/forgot-password",{email:this.email});this.message=e.data.message||"If registered, a reset link has been sent."}catch(e){this.error=e.response?.data?.msg||"Error sending reset link."}finally{this.loading=!1}else this.error="Please enter your email."}}};const be=(0,p.A)(Le,[["render",ve],["__scopeId","data-v-4eafd9f9"]]);var ye=be;const we={class:"reset-container"},Ce={class:"reset-box"},Pe=["disabled"],Ee={key:0},De={key:1},Se={key:0,class:"success"},Ae={key:1,class:"error"};function _e(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",we,[(0,s.Lk)("div",Ce,[t[3]||(t[3]=(0,s.Lk)("h2",null,"Reset Password",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)((...e)=>n.handleResetPassword&&n.handleResetPassword(...e),["prevent"])),novalidate:""},[(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.password=e),placeholder:"New password",required:"",autocomplete:"new-password"},null,512),[[o.Jo,i.password,void 0,{trim:!0}]]),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.confirmPassword=e),placeholder:"Confirm new password",required:"",autocomplete:"new-password"},null,512),[[o.Jo,i.confirmPassword,void 0,{trim:!0}]]),(0,s.Lk)("button",{type:"submit",disabled:i.loading},[i.loading?((0,s.uX)(),(0,s.CE)("span",Ee,"Updating...")):((0,s.uX)(),(0,s.CE)("span",De,"Reset Password"))],8,Pe)],32),i.message?((0,s.uX)(),(0,s.CE)("p",Se,(0,g.v_)(i.message),1)):(0,s.Q3)("",!0),i.error?((0,s.uX)(),(0,s.CE)("p",Ae,(0,g.v_)(i.error),1)):(0,s.Q3)("",!0)])])}var Ie={name:"ResetPassword",data(){return{password:"",confirmPassword:"",message:"",error:"",loading:!1}},computed:{token(){return this.$route.query.token||""},email(){return this.$route.query.email||""}},methods:{async handleResetPassword(){if(this.message="",this.error="",this.token&&this.email)if(this.password&&this.confirmPassword)if(this.password===this.confirmPassword)try{this.loading=!0;const e=await M.A.post("/api/auth/reset-password",{token:this.token,email:this.email,password:this.password});this.message=e.data.message||"Password updated successfully.",setTimeout(()=>{this.$router.push("/login")},1500)}catch(e){this.error=e.response?.data?.msg||"Error resetting password."}finally{this.loading=!1}else this.error="Passwords do not match.";else this.error="Please fill both password fields.";else this.error="Invalid or missing reset link details."}}};const Me=(0,p.A)(Ie,[["render",_e],["__scopeId","data-v-0c363c57"]]);var Xe=Me;const Fe={class:"profile-page"},Ne={key:0},xe={key:1,class:"error"},$e={key:2,class:"profile-card"};function Ue(e,t,a,o,r,i){return(0,s.uX)(),(0,s.CE)("div",Fe,[t[5]||(t[5]=(0,s.Lk)("h1",null,"Admin Profile",-1)),r.loading?((0,s.uX)(),(0,s.CE)("div",Ne,"Loading profile...")):r.error?((0,s.uX)(),(0,s.CE)("div",xe,(0,g.v_)(r.error),1)):((0,s.uX)(),(0,s.CE)("div",$e,[(0,s.Lk)("p",null,[t[0]||(t[0]=(0,s.Lk)("strong",null,"Username:",-1)),(0,s.eW)(" "+(0,g.v_)(r.profile.username),1)]),(0,s.Lk)("p",null,[t[1]||(t[1]=(0,s.Lk)("strong",null,"Email:",-1)),(0,s.eW)(" "+(0,g.v_)(r.profile.email),1)]),(0,s.Lk)("p",null,[t[2]||(t[2]=(0,s.Lk)("strong",null,"Date of Birth:",-1)),(0,s.eW)(" "+(0,g.v_)(r.profile.dob),1)]),(0,s.Lk)("p",null,[t[3]||(t[3]=(0,s.Lk)("strong",null,"Phone:",-1)),(0,s.eW)(" "+(0,g.v_)(r.profile.phone),1)]),(0,s.Lk)("p",null,[t[4]||(t[4]=(0,s.Lk)("strong",null,"Address:",-1)),(0,s.eW)(" "+(0,g.v_)(r.profile.address),1)])]))])}var Qe={data(){return{profile:null,error:null,loading:!0}},async created(){try{const e=localStorage.getItem("token");if(!e)return this.error="No token found. Please log in again.",void(this.loading=!1);const t=await M.A.get("http://localhost:5000/api/profile",{headers:{Authorization:`Bearer ${e}`}});this.profile=t.data}catch(e){this.error="Failed to load profile",console.error("Profile fetch error:",e)}finally{this.loading=!1}}};const Oe=(0,p.A)(Qe,[["render",Ue],["__scopeId","data-v-4112101c"]]);var Te=Oe;const Je={class:"form-wrapper"},qe={class:"form-card"},Ve={class:"form-group"},je={key:0,class:"error"},We={class:"form-group"},Re={key:0,class:"error"},Be={class:"form-group"},ze={key:0,class:"error"},Ge={class:"form-group"},Ye={key:0,class:"error"},He={class:"form-group"},Ke={key:0,class:"error"},Ze={class:"form-group"},et={key:0,class:"error"},tt={class:"form-group"},at={key:0,class:"error"},ot={class:"form-group"},st={key:0,class:"error"},rt={class:"form-group full-width"},it=["value"],nt={key:0,class:"error"},lt={class:"form-group full-width"},dt={key:0,class:"error"},ct={class:"form-group full-width"},ut={key:0,class:"error"},pt={key:0,class:"image-preview-container"},ht=["src"],mt={class:"form-group full-width button-group"},gt=["disabled"];function ft(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Je,[(0,s.Lk)("div",qe,[t[16]||(t[16]=(0,s.Lk)("h2",{class:"form-title"},"Add New Products",-1)),(0,s.Lk)("form",{onSubmit:t[11]||(t[11]=(0,o.D$)((...e)=>n.addProduct&&n.addProduct(...e),["prevent"])),class:"form-grid"},[(0,s.Lk)("div",Ve,[(0,s.bo)((0,s.Lk)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e),type:"text",placeholder:"Item Name"},null,512),[[o.Jo,i.name]]),i.errors.name?((0,s.uX)(),(0,s.CE)("p",je,(0,g.v_)(i.errors.name),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",We,[(0,s.bo)((0,s.Lk)("input",{id:"quantity","onUpdate:modelValue":t[1]||(t[1]=e=>i.quantity=e),type:"number",min:"0",placeholder:"Quantity"},null,512),[[o.Jo,i.quantity,void 0,{number:!0}]]),i.errors.quantity?((0,s.uX)(),(0,s.CE)("p",Re,(0,g.v_)(i.errors.quantity),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Be,[(0,s.bo)((0,s.Lk)("input",{id:"originalPrice","onUpdate:modelValue":t[2]||(t[2]=e=>i.originalPrice=e),type:"number",placeholder:"Original Price"},null,512),[[o.Jo,i.originalPrice,void 0,{number:!0}]]),i.errors.originalPrice?((0,s.uX)(),(0,s.CE)("p",ze,(0,g.v_)(i.errors.originalPrice),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ge,[(0,s.bo)((0,s.Lk)("input",{id:"discountPrice","onUpdate:modelValue":t[3]||(t[3]=e=>i.discountPrice=e),type:"number",placeholder:"Discount Price"},null,512),[[o.Jo,i.discountPrice,void 0,{number:!0}]]),i.errors.discountPrice?((0,s.uX)(),(0,s.CE)("p",Ye,(0,g.v_)(i.errors.discountPrice),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",He,[t[12]||(t[12]=(0,s.Lk)("label",{for:"manufacturingDate"},"Mfg Date",-1)),(0,s.bo)((0,s.Lk)("input",{id:"manufacturingDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.manufacturingDate=e),type:"date"},null,512),[[o.Jo,i.manufacturingDate]]),i.errors.manufacturingDate?((0,s.uX)(),(0,s.CE)("p",Ke,(0,g.v_)(i.errors.manufacturingDate),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ze,[t[13]||(t[13]=(0,s.Lk)("label",{for:"expiryDate"},"Expiry Date",-1)),(0,s.bo)((0,s.Lk)("input",{id:"expiryDate","onUpdate:modelValue":t[5]||(t[5]=e=>i.expiryDate=e),type:"date"},null,512),[[o.Jo,i.expiryDate]]),i.errors.expiryDate?((0,s.uX)(),(0,s.CE)("p",et,(0,g.v_)(i.errors.expiryDate),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",tt,[(0,s.bo)((0,s.Lk)("input",{id:"batchNumber","onUpdate:modelValue":t[6]||(t[6]=e=>i.batchNumber=e),type:"text",placeholder:"Batch Number"},null,512),[[o.Jo,i.batchNumber]]),i.errors.batchNumber?((0,s.uX)(),(0,s.CE)("p",at,(0,g.v_)(i.errors.batchNumber),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ot,[(0,s.bo)((0,s.Lk)("input",{id:"rackNumber","onUpdate:modelValue":t[7]||(t[7]=e=>i.rackNumber=e),type:"number",min:"1",max:"155",placeholder:"Rack (1-155)"},null,512),[[o.Jo,i.rackNumber,void 0,{number:!0}]]),i.errors.rackNumber?((0,s.uX)(),(0,s.CE)("p",st,(0,g.v_)(i.errors.rackNumber),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",rt,[t[15]||(t[15]=(0,s.Lk)("label",{for:"category"},"Category",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.category=e),id:"category"},[t[14]||(t[14]=(0,s.Lk)("option",{value:"",disabled:""},"Select Category",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.categories,e=>((0,s.uX)(),(0,s.CE)("option",{key:e._id,value:e._id},(0,g.v_)(e.name),9,it))),128))],512),[[o.u1,i.category]]),i.errors.category?((0,s.uX)(),(0,s.CE)("p",nt,(0,g.v_)(i.errors.category),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",lt,[(0,s.bo)((0,s.Lk)("textarea",{id:"description","onUpdate:modelValue":t[9]||(t[9]=e=>i.description=e),placeholder:"Description (4-20 chars)"},null,512),[[o.Jo,i.description]]),i.errors.description?((0,s.uX)(),(0,s.CE)("p",dt,(0,g.v_)(i.errors.description),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ct,[(0,s.Lk)("input",{id:"image",type:"file",onChange:t[10]||(t[10]=(...e)=>n.handleImageUpload&&n.handleImageUpload(...e)),accept:"image/*"},null,32),i.errors.image?((0,s.uX)(),(0,s.CE)("p",ut,(0,g.v_)(i.errors.image),1)):(0,s.Q3)("",!0)]),i.preview?((0,s.uX)(),(0,s.CE)("div",pt,[(0,s.Lk)("img",{src:i.preview,alt:"Preview",class:"image-preview"},null,8,ht)])):(0,s.Q3)("",!0),(0,s.Lk)("div",mt,[(0,s.Lk)("button",{type:"submit",disabled:i.loading,class:"btn-submit"},(0,g.v_)(i.loading?"Adding...":"Add Product"),9,gt)])],32)])])}a(4603),a(7566),a(8721);var kt={name:"AddProduct",props:{isModal:{type:Boolean,default:!1}},data(){return{name:"",description:"",originalPrice:"",discountPrice:"",quantity:"",manufacturingDate:"",expiryDate:"",batchNumber:"",rackNumber:"",category:"",categories:[],image:null,preview:null,loading:!1,errors:{}}},methods:{handleImageUpload(e){const t=e.target.files[0];t&&(this.image=t,this.preview=URL.createObjectURL(t))},async loadCategories(){try{const e=await M.A.get("http://localhost:5000/api/categories");this.categories=Array.isArray(e.data)?e.data:Array.isArray(e.data.categories)?e.data.categories:[]}catch(e){console.error("âŒ Error loading categories:",e.message),this.categories=[]}},validateBatchNumber(e){const t=[/^[A-Z0-9]{3,10}$/,/^\d{3,8}$/,/^[A-Z]{1,2}\d{2,6}$/,/^\d{2}[A-Z]{1,2}\d{2,4}$/,/^[A-Z0-9-/]{3,12}$/];return t.some(t=>t.test(e))},async addProduct(){if(this.errors={},this.name&&/^[A-Za-z0-9 ]{4,15}$/.test(this.name)||(this.errors.name="Product name 4-15 chars, letters/numbers/spaces only"),this.description&&/^[A-Za-z0-9 ]{4,20}$/.test(this.description)||(this.errors.description="Description 4-20 chars, letters/numbers/spaces only"),(!this.originalPrice||this.originalPrice<1||this.originalPrice>1e3)&&(this.errors.originalPrice="Original price must be 1-1000"),(!this.discountPrice||this.discountPrice<1||this.discountPrice>1e3)&&(this.errors.discountPrice="Discount price must be 1-1000"),this.discountPrice>this.originalPrice&&(this.errors.discountPrice="Discount cannot be greater than original price"),this.quantity<0&&(this.errors.quantity="Quantity must be 0 or greater"),this.manufacturingDate||(this.errors.manufacturingDate="Manufacturing date required"),this.expiryDate||(this.errors.expiryDate="Expiry date required"),this.manufacturingDate&&this.expiryDate){const e=new Date(this.manufacturingDate),t=new Date(this.expiryDate);e.getTime()===t.getTime()&&(this.errors.expiryDate="Expiry must differ from manufacturing date"),(t-e)/864e5<10&&(this.errors.expiryDate="Expiry must be at least 10 days after manufacturing")}if(this.batchNumber&&this.validateBatchNumber(this.batchNumber)||(this.errors.batchNumber="Invalid batch number format"),(!this.rackNumber||this.rackNumber<1||this.rackNumber>155)&&(this.errors.rackNumber="Rack number must be 1-155"),this.category||(this.errors.category="Select a category"),this.image||(this.errors.image="Select an image"),!(Object.keys(this.errors).length>0)){this.loading=!0;try{const e=new FormData;e.append("name",this.name),e.append("description",this.description),e.append("originalPrice",this.originalPrice),e.append("discountPrice",this.discountPrice),e.append("quantity",this.quantity),e.append("manufacturingDate",this.manufacturingDate),e.append("expiryDate",this.expiryDate),e.append("batchNumber",this.batchNumber),e.append("rackNumber",this.rackNumber),e.append("category",this.category),e.append("image",this.image);const t=await M.A.post("http://localhost:5000/api/products/addproduct",e,{headers:{"Content-Type":"multipart/form-data"}});this.isModal?this.$emit("close"):(alert(t.data.message),this.resetForm())}catch(e){const t=e.response?.data?.message;t?t.includes("name")?this.errors.name=t:t.includes("description")?this.errors.description=t:t.includes("Batch")?this.errors.batchNumber=t:t.includes("category")?this.errors.category=t:alert(t):alert("Server error")}finally{this.loading=!1}}},resetForm(){this.name="",this.description="",this.originalPrice="",this.discountPrice="",this.quantity="",this.manufacturingDate="",this.expiryDate="",this.batchNumber="",this.rackNumber="",this.category="",this.image=null,this.preview=null,this.errors={}}},mounted(){this.loadCategories()}};const vt=(0,p.A)(kt,[["render",ft],["__scopeId","data-v-590c194b"]]);var Lt=vt;const bt={class:"user-page"},yt={class:"main-layout"},wt={class:"sidebar"},Ct={class:"menu"};function Pt(e,t,a,r,i,l){return(0,s.uX)(),(0,s.CE)("div",bt,[t[7]||(t[7]=(0,s.Lk)("header",{class:"header"},[(0,s.Lk)("h1",null,"User Dashboard")],-1)),(0,s.Lk)("div",yt,[(0,s.Lk)("aside",wt,[t[5]||(t[5]=(0,s.Lk)("div",{class:"logo-section"},[(0,s.Lk)("img",{src:n,alt:"Logo",class:"logo"}),(0,s.Lk)("h2",null,"User Panel")],-1)),(0,s.Lk)("ul",Ct,[t[1]||(t[1]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#"},"Dashboard")],-1)),t[2]||(t[2]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#"},"Products")],-1)),t[3]||(t[3]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#"},"Leaves")],-1)),t[4]||(t[4]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#"},"Profile")],-1)),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.D$)((...e)=>l.logout&&l.logout(...e),["prevent"]))},"Logout")])])]),t[6]||(t[6]=(0,s.Lk)("main",{class:"content"},[(0,s.Lk)("h2",null,"Welcome, User!"),(0,s.Lk)("p",null,"Select an option from the sidebar to get started.")],-1))])])}var Et={name:"UserPage",methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login")}}};const Dt=(0,p.A)(Et,[["render",Pt],["__scopeId","data-v-23346132"]]);var St=Dt;const At={class:"admin-wrapper"},_t={class:"sidebar"},It={class:"menu"},Mt={class:"main"},Xt={key:0,class:"header"},Ft={class:"admin-menu"},Nt={key:0,class:"page-container"},xt={key:1,class:"page-container"},$t={key:2,class:"page-container"},Ut={key:0,class:"loading-dashboard"},Qt={key:1,class:"dashboard-container"},Ot={class:"stats-row"},Tt={class:"stat-card blue"},Jt={class:"stat-card orange"},qt={class:"stat-card red"},Vt={class:"stat-card green"},jt={class:"dashboard-grid"},Wt={class:"grid-section left-column"},Rt={class:"card-section"},Bt={class:"section-content"},zt={class:"large-number"},Gt={class:"grid-section right-column"},Yt={class:"card-section"},Ht={class:"section-content"},Kt={class:"leave-info"},Zt={class:"leave-item"},ea={class:"leave-item"},ta={class:"modal-header"},aa={class:"modal-header"},oa={class:"modal-header"};function sa(e,t,a,r,i,n){const l=(0,s.g2)("ProductCategory"),d=(0,s.g2)("StaffManagement"),c=(0,s.g2)("AdminLeaves"),u=(0,s.g2)("AddProduct"),p=(0,s.g2)("ProductList"),h=(0,s.g2)("ProductEdit");return(0,s.uX)(),(0,s.CE)("div",At,[(0,s.Lk)("aside",_t,[t[17]||(t[17]=(0,s.Lk)("h2",{class:"sidebar-title"},"Master Admin",-1)),(0,s.Lk)("ul",It,[(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.D$)(e=>i.selectedMenu="dashboard",["prevent"])),class:(0,g.C4)({active:"dashboard"===i.selectedMenu})}," Dashboard ",2)]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[1]||(t[1]=(0,o.D$)(e=>i.showAddProductModal=!0,["prevent"])),class:(0,g.C4)({active:i.showAddProductModal})}," Add Products ",2)]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,o.D$)(e=>i.selectedMenu="addCategory",["prevent"])),class:(0,g.C4)({active:"addCategory"===i.selectedMenu})}," Add Category ",2)]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[3]||(t[3]=(0,o.D$)(e=>i.selectedMenu="staffManagement",["prevent"])),class:(0,g.C4)({active:"staffManagement"===i.selectedMenu})}," Staff Management ",2)]),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[4]||(t[4]=(0,o.D$)(e=>i.selectedMenu="approve-leaves",["prevent"])),class:(0,g.C4)({active:"approve-leaves"===i.selectedMenu})}," Approve Leaves ",2)]),t[16]||(t[16]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#"},"Page Management")],-1)),(0,s.Lk)("li",null,[(0,s.Lk)("a",{href:"#",onClick:t[5]||(t[5]=(0,o.D$)(e=>i.showListProductsModal=!0,["prevent"])),class:(0,g.C4)({active:i.showListProductsModal})}," List Products ",2)])])]),(0,s.Lk)("div",Mt,[i.showEditProductModal?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("header",Xt,[t[20]||(t[20]=(0,s.Lk)("h1",null,[(0,s.eW)("Dashboard "),(0,s.Lk)("span",{class:"small"},"Control panel")],-1)),(0,s.Lk)("div",Ft,[t[19]||(t[19]=(0,s.Lk)("span",null,"Laravel Admin â–¾",-1)),(0,s.Lk)("button",{class:"logout-btn",onClick:t[6]||(t[6]=(...e)=>n.logout&&n.logout(...e))},t[18]||(t[18]=[(0,s.Lk)("i",{class:"bi bi-box-arrow-right"},null,-1),(0,s.eW)(" Logout ",-1)]))])])),(0,s.Lk)("main",{class:(0,g.C4)(["content",{"content-page":i.selectedMenu&&"dashboard"!==i.selectedMenu}])},["addCategory"===i.selectedMenu?((0,s.uX)(),(0,s.CE)("div",Nt,[(0,s.bF)(l)])):(0,s.Q3)("",!0),"staffManagement"===i.selectedMenu?((0,s.uX)(),(0,s.CE)("div",xt,[(0,s.bF)(d)])):(0,s.Q3)("",!0),"approve-leaves"===i.selectedMenu?((0,s.uX)(),(0,s.CE)("div",$t,[(0,s.bF)(c)])):(0,s.Q3)("",!0),"dashboard"!==i.selectedMenu&&i.selectedMenu?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)(s.FK,{key:3},[i.dashboardLoading?((0,s.uX)(),(0,s.CE)("div",Ut,t[21]||(t[21]=[(0,s.Lk)("p",null,"Loading dashboard statistics...",-1)]))):((0,s.uX)(),(0,s.CE)("div",Qt,[(0,s.Lk)("div",Ot,[(0,s.Lk)("div",Tt,[(0,s.Lk)("h2",null,(0,g.v_)(i.totalProducts),1),t[22]||(t[22]=(0,s.Lk)("p",null,"Total Products",-1))]),(0,s.Lk)("div",Jt,[(0,s.Lk)("h2",null,(0,g.v_)(i.totalCategories),1),t[23]||(t[23]=(0,s.Lk)("p",null,"Total Categories",-1))]),(0,s.Lk)("div",qt,[(0,s.Lk)("h2",null,(0,g.v_)(i.totalStaff),1),t[24]||(t[24]=(0,s.Lk)("p",null,"Total Staff",-1))]),(0,s.Lk)("div",Vt,[(0,s.Lk)("h2",null,(0,g.v_)(i.totalInventory),1),t[25]||(t[25]=(0,s.Lk)("p",null,"Total Inventory",-1))])]),(0,s.Lk)("div",jt,[(0,s.Lk)("div",Wt,[(0,s.Lk)("div",Rt,[t[26]||(t[26]=(0,s.Lk)("h3",null,"Active Staff",-1)),(0,s.Lk)("div",Bt,[(0,s.Lk)("p",zt,(0,g.v_)(i.activeStaff),1)])])]),(0,s.Lk)("div",Gt,[(0,s.Lk)("div",Yt,[t[29]||(t[29]=(0,s.Lk)("h3",null,"Leave Status",-1)),(0,s.Lk)("div",Ht,[(0,s.Lk)("div",Kt,[(0,s.Lk)("span",Zt,[t[27]||(t[27]=(0,s.Lk)("strong",null,"Pending:",-1)),(0,s.eW)(" "+(0,g.v_)(i.pendingLeaves),1)]),(0,s.Lk)("span",ea,[t[28]||(t[28]=(0,s.Lk)("strong",null,"Approved:",-1)),(0,s.eW)(" "+(0,g.v_)(i.approvedLeaves),1)])])])])])])]))],64))],2)]),i.showAddProductModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[9]||(t[9]=e=>i.showAddProductModal=!1)},[(0,s.Lk)("div",{class:"modal-content",onClick:t[8]||(t[8]=(0,o.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",ta,[t[30]||(t[30]=(0,s.Lk)("h2",null,"Add New Product",-1)),(0,s.Lk)("button",{class:"modal-close",onClick:t[7]||(t[7]=e=>i.showAddProductModal=!1)}," âœ• ")]),(0,s.bF)(u,{"is-modal":!0,onClose:n.closeAddProductModal},null,8,["onClose"])])])):(0,s.Q3)("",!0),i.showListProductsModal?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"modal-overlay-large",onClick:t[12]||(t[12]=e=>i.showListProductsModal=!1)},[(0,s.Lk)("div",{class:"modal-content-large",onClick:t[11]||(t[11]=(0,o.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",aa,[t[31]||(t[31]=(0,s.Lk)("h2",null,"Product List",-1)),(0,s.Lk)("button",{class:"modal-close",onClick:t[10]||(t[10]=e=>i.showListProductsModal=!1)}," âœ• ")]),(0,s.bF)(p,{"is-modal":!0,onClose:n.closeListProductsModal,onEdit:n.openEditProductModal},null,8,["onClose","onEdit"])])])):(0,s.Q3)("",!0),i.showEditProductModal?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"modal-overlay",onClick:t[15]||(t[15]=e=>i.showEditProductModal=!1)},[(0,s.Lk)("div",{class:"modal-content-small",onClick:t[14]||(t[14]=(0,o.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",oa,[t[32]||(t[32]=(0,s.Lk)("h2",null,"Edit Product",-1)),(0,s.Lk)("button",{class:"modal-close",onClick:t[13]||(t[13]=e=>i.showEditProductModal=!1)}," âœ• ")]),(0,s.bF)(h,{"product-id":i.editProductId,onUpdated:n.handleProductUpdated},null,8,["product-id","onUpdated"])])])):(0,s.Q3)("",!0)])}a(2489),a(8237);var ra=a(3236);const ia={class:"form-wrapper"},na={class:"form-card"},la={class:"form-group"},da={class:"form-group"},ca={class:"form-group"},ua={class:"form-group"},pa={class:"form-group full-width"},ha={class:"form-group full-width"},ma={key:0,class:"image-preview-container"},ga=["src"],fa={key:1,class:"image-preview-container"},ka=["src"],va={class:"form-group full-width button-group"},La=["disabled"];function ba(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",ia,[(0,s.Lk)("div",na,[t[7]||(t[7]=(0,s.Lk)("h2",{class:"form-title"},"Edit Product",-1)),(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)((...e)=>n.updateProduct&&n.updateProduct(...e),["prevent"])),enctype:"multipart/form-data",class:"form-grid"},[(0,s.Lk)("div",la,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.name=e),type:"text",placeholder:"Item Name"},null,512),[[o.Jo,i.form.name]])]),(0,s.Lk)("div",da,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.quantity=e),type:"number",min:"0",placeholder:"Quantity"},null,512),[[o.Jo,i.form.quantity,void 0,{number:!0}]])]),(0,s.Lk)("div",ca,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.originalPrice=e),type:"number",placeholder:"Original Price"},null,512),[[o.Jo,i.form.originalPrice,void 0,{number:!0}]])]),(0,s.Lk)("div",ua,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.discountPrice=e),type:"number",placeholder:"Discount Price"},null,512),[[o.Jo,i.form.discountPrice,void 0,{number:!0}]])]),(0,s.Lk)("div",pa,[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.description=e),placeholder:"Description (4-20 chars)"},null,512),[[o.Jo,i.form.description]])]),(0,s.Lk)("div",ha,[(0,s.Lk)("input",{id:"image",type:"file",onChange:t[5]||(t[5]=(...e)=>n.handleFileUpload&&n.handleFileUpload(...e)),accept:"image/*"},null,32)]),i.form.image&&!i.imageFile?((0,s.uX)(),(0,s.CE)("div",ma,[(0,s.Lk)("img",{src:n.getImageUrl(i.form.image),alt:"Current Product",class:"image-preview"},null,8,ga)])):(0,s.Q3)("",!0),i.newImagePreview?((0,s.uX)(),(0,s.CE)("div",fa,[(0,s.Lk)("img",{src:i.newImagePreview,alt:"New Preview",class:"image-preview"},null,8,ka)])):(0,s.Q3)("",!0),(0,s.Lk)("div",va,[(0,s.Lk)("button",{type:"submit",disabled:i.loading,class:"btn-submit"},(0,g.v_)(i.loading?"Updating...":"Update Product"),9,La)])],32)])])}var ya={name:"ProductEdit",props:{productId:{type:String,required:!0}},data(){return{form:{name:"",description:"",originalPrice:null,discountPrice:null,quantity:null,image:""},imageFile:null,newImagePreview:null,loading:!1}},async mounted(){await this.fetchProduct()},methods:{getImageUrl(e){return e.startsWith("/")?`http://localhost:5000${e}`:e},async fetchProduct(){try{const e=await M.A.get(`http://localhost:5000/api/products/getproduct/${this.productId}`);if(e.data.success){const t=e.data.product;this.form={name:t.name,description:t.description,originalPrice:t.originalPrice,discountPrice:t.discountPrice,quantity:t.quantity,image:t.image||""}}}catch(e){console.error("Error fetching product:",e.response?.data||e.message)}},handleFileUpload(e){if(this.imageFile=e.target.files[0],this.imageFile){const e=new FileReader;e.onload=e=>{this.newImagePreview=e.target.result},e.readAsDataURL(this.imageFile)}},async updateProduct(){this.loading=!0;try{const e=new FormData;Object.keys(this.form).forEach(t=>{null!==this.form[t]&&""!==this.form[t]&&"image"!==t&&e.append(t,this.form[t])}),this.imageFile&&e.append("image",this.imageFile);const t=await M.A.put(`http://localhost:5000/api/products/updateproduct/${this.productId}`,e,{headers:{"Content-Type":"multipart/form-data"}});t.data.success&&this.$emit("updated")}catch(e){console.error(e.response?.data||e.message)}finally{this.loading=!1}}}};const wa=(0,p.A)(ya,[["render",ba],["__scopeId","data-v-54cd5800"]]);var Ca=wa,Pa=a(7313);const Ea={class:"staff-management"},Da={class:"header-section"},Sa={class:"header-controls"},Aa={class:"search-filter"},_a={class:"search-box"},Ia={class:"action-buttons-header"},Ma={class:"modal-header"},Xa={class:"table-container"},Fa={class:"staff-table"},Na={class:"id-cell"},xa={class:"name-cell"},$a={class:"employee-info"},Ua={class:"employee-avatar"},Qa={class:"employee-name"},Oa={class:"department-cell"},Ta={class:"contact-cell"},Ja={class:"contact-info"},qa={class:"phone"},Va={class:"email"},ja={class:"requests-cell"},Wa={key:0,class:"badge pending"},Ra={key:1,class:"badge"},Ba={class:"date-cell"},za={class:"actions-cell"},Ga={class:"action-menu"},Ya=["onClick"],Ha={key:0,class:"dropdown-menu"},Ka=["onClick"],Za=["onClick"],eo=["onClick"],to=["onClick"],ao=["onClick"],oo={key:0,class:"no-data"},so={class:"modal-actions-delete"};function ro(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",Ea,[(0,s.Lk)("div",Da,[t[15]||(t[15]=(0,s.Lk)("h1",null,"COMPANY EMPLOYEES",-1)),(0,s.Lk)("div",Sa,[(0,s.Lk)("div",Aa,[(0,s.Lk)("div",_a,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",placeholder:"Search Employee",class:"search-input"},null,512),[[o.Jo,i.searchQuery]]),t[12]||(t[12]=(0,s.Lk)("i",{class:"search-icon"},"ðŸ”",-1))]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.statusFilter=e),class:"status-filter"},t[13]||(t[13]=[(0,s.Lk)("option",{value:""},"All Status",-1),(0,s.Lk)("option",{value:"active"},"Active",-1),(0,s.Lk)("option",{value:"pending"},"Pending",-1),(0,s.Lk)("option",{value:"deactivated"},"Deactivated",-1)]),512),[[o.u1,i.statusFilter]])]),(0,s.Lk)("div",Ia,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showInviteForm=!0),class:"btn-add"}," + Add Employees "),t[14]||(t[14]=(0,s.Lk)("button",{class:"btn-import"},"ðŸ“¥ Import Employees",-1))])])]),i.showInviteForm?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[7]||(t[7]=e=>i.showInviteForm=!1)},[(0,s.Lk)("div",{class:"modal-content",onClick:t[6]||(t[6]=(0,o.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",Ma,[t[16]||(t[16]=(0,s.Lk)("h2",null,"Invite Employee",-1)),(0,s.Lk)("button",{class:"modal-close",onClick:t[3]||(t[3]=e=>i.showInviteForm=!1)},"âœ•")]),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)((...e)=>n.inviteStaff&&n.inviteStaff(...e),["prevent"])),class:"invite-form-modal"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.email=e),type:"email",placeholder:"Enter staff email",required:""},null,512),[[o.Jo,i.email]]),t[17]||(t[17]=(0,s.Lk)("button",{type:"submit",class:"btn-submit"},"Send Invitation",-1))],32)])])):(0,s.Q3)("",!0),i.toastMessage?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,g.C4)(["toast",i.toastError?"error":"success"])},(0,g.v_)(i.toastMessage),3)):(0,s.Q3)("",!0),(0,s.Lk)("div",Xa,[(0,s.Lk)("table",Fa,[t[18]||(t[18]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Department"),(0,s.Lk)("th",null,"Contact"),(0,s.Lk)("th",null,"Requests"),(0,s.Lk)("th",null,"Hire Date"),(0,s.Lk)("th",null,"Actions")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredStaff,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e._id},[(0,s.Lk)("td",Na,(0,g.v_)(t+1),1),(0,s.Lk)("td",xa,[(0,s.Lk)("div",$a,[(0,s.Lk)("div",Ua,(0,g.v_)(e.name?e.name.charAt(0).toUpperCase():"?"),1),(0,s.Lk)("span",Qa,(0,g.v_)(e.name||"â€”"),1)])]),(0,s.Lk)("td",Oa,(0,g.v_)(e.department||"â€”"),1),(0,s.Lk)("td",Ta,[(0,s.Lk)("div",Ja,[(0,s.Lk)("div",qa,(0,g.v_)(e.phone||"â€”"),1),(0,s.Lk)("div",Va,(0,g.v_)(e.email),1)])]),(0,s.Lk)("td",ja,["pending"===e.status?((0,s.uX)(),(0,s.CE)("span",Wa,"1")):((0,s.uX)(),(0,s.CE)("span",Ra,"0"))]),(0,s.Lk)("td",Ba,(0,g.v_)(e.dateOfJoining?new Date(e.dateOfJoining).toLocaleDateString("en-CA"):"â€”"),1),(0,s.Lk)("td",za,[(0,s.Lk)("div",Ga,[(0,s.Lk)("button",{onClick:t=>n.toggleMenu(e._id),class:"menu-trigger",title:"More options"}," â‹® ",8,Ya),i.activeMenu===e._id?((0,s.uX)(),(0,s.CE)("div",Ha,["pending"===e.status?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>n.approveStaff(e._id),class:"menu-item approve"}," âœ“ Approve ",8,Ka)):(0,s.Q3)("",!0),"active"===e.status?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:t=>n.setStatus(e._id,"deactivated"),class:"menu-item deactivate"}," âŠ˜ Deactivate ",8,Za)):(0,s.Q3)("",!0),"deactivated"===e.status?((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:t=>n.setStatus(e._id,"active"),class:"menu-item activate"}," âœ“ Activate ",8,eo)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t=>n.exportStaffPDF(e),class:"menu-item download"}," ðŸ“„ Download PDF ",8,to),(0,s.Lk)("button",{onClick:t=>n.openDeleteModal(e._id),class:"menu-item delete"}," ðŸ—‘ï¸ Delete ",8,ao)])):(0,s.Q3)("",!0)])])]))),128))])]),0===n.filteredStaff.length?((0,s.uX)(),(0,s.CE)("div",oo," No employees found ")):(0,s.Q3)("",!0)]),i.showDeleteModal?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"modal-overlay",onClick:t[11]||(t[11]=(...e)=>n.cancelDelete&&n.cancelDelete(...e))},[(0,s.Lk)("div",{class:"modal-delete",onClick:t[10]||(t[10]=(0,o.D$)(()=>{},["stop"]))},[t[19]||(t[19]=(0,s.Lk)("div",{class:"delete-icon"},"âš ï¸",-1)),t[20]||(t[20]=(0,s.Lk)("h3",null,"Delete Employee",-1)),t[21]||(t[21]=(0,s.Lk)("p",null,"Are you sure you want to permanently delete this staff?",-1)),t[22]||(t[22]=(0,s.Lk)("p",{class:"warning"},"This action cannot be undone.",-1)),(0,s.Lk)("div",so,[(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.confirmDelete&&n.confirmDelete(...e)),class:"btn-delete-confirm"}," Delete "),(0,s.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.cancelDelete&&n.cancelDelete(...e)),class:"btn-delete-cancel"}," Cancel ")])])])):(0,s.Q3)("",!0)])}a(1701);var io=a(597),no=a(9425),lo={data(){return{email:"",staff:[],searchQuery:"",statusFilter:"",toastMessage:"",toastError:!1,showDeleteModal:!1,showInviteForm:!1,deleteId:null,activeMenu:null}},computed:{filteredStaff(){return this.staff.filter(e=>{const t=!this.searchQuery||e.name?.toLowerCase().includes(this.searchQuery.toLowerCase())||e.email?.toLowerCase().includes(this.searchQuery.toLowerCase()),a=!this.statusFilter||e.status===this.statusFilter;return t&&a})}},methods:{async fetchStaff(){try{const e=await M.A.get("http://localhost:5000/api/staff");this.staff=e.data.staff}catch(e){this.showToast("Failed to fetch staff",!0)}},async inviteStaff(){try{await M.A.post("http://localhost:5000/api/staff/invite",{email:this.email}),this.showToast("Invitation sent!"),this.email="",this.fetchStaff()}catch(e){this.showToast(e.response?.data?.message||"Error sending invite",!0)}},async approveStaff(e){try{const t=(new Date).toISOString(),a=await M.A.put(`http://localhost:5000/api/staff/approve/${e}`,{joiningDate:t});this.showToast(a.data.message||"Staff approved successfully"),this.fetchStaff()}catch(t){this.showToast(t.response?.data?.message||"Error approving staff",!0)}},async setStatus(e,t){try{await M.A.put(`http://localhost:5000/api/staff/status/${e}`,{status:t}),this.showToast("Status updated successfully"),this.fetchStaff()}catch(a){this.showToast("Failed to update status",!0)}},openDeleteModal(e){this.deleteId=e,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1,this.deleteId=null},async confirmDelete(){try{await M.A.delete(`http://localhost:5000/api/staff/${this.deleteId}`),this.showToast("Staff deleted successfully"),this.fetchStaff()}catch(e){this.showToast(e.response?.data?.message||"Error deleting staff",!0)}this.showDeleteModal=!1,this.deleteId=null},toggleMenu(e){this.activeMenu=this.activeMenu===e?null:e},showToast(e,t=!1){this.toastMessage=e,this.toastError=t,setTimeout(()=>{this.toastMessage="",this.toastError=!1},3e3)},exportStaffPDF(e){const t=new io.Ay,o=new Image;if(o.src=a(2750),t.addImage(o,"JPEG",34,13,30,25),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("COCHIN DISTRIBUTORS",75,18),t.setFontSize(11),t.setFont("helvetica","normal"),t.text("Merchant Association Building,",82,26),t.text("Santhi Nagar, Kattappana",87,32),t.text("Ph: 9447419293, 9446074962",83,38),t.setDrawColor(0),t.line(14,45,200,45),e.profilePhoto){const a=new Image;a.src=`http://localhost:5000${e.profilePhoto}`,t.addImage(a,"JPEG",160,10,35,35)}t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Personal Information",14,55),(0,no.Ay)(t,{startY:60,theme:"grid",head:[["Field","Value"]],body:[["Name",e.name||"â€”"],["Email",e.email],["Phone",e.phone||"â€”"],["Gender",e.gender||"â€”"],["Address",e.address||"â€”"],["Pincode",e.pincode||"â€”"]]});let s=t.lastAutoTable.finalY+10;t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Work Information",14,s),(0,no.Ay)(t,{startY:s+5,theme:"grid",head:[["Field","Value"]],body:[["Date of Joining",e.dateOfJoining?new Date(e.dateOfJoining).toLocaleDateString():"â€”"],["Status",e.status||"â€”"]]});let r=t.internal.pageSize.getHeight()-15;t.setFontSize(10),t.setFont("helvetica","italic"),t.text(`Generated on ${(new Date).toLocaleDateString()} at ${(new Date).toLocaleTimeString()}`,14,r),t.save(`${e.name||"staff"}_details.pdf`)},exportAllStaffPDF(){const e=new io.Ay,t=new Image;t.src=a(2750),e.addImage(t,"JPEG",34,13,30,25),e.setFontSize(16),e.setFont("helvetica","bold"),e.text("COCHIN DISTRIBUTORS",75,18),e.setFontSize(11),e.setFont("helvetica","normal"),e.text("Merchant Association Building,",82,26),e.text("Santhi Nagar, Kattappana",87,32),e.text("Ph: 9447419293, 9446074962",83,38),e.setDrawColor(0),e.line(14,45,200,45),(0,no.Ay)(e,{startY:50,head:[["Name","Email","Phone","Gender","Address","Pincode","Date of Joining","Status"]],body:this.staff.map(e=>[e.name||"â€”",e.email,e.phone||"â€”",e.gender||"â€”",e.address||"â€”",e.pincode||"â€”",e.dateOfJoining?new Date(e.dateOfJoining).toLocaleDateString():"â€”",e.status||"â€”"])});let o=e.internal.pageSize.getHeight()-15;e.setFontSize(10),e.setFont("helvetica","italic"),e.text(`Generated on ${(new Date).toLocaleDateString()} at ${(new Date).toLocaleTimeString()}`,14,o),e.save("staff-report.pdf")}},mounted(){this.fetchStaff()}};const co=(0,p.A)(lo,[["render",ro],["__scopeId","data-v-b1271fa8"]]);var uo=co,po=a(5328);const ho="http://localhost:5000/api";var mo={name:"AdminPage",components:{AddProduct:Lt,ProductList:ra["default"],ProductEdit:Ca,ProductCategory:Pa["default"],StaffManagement:uo,AdminLeaves:po["default"]},data(){return{selectedMenu:"dashboard",dashboardLoading:!1,showAddProductModal:!1,showListProductsModal:!1,showEditProductModal:!1,editProductId:null,totalProducts:0,totalCategories:0,totalStaff:0,activeStaff:0,pendingLeaves:0,approvedLeaves:0,totalInventory:0}},mounted(){this.fetchDashboardStats()},methods:{async fetchDashboardStats(){this.dashboardLoading=!0;try{const[e,t,a,o]=await Promise.all([M.A.get(`${ho}/products/getproduct`),M.A.get(`${ho}/categories`),M.A.get(`${ho}/staff`),M.A.get(`${ho}/leaves/all`)]);e.data.success&&e.data.products&&(this.totalProducts=e.data.products.length,this.totalInventory=e.data.products.reduce((e,t)=>e+(t.quantity||0),0)),Array.isArray(t.data)&&(this.totalCategories=t.data.length),a.data.success&&Array.isArray(a.data.staff)&&(this.totalStaff=a.data.staff.length,this.activeStaff=a.data.staff.filter(e=>"active"===e.status).length),Array.isArray(o.data)&&(this.pendingLeaves=o.data.filter(e=>"Pending"===e.status).length,this.approvedLeaves=o.data.filter(e=>"Approved"===e.status).length)}catch(e){console.error("Error fetching dashboard stats:",e)}finally{this.dashboardLoading=!1}},closeAddProductModal(){this.showAddProductModal=!1,this.fetchDashboardStats()},closeListProductsModal(){this.showListProductsModal=!1,this.fetchDashboardStats()},openEditProductModal(e){this.editProductId=e,this.showEditProductModal=!0},handleProductUpdated(){this.showEditProductModal=!1,this.showListProductsModal=!1,this.fetchDashboardStats()},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}};const go=(0,p.A)(mo,[["render",sa],["__scopeId","data-v-6a57803a"]]);var fo=go;const ko={class:"staff-register"},vo={class:"form-grid"},Lo={key:0,class:"field-error"},bo={key:1,class:"field-error"},yo={key:2,class:"field-error"},wo={key:3,class:"field-error"},Co={key:0,class:"field-error"},Po={key:1,class:"field-error"},Eo={key:2,class:"field-error"},Do={key:3,class:"preview"},So=["src"],Ao={key:1,class:"message"};function _o(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("div",ko,[t[17]||(t[17]=(0,s.Lk)("h2",null,"Complete Your Registration",-1)),i.submitted?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:t[7]||(t[7]=(0,o.D$)((...e)=>n.register&&n.register(...e),["prevent"])),enctype:"multipart/form-data"},[(0,s.Lk)("div",vo,[(0,s.Lk)("div",null,[t[8]||(t[8]=(0,s.Lk)("label",null,"Name *",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e),placeholder:"Enter your full name"},null,512),[[o.Jo,i.name]]),i.errors.name?((0,s.uX)(),(0,s.CE)("p",Lo,(0,g.v_)(i.errors.name),1)):(0,s.Q3)("",!0),t[9]||(t[9]=(0,s.Lk)("label",null,"Address *",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.address=e),placeholder:"Enter your address",rows:"3"},null,512),[[o.Jo,i.address]]),i.errors.address?((0,s.uX)(),(0,s.CE)("p",bo,(0,g.v_)(i.errors.address),1)):(0,s.Q3)("",!0),t[10]||(t[10]=(0,s.Lk)("label",null,"Phone *",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.phone=e),placeholder:"Enter phone number"},null,512),[[o.Jo,i.phone]]),i.errors.phone?((0,s.uX)(),(0,s.CE)("p",yo,(0,g.v_)(i.errors.phone),1)):(0,s.Q3)("",!0),t[11]||(t[11]=(0,s.Lk)("label",null,"Password *",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>i.password=e),placeholder:"Enter password"},null,512),[[o.Jo,i.password]]),i.errors.password?((0,s.uX)(),(0,s.CE)("p",wo,(0,g.v_)(i.errors.password),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[t[13]||(t[13]=(0,s.Lk)("label",null,"Gender *",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.gender=e)},t[12]||(t[12]=[(0,s.Lk)("option",{disabled:"",value:""},"Select gender",-1),(0,s.Lk)("option",{value:"male"},"Male",-1),(0,s.Lk)("option",{value:"female"},"Female",-1),(0,s.Lk)("option",{value:"other"},"Other",-1)]),512),[[o.u1,i.gender]]),i.errors.gender?((0,s.uX)(),(0,s.CE)("p",Co,(0,g.v_)(i.errors.gender),1)):(0,s.Q3)("",!0),t[14]||(t[14]=(0,s.Lk)("label",null,"Pincode *",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.pincode=e),placeholder:"Enter postal pincode"},null,512),[[o.Jo,i.pincode]]),i.errors.pincode?((0,s.uX)(),(0,s.CE)("p",Po,(0,g.v_)(i.errors.pincode),1)):(0,s.Q3)("",!0),t[15]||(t[15]=(0,s.Lk)("label",null,"Profile Photo *",-1)),(0,s.Lk)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>n.onFileChange&&n.onFileChange(...e)),accept:"image/*"},null,32),i.errors.profilePhoto?((0,s.uX)(),(0,s.CE)("p",Eo,(0,g.v_)(i.errors.profilePhoto),1)):(0,s.Q3)("",!0),i.profilePhotoPreview?((0,s.uX)(),(0,s.CE)("div",Do,[(0,s.Lk)("img",{src:i.profilePhotoPreview,alt:"Profile Preview"},null,8,So)])):(0,s.Q3)("",!0)])]),t[16]||(t[16]=(0,s.Lk)("button",{type:"submit"},"Submit",-1))],32)),i.message?((0,s.uX)(),(0,s.CE)("p",Ao,(0,g.v_)(i.message),1)):(0,s.Q3)("",!0)])}var Io={data(){return{name:"",address:"",phone:"",password:"",gender:"",pincode:"",profilePhoto:null,profilePhotoPreview:null,message:"",submitted:!1,errors:{}}},mounted(){this.checkTokenStatus()},methods:{onFileChange(e){const t=e.target.files[0];t&&(this.profilePhoto=t,this.profilePhotoPreview=URL.createObjectURL(t))},async checkTokenStatus(){const e=this.$route.query.token;if(!e)return this.message="Invalid or expired link",void(this.submitted=!0);try{const t=await M.A.post("http://localhost:5000/api/staff/check-submitted",{token:e});t.data.submitted&&(this.message="You have already submitted your registration.",this.submitted=!0)}catch{this.message="Invalid or expired link.",this.submitted=!0}},async register(){this.errors={};const e=this.$route.query.token;if(!e)return this.message="Invalid or expired link",void(this.submitted=!0);this.name.match(/^[a-zA-Z ]{3,50}$/)||(this.errors.name="Name must be 3â€“50 letters only"),(!this.address||this.address.length<5||this.address.length>100)&&(this.errors.address="Address must be 5â€“100 characters"),this.phone.match(/^[6-9]\d{9}$/)||(this.errors.phone="Invalid Indian phone number"),this.pincode.match(/^[1-9]\d{5}$/)||(this.errors.pincode="Invalid Indian pincode");const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;if(this.password.match(t)||(this.errors.password="Password must be 8+ chars with uppercase, lowercase, number & special char"),this.gender||(this.errors.gender="Please select gender"),this.profilePhoto||(this.errors.profilePhoto="Profile photo is required"),!(Object.keys(this.errors).length>0))try{const t=new FormData;t.append("token",e),t.append("name",this.name),t.append("address",this.address),t.append("phone",this.phone),t.append("password",this.password),t.append("gender",this.gender),t.append("pincode",this.pincode),t.append("profilePhoto",this.profilePhoto);const a=await M.A.post("http://localhost:5000/api/staff/register",t,{headers:{"Content-Type":"multipart/form-data"}});this.message=a.data.message||"Registration successful!",this.submitted=!0,a.data.redirect&&setTimeout(()=>{this.$router.push(a.data.redirect)},2e3)}catch(a){a.response?.data?.alreadySubmitted?(this.message="You have already submitted.",this.submitted=!0):this.message=a.response?.data?.message||"Error submitting registration"}}}};const Mo=(0,p.A)(Io,[["render",_o],["__scopeId","data-v-56abddb6"]]);var Xo=Mo;const Fo=[{path:"/",name:"Home",component:B},{path:"/login",name:"LoginPage",component:N},{path:"/about",name:"AboutPage",component:te},{path:"/contact",name:"ContactPage",component:ce},{path:"/profile",name:"ProfilePage",component:Te},{path:"/forgot-password",name:"ForgotPassword",component:ye},{path:"/reset-password",name:"ResetPassword",component:Xe},{path:"/set-password/:token",name:"SetPassword",component:()=>a.e(213).then(a.bind(a,2213))},{path:"/products/edit/:id",name:"ProductEdit",component:Ca},{path:"/staff/staffregister",name:"StaffRegister",component:Xo},{path:"/google-success",name:"GoogleSuccess",component:()=>a.e(775).then(a.bind(a,1775))},{path:"/admin/add-category",name:"AddCategory",component:()=>Promise.resolve().then(a.bind(a,7313)),beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"admin"===o?.role?a():a("/login")}},{path:"/admin/add-product",name:"AddProduct",component:Lt,beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"admin"===o?.role?a():a("/login")}},{path:"/admin/products",name:"ProductList",component:()=>Promise.resolve().then(a.bind(a,3236)),beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"admin"===o?.role?a():a("/login")}},{path:"/admin",name:"AdminPage",component:fo,beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"admin"===o?.role?a():a("/login")}},{path:"/admin/leaves",name:"AdminLeaves",component:()=>Promise.resolve().then(a.bind(a,5328)),beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"admin"===o?.role?a():a("/login")}},{path:"/user",name:"UserPage",component:St,beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"user"===o?.role?a():a("/login")}},{path:"/staff",name:"StaffPage",component:()=>a.e(993).then(a.bind(a,5993)),beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"staff"===o?.role?a():a("/login")}},{path:"/staff/leave",name:"StaffLeave",component:()=>a.e(974).then(a.bind(a,2974)),beforeEnter:(e,t,a)=>{const o=JSON.parse(localStorage.getItem("user"));"staff"===o?.role?a():a("/login")}}],No=(0,Q.aE)({history:(0,Q.LA)(),routes:Fo});var xo=No;const $o=(0,o.Ef)(U);$o.use(xo),$o.mount("#app")},2750:function(e,t,a){e.exports=a.p+"img/logo.ed83bf4e.jpeg"},3236:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var o=a(6768),s=a(4232);const r={class:"product-list-wrapper"},i={key:0,class:"loading"},n={key:1,class:"no-products"},l={key:2,class:"products-row"},d={class:"image-container"},c=["src","alt"],u={key:0,class:"discount-badge"},p={class:"product-info"},h={class:"product-name"},m={class:"product-desc"},g={class:"price-container"},f={class:"current-price"},k={class:"original-price"},v={key:0},L={key:1},b={class:"actions"},y=["onClick"],w=["onClick"],C={key:3,class:"delete-modal-overlay"},P={class:"delete-modal"},E={class:"delete-modal-actions"};function D(e,t,a,D,S,A){return(0,o.uX)(),(0,o.CE)("div",r,[S.loading?((0,o.uX)(),(0,o.CE)("div",i,t[2]||(t[2]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading products...",-1)]))):0===S.products.length?((0,o.uX)(),(0,o.CE)("div",n,t[3]||(t[3]=[(0,o.Lk)("p",null,"ðŸ“¦ No products found",-1)]))):((0,o.uX)(),(0,o.CE)("div",l,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(S.products,e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"product-card"},[(0,o.Lk)("div",d,[(0,o.Lk)("img",{src:A.getImageUrl(e.image),alt:e.name},null,8,c),A.calculateDiscount(e.originalPrice,e.discountPrice)>0?((0,o.uX)(),(0,o.CE)("div",u," -"+(0,s.v_)(A.calculateDiscount(e.originalPrice,e.discountPrice))+"% ",1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",p,[(0,o.Lk)("h3",h,(0,s.v_)(e.name),1),(0,o.Lk)("p",m,(0,s.v_)(e.description),1),(0,o.Lk)("div",g,[(0,o.Lk)("span",f,"â‚¹"+(0,s.v_)(e.discountPrice),1),(0,o.Lk)("span",k,"â‚¹"+(0,s.v_)(e.originalPrice),1)]),(0,o.Lk)("div",{class:(0,s.C4)(["quantity-badge",A.getQuantityClass(e.quantity)])},[0===e.quantity?((0,o.uX)(),(0,o.CE)("span",v,"Out of Stock")):((0,o.uX)(),(0,o.CE)("span",L,(0,s.v_)(e.quantity)+" in stock",1))],2),(0,o.Lk)("div",b,[(0,o.Lk)("button",{onClick:t=>A.startEdit(e),class:"edit-btn",title:"Edit"},t[4]||(t[4]=[(0,o.Lk)("span",null,"ðŸ“",-1),(0,o.eW)(" Edit ",-1)]),8,y),(0,o.Lk)("button",{onClick:t=>A.openDeleteModal(e._id),class:"delete-btn",title:"Delete"},t[5]||(t[5]=[(0,o.Lk)("span",null,"ðŸ—‘ï¸",-1),(0,o.eW)(" Delete ",-1)]),8,w)])])]))),128))])),S.showDeleteModal?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",P,[t[6]||(t[6]=(0,o.Lk)("div",{class:"delete-modal-icon"},"âš ï¸",-1)),t[7]||(t[7]=(0,o.Lk)("h3",null,"Delete Product?",-1)),t[8]||(t[8]=(0,o.Lk)("p",null,"This action cannot be undone.",-1)),(0,o.Lk)("div",E,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>A.cancelDelete&&A.cancelDelete(...e)),class:"cancel-btn"},"Cancel"),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>A.confirmDelete&&A.confirmDelete(...e)),class:"confirm-btn"},"Delete")])])])):(0,o.Q3)("",!0)])}a(8111),a(2489);var S=a(586),A={name:"ProductList",props:{isModal:{type:Boolean,default:!1}},data(){return{products:[],loading:!1,deletingId:null,showDeleteModal:!1,deleteId:null}},mounted(){this.fetchProducts()},methods:{getImageUrl(e){return e.startsWith("/")?`http://localhost:5000${e}`:e},calculateDiscount(e,t){return e&&t?Math.round((e-t)/e*100):0},getQuantityClass(e){return 0===e?"out-of-stock":e<10?"low-stock":"in-stock"},async fetchProducts(){this.loading=!0;try{const e=await S.A.get("http://localhost:5000/api/products/getproduct");e.data.success&&(this.products=e.data.products)}catch(e){console.error("Error fetching products:",e.response?.data||e.message)}finally{this.loading=!1}},openDeleteModal(e){this.deleteId=e,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1,this.deleteId=null},async confirmDelete(){this.deletingId=this.deleteId;try{const e=await S.A.delete(`http://localhost:5000/api/products/deleteproduct/${this.deleteId}`);e.data.success&&(this.products=this.products.filter(e=>e._id!==this.deleteId),this.showDeleteModal=!1,this.deleteId=null,this.isModal&&this.$emit("close"))}catch(e){console.error("Delete product error:",e.response?.data||e.message)}finally{this.deletingId=null}},startEdit(e){this.$emit("edit",e._id)}}},_=a(1241);const I=(0,_.A)(A,[["render",D],["__scopeId","data-v-7b4d2a6e"]]);var M=I},4027:function(e,t,a){e.exports=a.p+"img/bakery1.0a1c68a1.jpg"},5328:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var o=a(6768),s=a(4232);const r={class:"leave-table"},i=["onClick"],n=["onClick"],l=["onClick"];function d(e,t,a,d,c,u){return(0,o.uX)(),(0,o.CE)("div",null,[t[1]||(t[1]=(0,o.Lk)("h2",null,"Leave Requests",-1)),(0,o.Lk)("table",r,[t[0]||(t[0]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Email"),(0,o.Lk)("th",null,"Reason"),(0,o.Lk)("th",null,"Requested Date"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Approved Date"),(0,o.Lk)("th",null,"Rejected Date"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.leaves,e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",null,(0,s.v_)(e.email),1),(0,o.Lk)("td",null,(0,s.v_)(e.reason),1),(0,o.Lk)("td",null,(0,s.v_)(new Date(e.date).toLocaleDateString()),1),(0,o.Lk)("td",null,(0,s.v_)(e.status),1),(0,o.Lk)("td",null,(0,s.v_)(e.approvedDate?new Date(e.approvedDate).toLocaleString():"-"),1),(0,o.Lk)("td",null,(0,s.v_)(e.rejectedDate?new Date(e.rejectedDate).toLocaleString():"-"),1),(0,o.Lk)("td",null,["Pending"===e.status?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>u.updateStatus(e._id,"Approved")}," Approve ",8,i)):(0,o.Q3)("",!0),"Pending"===e.status?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t=>u.updateStatus(e._id,"Rejected")}," Reject ",8,n)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t=>u.deleteLeave(e._id),class:"delete-btn"}," Delete ",8,l)])]))),128))])])])}a(8111),a(2489),a(1701);var c={data(){return{leaves:[]}},async created(){await this.fetchLeaves()},methods:{async fetchLeaves(){const e=await fetch("http://localhost:5000/api/leaves/all");this.leaves=await e.json()},async updateStatus(e,t){const a=await fetch(`http://localhost:5000/api/leaves/update/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}),o=await a.json();this.leaves=this.leaves.map(t=>t._id===e?o:t)},async deleteLeave(e){confirm("Are you sure you want to delete this leave?")&&(await fetch(`http://localhost:5000/api/leaves/delete/${e}`,{method:"DELETE"}),this.leaves=this.leaves.filter(t=>t._id!==e))}}},u=a(1241);const p=(0,u.A)(c,[["render",d],["__scopeId","data-v-ca17e04c"]]);var h=p},7052:function(e,t,a){e.exports=a.p+"img/bakery2.d56010e8.jpg"},7313:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var o=a(6768),s=a(5130),r=a(4232);const i={class:"category-container"},n={class:"category-table"},l={key:0},d=["onClick"],c=["onClick"],u=["onClick"],p={key:0,class:"modal-overlay"},h={class:"modal"},m={class:"modal-actions"};function g(e,t,a,g,f,k){return(0,o.uX)(),(0,o.CE)("div",i,[t[11]||(t[11]=(0,o.Lk)("h2",null,"Category Management",-1)),(0,o.Lk)("form",{onSubmit:t[1]||(t[1]=(0,s.D$)((...e)=>k.addCategory&&k.addCategory(...e),["prevent"])),class:"add-form"},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>f.name=e),type:"text",placeholder:"Enter category name",required:""},null,512),[[s.Jo,f.name]]),t[6]||(t[6]=(0,o.Lk)("button",{type:"submit"},"+ Add New Category",-1))],32),(0,o.Lk)("table",n,[t[8]||(t[8]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Category Name"),(0,o.Lk)("th",null,"Status"),(0,o.Lk)("th",null,"Last Updated"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.categories,e=>((0,o.uX)(),(0,o.CE)("tr",{key:e._id},[(0,o.Lk)("td",null,[f.editId!==e._id?((0,o.uX)(),(0,o.CE)("span",l,(0,r.v_)(e.name),1)):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,"onUpdate:modelValue":t[2]||(t[2]=e=>f.editName=e),type:"text",placeholder:"Update category"},null,512)),[[s.Jo,f.editName]])]),t[7]||(t[7]=(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:"published"},"Published")],-1)),(0,o.Lk)("td",null,(0,r.v_)(k.formatDate(e.updatedAt)),1),(0,o.Lk)("td",null,[f.editId!==e._id?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>k.startEdit(e),class:"btn-icon edit"}," Edit ",8,d)):(0,o.Q3)("",!0),f.editId===e._id?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t=>k.updateCategory(e._id),class:"btn-icon save"}," Save ",8,c)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t=>k.openDeleteModal(e._id),class:"btn-icon delete"}," Delete ",8,u)])]))),128))])]),f.showDeleteModal?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",h,[(0,o.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=(...e)=>k.closeDeleteModal&&k.closeDeleteModal(...e))},"âœ–"),t[9]||(t[9]=(0,o.Lk)("h3",null,"Are you sure you want to permanently delete this category?",-1)),t[10]||(t[10]=(0,o.Lk)("p",null,"This change cannot be undone.",-1)),(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"cancel",onClick:t[4]||(t[4]=(...e)=>k.closeDeleteModal&&k.closeDeleteModal(...e))},"Cancel"),(0,o.Lk)("button",{class:"confirm",onClick:t[5]||(t[5]=(...e)=>k.confirmDelete&&k.confirmDelete(...e))},"Delete")])])])):(0,o.Q3)("",!0)])}a(8111),a(2489);var f=a(586),k={data(){return{name:"",categories:[],editId:null,editName:"",showDeleteModal:!1,deleteId:null}},methods:{async fetchCategories(){try{const e=await f.A.get("http://localhost:5000/api/categories");this.categories=e.data}catch(e){console.error("Error fetching categories:",e)}},async addCategory(){try{const e=await f.A.post("http://localhost:5000/api/categories",{name:this.name});this.categories.unshift(e.data),this.name=""}catch(e){alert(e.response?.data?.error||"Error adding category")}},startEdit(e){this.editId=e._id,this.editName=e.name},async updateCategory(e){try{const t=await f.A.put(`http://localhost:5000/api/categories/${e}`,{name:this.editName}),a=this.categories.findIndex(t=>t._id===e);-1!==a&&(this.categories[a]=t.data),this.editId=null,this.editName=""}catch(t){alert(t.response?.data?.error||"Error updating category")}},openDeleteModal(e){this.deleteId=e,this.showDeleteModal=!0},closeDeleteModal(){this.showDeleteModal=!1,this.deleteId=null},async confirmDelete(){try{await f.A.delete(`http://localhost:5000/api/categories/${this.deleteId}`),this.categories=this.categories.filter(e=>e._id!==this.deleteId),this.closeDeleteModal()}catch(e){alert(e.response?.data?.error||"Error deleting category")}},formatDate(e){return new Date(e).toLocaleString()}},mounted(){this.fetchCategories()}},v=a(1241);const L=(0,v.A)(k,[["render",g],["__scopeId","data-v-7413a900"]]);var b=L}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,r){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],r=e[c][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every(function(e){return a.O[e](o[l])})?o.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,s){if(1&s&&(o=this(o)),8&s)return o;if("object"===typeof o&&o){if(4&s&&o.__esModule)return o;if(16&s&&"function"===typeof o.then)return o}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var n=2&s&&o;("object"==typeof n||"function"==typeof n)&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach(function(e){i[e]=function(){return o[e]}});return i["default"]=function(){return o},a.d(r,i),r}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce(function(t,o){return a.f[o](e,t),t},[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{125:"16c4ca5f",213:"9ce1b2b0",234:"eea110ec",353:"590165e5",775:"4e4234b5",974:"f8186166",993:"0ab9bff5"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{213:"f2cc43b6",974:"5957f0b2",993:"3518c1e3"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";a.l=function(o,s,r,i){if(e[o])e[o].push(s);else{var n,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+r){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+r),n.src=o),e[o]=[s];var p=function(t,a){n.onerror=n.onload=null,clearTimeout(h);var s=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach(function(e){return e(a)}),t)return t(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,s,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",a.nc&&(i.nonce=a.nc);var n=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var o=a&&a.type,n=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+n+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=n,i.parentNode&&i.parentNode.removeChild(i),r(l)}};return i.onerror=i.onload=n,i.href=t,o?o.parentNode.insertBefore(i,o.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=a[o],r=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){s=i[o],r=s.getAttribute("data-href");if(r===e||r===t)return s}},o=function(o){return new Promise(function(s,r){var i=a.miniCssF(o),n=a.p+i;if(t(i,n))return s();e(o,n,null,s,r)})},s={524:0};a.f.miniCss=function(e,t){var a={213:1,974:1,993:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=o(e).then(function(){s[e]=0},function(t){throw delete s[e],t}))}}}(),function(){var e={524:0};a.f.j=function(t,o){var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var r=new Promise(function(a,o){s=e[t]=[a,o]});o.push(s[2]=r);var i=a.p+a.u(t),n=new Error,l=function(o){if(a.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",n.name="ChunkLoadError",n.type=r,n.request=i,s[1](n)}};a.l(i,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,r,i=o[0],n=o[1],l=o[2],d=0;if(i.some(function(t){return 0!==e[t]})){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(l)var c=l(a)}for(t&&t(o);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],function(){return a(1663)});o=a.O(o)})();
//# sourceMappingURL=app.12b62dfc.js.map