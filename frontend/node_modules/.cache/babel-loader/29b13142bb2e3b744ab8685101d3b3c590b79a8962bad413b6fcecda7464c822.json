{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-dashboard\"\n};\nconst _hoisted_2 = {\n  class: \"sidebar\"\n};\nconst _hoisted_3 = {\n  class: \"content\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"profile-tab\"\n};\nconst _hoisted_5 = {\n  class: \"profile-card\"\n};\nconst _hoisted_6 = {\n  class: \"photo-section\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  key: 0,\n  class: \"message\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"items-tab\"\n};\nconst _hoisted_10 = {\n  key: 2,\n  class: \"leaves-tab\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Sidebar \"), _createElementVNode(\"aside\", _hoisted_2, [_cache[12] || (_cache[12] = _createElementVNode(\"h2\", {\n    class: \"sidebar-title\"\n  }, \"Staff Panel\", -1 /* CACHED */)), _createElementVNode(\"ul\", null, [_createElementVNode(\"li\", {\n    class: _normalizeClass({\n      active: $data.currentTab === 'profile'\n    }),\n    onClick: _cache[0] || (_cache[0] = $event => $data.currentTab = 'profile')\n  }, \" Profile \", 2 /* CLASS */), _createElementVNode(\"li\", {\n    class: _normalizeClass({\n      active: $data.currentTab === 'items'\n    }),\n    onClick: _cache[1] || (_cache[1] = $event => $data.currentTab = 'items')\n  }, \" Manage Items \", 2 /* CLASS */), _createElementVNode(\"li\", {\n    class: _normalizeClass({\n      active: $data.currentTab === 'leaves'\n    }),\n    onClick: _cache[2] || (_cache[2] = $event => $data.currentTab = 'leaves')\n  }, \" Leaves \", 2 /* CLASS */), _createElementVNode(\"li\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.logout && $options.logout(...args))\n  }, \"Logout\")])]), _createCommentVNode(\" Main Content \"), _createElementVNode(\"main\", _hoisted_3, [_createCommentVNode(\" Profile Tab \"), $data.currentTab === 'profile' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[21] || (_cache[21] = _createElementVNode(\"h2\", null, \"My Profile\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Profile Photo \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n    src: $data.staff.profilePhoto ? $data.apiBase + $data.staff.profilePhoto : $data.defaultPhoto,\n    alt: \"Profile Photo\",\n    class: \"profile-photo\"\n  }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.onFileChange && $options.onFileChange(...args))\n  }, null, 32 /* NEED_HYDRATION */)]), _createCommentVNode(\" Profile Info Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[11] || (_cache[11] = _withModifiers((...args) => $options.updateProfile && $options.updateProfile(...args), [\"prevent\"])),\n    class: \"profile-form\"\n  }, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", null, \"Name\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.staff.name = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.staff.name]]), _cache[15] || (_cache[15] = _createElementVNode(\"label\", null, \"Email (cannot be changed)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.staff.email = $event),\n    disabled: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.staff.email]]), _cache[16] || (_cache[16] = _createElementVNode(\"label\", null, \"Phone\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.staff.phone = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.staff.phone]]), _cache[17] || (_cache[17] = _createElementVNode(\"label\", null, \"Gender\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.staff.gender = $event)\n  }, _cache[13] || (_cache[13] = [_createElementVNode(\"option\", {\n    value: \"male\"\n  }, \"Male\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"female\"\n  }, \"Female\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"other\"\n  }, \"Other\", -1 /* CACHED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.staff.gender]]), _cache[18] || (_cache[18] = _createElementVNode(\"label\", null, \"Address\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.staff.address = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.staff.address]]), _cache[19] || (_cache[19] = _createElementVNode(\"label\", null, \"Pincode\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $data.staff.pincode = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.staff.pincode]]), _cache[20] || (_cache[20] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Update Profile\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)]), $data.message ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($data.message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Manage Items Tab \"), $data.currentTab === 'items' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _cache[22] || (_cache[22] = [_createElementVNode(\"h2\", null, \"Manage Items\", -1 /* CACHED */), _createElementVNode(\"p\", null, \"ðŸ‘‰ Here you can add, update, or delete items.\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Leaves Tab \"), $data.currentTab === 'leaves' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[23] || (_cache[23] = [_createElementVNode(\"h2\", null, \"Leaves\", -1 /* CACHED */), _createElementVNode(\"p\", null, \"ðŸ‘‰ Here you can apply for leaves and check leave history.\", -1 /* CACHED */)]))) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_normalizeClass","active","$data","currentTab","onClick","_cache","$event","args","$options","logout","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","src","staff","profilePhoto","apiBase","defaultPhoto","alt","type","onChange","onFileChange","onSubmit","_withModifiers","updateProfile","name","required","email","disabled","phone","gender","value","address","pincode","message","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffPage.vue"],"sourcesContent":["<template>\n  <div class=\"staff-dashboard\">\n    <!-- Sidebar -->\n    <aside class=\"sidebar\">\n      <h2 class=\"sidebar-title\">Staff Panel</h2>\n      <ul>\n        <li\n          :class=\"{ active: currentTab === 'profile' }\"\n          @click=\"currentTab = 'profile'\"\n        >\n          Profile\n        </li>\n        <li\n          :class=\"{ active: currentTab === 'items' }\"\n          @click=\"currentTab = 'items'\"\n        >\n          Manage Items\n        </li>\n        <li\n          :class=\"{ active: currentTab === 'leaves' }\"\n          @click=\"currentTab = 'leaves'\"\n        >\n          Leaves\n        </li>\n        <li @click=\"logout\">Logout</li>\n      </ul>\n    </aside>\n\n    <!-- Main Content -->\n    <main class=\"content\">\n    \n      <!-- Profile Tab -->\n      <div v-if=\"currentTab === 'profile'\" class=\"profile-tab\">\n        <h2>My Profile</h2>\n\n        <div class=\"profile-card\">\n          <!-- Profile Photo -->\n          <div class=\"photo-section\">\n            <img\n              :src=\"\n                staff.profilePhoto ? apiBase + staff.profilePhoto : defaultPhoto\n              \"\n              alt=\"Profile Photo\"\n              class=\"profile-photo\"\n            />\n            <input type=\"file\" @change=\"onFileChange\" />\n          </div>\n\n          <!-- Profile Info Form -->\n          <form @submit.prevent=\"updateProfile\" class=\"profile-form\">\n            <label>Name</label>\n            <input v-model=\"staff.name\" required />\n\n            <label>Email (cannot be changed)</label>\n            <input v-model=\"staff.email\" disabled />\n\n            <label>Phone</label>\n            <input v-model=\"staff.phone\" required />\n\n            <label>Gender</label>\n            <select v-model=\"staff.gender\">\n              <option value=\"male\">Male</option>\n              <option value=\"female\">Female</option>\n              <option value=\"other\">Other</option>\n            </select>\n\n            <label>Address</label>\n            <input v-model=\"staff.address\" required />\n\n            <label>Pincode</label>\n            <input v-model=\"staff.pincode\" required />\n\n            <button type=\"submit\">Update Profile</button>\n          </form>\n        </div>\n\n        <p v-if=\"message\" class=\"message\">{{ message }}</p>\n      </div>\n\n      <!-- Manage Items Tab -->\n      <div v-if=\"currentTab === 'items'\" class=\"items-tab\">\n        <h2>Manage Items</h2>\n        <p>ðŸ‘‰ Here you can add, update, or delete items.</p>\n      </div>\n\n      <!-- Leaves Tab -->\n      <div v-if=\"currentTab === 'leaves'\" class=\"leaves-tab\">\n        <h2>Leaves</h2>\n        <p>ðŸ‘‰ Here you can apply for leaves and check leave history.</p>\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      currentTab: \"profile\", // default tab\n      staff: {\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        gender: \"\",\n        address: \"\",\n        pincode: \"\",\n        profilePhoto: \"\",\n      },\n      selectedFile: null,\n      message: \"\",\n      apiBase: \"http://localhost:5000\",\n      defaultPhoto: \"/default-avatar.png\",\n    };\n  },\n  methods: {\n    async fetchProfile() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(\"http://localhost:5000/api/staff/me\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.staff = res.data.staff;\n      } catch (err) {\n        this.message = \"Error loading profile\";\n      }\n    },\n    onFileChange(e) {\n      this.selectedFile = e.target.files[0];\n    },\n    async updateProfile() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const formData = new FormData();\n\n        Object.keys(this.staff).forEach((key) => {\n          if (key !== \"email\") {\n            formData.append(key, this.staff[key]);\n          }\n        });\n\n        if (this.selectedFile) {\n          formData.append(\"profilePhoto\", this.selectedFile);\n        }\n\n        const res = await axios.put(\n          \"http://localhost:5000/api/staff/update\",\n          formData,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              \"Content-Type\": \"multipart/form-data\",\n            },\n          }\n        );\n\n        this.message = res.data.message;\n        this.fetchProfile();\n      } catch (err) {\n        this.message = err.response?.data?.message || \"Error updating profile\";\n      }\n    },\n    logout() {\n      localStorage.removeItem(\"token\");\n      this.$router.push(\"/login\"); // redirect to login\n    },\n  },\n  mounted() {\n    this.fetchProfile();\n  },\n};\n</script>\n\n<style scoped>\n.staff-dashboard {\n  display: flex;\n  min-height: 100vh;\n}\n\n/* Sidebar */\n.sidebar {\n  width: 220px;\n  background: #2c3e50;\n  color: white;\n  padding: 20px;\n}\n.sidebar-title {\n  font-size: 18px;\n  margin-bottom: 20px;\n}\n.sidebar ul {\n  list-style: none;\n  padding: 0;\n}\n.sidebar li {\n  padding: 12px 10px;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: background 0.3s;\n}\n.sidebar li:hover,\n.sidebar li.active {\n  background: #34495e;\n}\n\n/* Content Area */\n.content {\n  flex: 1;\n  padding: 20px;\n  background: #f4f6f9;\n}\n\n/* Profile Card */\n.profile-card {\n  display: flex;\n  gap: 20px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);\n}\n.photo-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.profile-photo {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-bottom: 10px;\n}\n.profile-form {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 15px;\n}\n.profile-form label {\n  grid-column: span 2;\n  font-weight: bold;\n}\n.profile-form input,\n.profile-form select {\n  grid-column: span 2;\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n}\nbutton {\n  grid-column: span 2;\n  padding: 10px;\n  background: #007bff;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n}\nbutton:hover {\n  background: #0056b3;\n}\n.message {\n  margin-top: 15px;\n  color: green;\n  font-weight: bold;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}