{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"category-management\"\n};\nconst _hoisted_2 = {\n  class: \"header-row\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"add-form\"\n};\nconst _hoisted_4 = {\n  class: \"category-table\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h2\", null, \"Category Templates\", -1 /* CACHED */)), _createCommentVNode(\" Search + Add \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.search = $event),\n    type: \"text\",\n    placeholder: \"Search Category Templates\",\n    class: \"search-box\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.search]]), _createElementVNode(\"a\", {\n    href: \"#\",\n    class: \"add-btn\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers($event => $data.showAddForm = !$data.showAddForm, [\"prevent\"]))\n  }, \" + Add New Category \")]), _createCommentVNode(\" Add Form \"), $data.showAddForm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.addCategory && $options.addCategory(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.name = $event),\n    type: \"text\",\n    placeholder: \"Enter category name\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]]), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.onFileChange && $options.onFileChange(...args))\n  }, null, 32 /* NEED_HYDRATION */), _cache[5] || (_cache[5] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Save\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Table \"), _createElementVNode(\"table\", _hoisted_4, [_cache[9] || (_cache[9] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Category Name\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Default\"), _createElementVNode(\"th\", null, \"SEO Title\"), _createElementVNode(\"th\", null, \"Last Updated\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredCategories, cat => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: cat._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(cat.name), 1 /* TEXT */), _cache[6] || (_cache[6] = _createElementVNode(\"td\", {\n      class: \"status\"\n    }, \"Published\", -1 /* CACHED */)), _cache[7] || (_cache[7] = _createElementVNode(\"td\", null, \"-\", -1 /* CACHED */)), _cache[8] || (_cache[8] = _createElementVNode(\"td\", null, \"N/A\", -1 /* CACHED */)), _createElementVNode(\"td\", null, _toDisplayString($options.formatDate(cat.updatedAt)), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.editCategory(cat)\n    }, \"Edit\", 8 /* PROPS */, _hoisted_5), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteCategory(cat._id)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","$data","search","$event","type","placeholder","href","onClick","_cache","_withModifiers","showAddForm","_hoisted_3","onSubmit","args","$options","addCategory","name","required","onChange","onFileChange","_hoisted_4","_Fragment","_renderList","filteredCategories","cat","key","_id","_toDisplayString","formatDate","updatedAt","editCategory","_hoisted_5","deleteCategory","_hoisted_6"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\AddCategory.vue"],"sourcesContent":["<template>\n  <div class=\"category-management\">\n    <h2>Category Templates</h2>\n\n    <!-- Search + Add -->\n    <div class=\"header-row\">\n      <input\n        v-model=\"search\"\n        type=\"text\"\n        placeholder=\"Search Category Templates\"\n        class=\"search-box\"\n      />\n      <a href=\"#\" class=\"add-btn\" @click.prevent=\"showAddForm = !showAddForm\">\n        + Add New Category\n      </a>\n    </div>\n\n    <!-- Add Form -->\n    <div v-if=\"showAddForm\" class=\"add-form\">\n      <form @submit.prevent=\"addCategory\">\n        <input\n          v-model=\"name\"\n          type=\"text\"\n          placeholder=\"Enter category name\"\n          required\n        />\n        <input type=\"file\" @change=\"onFileChange\" />\n        <button type=\"submit\">Save</button>\n      </form>\n    </div>\n\n    <!-- Table -->\n    <table class=\"category-table\">\n      <thead>\n        <tr>\n          <th>Category Name</th>\n          <th>Status</th>\n          <th>Default</th>\n          <th>SEO Title</th>\n          <th>Last Updated</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"cat in filteredCategories\"\n          :key=\"cat._id\"\n        >\n          <td>{{ cat.name }}</td>\n          <td class=\"status\">Published</td>\n          <td>-</td>\n          <td>N/A</td>\n          <td>{{ formatDate(cat.updatedAt) }}</td>\n          <td>\n            <button @click=\"editCategory(cat)\">Edit</button>\n            <button @click=\"deleteCategory(cat._id)\">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      image: null,\n      categories: [],\n      search: \"\",\n      showAddForm: false,\n    };\n  },\n  computed: {\n    filteredCategories() {\n      return this.categories.filter((c) =>\n        c.name.toLowerCase().includes(this.search.toLowerCase())\n      );\n    },\n  },\n  methods: {\n    onFileChange(e) {\n      this.image = e.target.files[0];\n    },\n    async addCategory() {\n      try {\n        const formData = new FormData();\n        formData.append(\"name\", this.name);\n        if (this.image) formData.append(\"image\", this.image);\n\n        const response = await axios.post(\n          \"http://localhost:5000/api/categories\",\n          formData,\n          { headers: { \"Content-Type\": \"multipart/form-data\" } }\n        );\n\n        this.categories.push(response.data);\n        this.name = \"\";\n        this.image = null;\n        this.showAddForm = false;\n      } catch (err) {\n        alert(err.response?.data?.error || \"Error adding category\");\n      }\n    },\n    async fetchCategories() {\n      const res = await axios.get(\"http://localhost:5000/api/categories\");\n      this.categories = res.data;\n    },\n    async deleteCategory(id) {\n      if (confirm(\"Delete this category?\")) {\n        await axios.delete(`http://localhost:5000/api/categories/${id}`);\n        this.categories = this.categories.filter((c) => c._id !== id);\n      }\n    },\n    editCategory(cat) {\n      alert(\"Open edit modal for \" + cat.name);\n    },\n    formatDate(dateStr) {\n      return new Date(dateStr).toLocaleString();\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n};\n</script>\n\n<style>\n.category-management {\n  max-width: 900px;\n  margin: auto;\n  font-family: Arial, sans-serif;\n}\n.header-row {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.search-box {\n  padding: 5px;\n  width: 250px;\n}\n.add-btn {\n  color: #0073e6;\n  cursor: pointer;\n  text-decoration: none;\n}\n.add-form {\n  margin-bottom: 15px;\n}\n.category-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n.category-table th,\n.category-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n}\n.category-table th {\n  background: #f4f4f4;\n  text-align: left;\n}\n.status {\n  color: green;\n  font-weight: bold;\n}\nbutton {\n  margin-right: 5px;\n  padding: 4px 8px;\n  cursor: pointer;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAqB;;EAIzBA,KAAK,EAAC;AAAY;;;EAaCA,KAAK,EAAC;;;EAcvBA,KAAK,EAAC;AAAgB;;;;uBA/B/BC,mBAAA,CA2DM,OA3DNC,UA2DM,G,4BA1DJC,mBAAA,CAA2B,YAAvB,oBAAkB,qBAEtBC,mBAAA,kBAAqB,EACrBD,mBAAA,CAUM,OAVNE,UAUM,G,gBATJF,mBAAA,CAKE;+DAJSG,KAAA,CAAAC,MAAM,GAAAC,MAAA;IACfC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,2BAA2B;IACvCV,KAAK,EAAC;iDAHGM,KAAA,CAAAC,MAAM,E,GAKjBJ,mBAAA,CAEI;IAFDQ,IAAI,EAAC,GAAG;IAACX,KAAK,EAAC,SAAS;IAAEY,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,CAAAN,MAAA,IAAUF,KAAA,CAAAS,WAAW,IAAIT,KAAA,CAAAS,WAAW;KAAE,sBAExE,E,GAGFX,mBAAA,cAAiB,EACNE,KAAA,CAAAS,WAAW,I,cAAtBd,mBAAA,CAWM,OAXNe,UAWM,GAVJb,mBAAA,CASO;IATAc,QAAM,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAI,IAAA,KAAUC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;sBAChCf,mBAAA,CAKE;+DAJSG,KAAA,CAAAe,IAAI,GAAAb,MAAA;IACbC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,qBAAqB;IACjCY,QAAQ,EAAR;iDAHShB,KAAA,CAAAe,IAAI,E,GAKflB,mBAAA,CAA4C;IAArCM,IAAI,EAAC,MAAM;IAAEc,QAAM,EAAAV,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAEC,QAAA,CAAAK,YAAA,IAAAL,QAAA,CAAAK,YAAA,IAAAN,IAAA,CAAY;+DACxCf,mBAAA,CAAmC;IAA3BM,IAAI,EAAC;EAAQ,GAAC,MAAI,oB,mEAI9BL,mBAAA,WAAc,EACdD,mBAAA,CA2BQ,SA3BRsB,UA2BQ,G,0BA1BNtB,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAgB,YAAZ,SAAO,GACXA,mBAAA,CAAkB,YAAd,WAAS,GACbA,mBAAA,CAAqB,YAAjB,cAAY,GAChBA,mBAAA,CAAgB,YAAZ,SAAO,E,uBAGfA,mBAAA,CAeQ,iB,kBAdNF,mBAAA,CAaKyB,SAAA,QAAAC,WAAA,CAZWR,QAAA,CAAAS,kBAAkB,EAAzBC,GAAG;yBADZ5B,mBAAA,CAaK;MAXF6B,GAAG,EAAED,GAAG,CAACE;QAEV5B,mBAAA,CAAuB,YAAA6B,gBAAA,CAAhBH,GAAG,CAACR,IAAI,kB,0BACflB,mBAAA,CAAiC;MAA7BH,KAAK,EAAC;IAAQ,GAAC,WAAS,qB,0BAC5BG,mBAAA,CAAU,YAAN,GAAC,qB,0BACLA,mBAAA,CAAY,YAAR,KAAG,qBACPA,mBAAA,CAAwC,YAAA6B,gBAAA,CAAjCb,QAAA,CAAAc,UAAU,CAACJ,GAAG,CAACK,SAAS,mBAC/B/B,mBAAA,CAGK,aAFHA,mBAAA,CAAgD;MAAvCS,OAAK,EAAAJ,MAAA,IAAEW,QAAA,CAAAgB,YAAY,CAACN,GAAG;OAAG,MAAI,iBAAAO,UAAA,GACvCjC,mBAAA,CAAwD;MAA/CS,OAAK,EAAAJ,MAAA,IAAEW,QAAA,CAAAkB,cAAc,CAACR,GAAG,CAACE,GAAG;OAAG,QAAM,iBAAAO,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}