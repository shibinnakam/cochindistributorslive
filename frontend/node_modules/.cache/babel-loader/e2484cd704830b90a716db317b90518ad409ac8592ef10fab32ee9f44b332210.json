{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-management\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"toast\"\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = [\"onUpdate:modelValue\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Staff Management\", -1 /* CACHED */)), _createCommentVNode(\" Invite Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.inviteStaff && $options.inviteStaff(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    type: \"email\",\n    placeholder: \"Enter staff email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Invite\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Success Toast \"), $data.toastMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($data.toastMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Staff List \"), _cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Staff List\", -1 /* CACHED */)), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Phone\"), _createElementVNode(\"th\", null, \"Date of Joining\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.staff, s => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: s._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(s.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.name || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.phone || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.dateOfJoining ? new Date(s.dateOfJoining).toLocaleDateString() : \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.status), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createCommentVNode(\" Approve with custom joining date \"), s.status === 'pending' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"date\",\n      \"onUpdate:modelValue\": $event => s.joiningDate = $event\n    }, null, 8 /* PROPS */, _hoisted_4), [[_vModelText, s.joiningDate]]), _createElementVNode(\"button\", {\n      onClick: $event => $options.approveStaff(s._id, s.joiningDate)\n    }, \" Approve \", 8 /* PROPS */, _hoisted_5)])) : _createCommentVNode(\"v-if\", true), s.status === 'active' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.setStatus(s._id, 'deactivated')\n    }, \" Deactivate \", 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true), s.status === 'deactivated' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.setStatus(s._id, 'active')\n    }, \" Activate \", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" PDF Button \"), _createElementVNode(\"button\", {\n      onClick: $event => $options.exportStaffPDF(s)\n    }, \"Download PDF\", 8 /* PROPS */, _hoisted_8)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Export All \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.exportAllStaffPDF && $options.exportAllStaffPDF(...args))\n  }, \"Download All Staff Report\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$options","inviteStaff","$data","email","$event","type","placeholder","required","toastMessage","_hoisted_2","_toDisplayString","_Fragment","_renderList","staff","s","key","_id","name","phone","dateOfJoining","Date","toLocaleDateString","status","_hoisted_3","joiningDate","onClick","approveStaff","_hoisted_5","setStatus","_hoisted_6","_hoisted_7","exportStaffPDF","_hoisted_8","exportAllStaffPDF"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Success Toast -->\n    <div v-if=\"toastMessage\" class=\"toast\">{{ toastMessage }}</div>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <!-- Approve with custom joining date -->\n            <div v-if=\"s.status === 'pending'\">\n              <input type=\"date\" v-model=\"s.joiningDate\" />\n              <button @click=\"approveStaff(s._id, s.joiningDate)\">\n                Approve\n              </button>\n            </div>\n\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\", // ✅ Success toast\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      this.showToast(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id, joiningDate) {\n      try {\n        const res = await axios.put(\n          `http://localhost:5000/api/staff/approve/${id}`,\n          { joiningDate }\n        );\n        this.fetchStaff();\n        if (res.data.success) {\n          this.showToast(res.data.message);\n        }\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error approving staff\",\n          true\n        );\n      }\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n\n    // ✅ Toast helper\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      const toastEl = document.querySelector(\".toast\");\n      if (toastEl) {\n        toastEl.style.background = isError ? \"#f56565\" : \"#48bb78\"; // red for error, green for success\n      }\n      setTimeout(() => (this.toastMessage = \"\"), 3000);\n    },\n\n    // PDF export methods unchanged\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;;EAeFA,KAAK,EAAC;;;;;;;;;;;uBAfjCC,mBAAA,CA0EM,OA1ENC,UA0EM,G,0BAzEJC,mBAAA,CAAyB,YAArB,kBAAgB,qBAEpBC,mBAAA,iBAAoB,EACpBD,mBAAA,CAQO;IARAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;sBAChCL,mBAAA,CAKE;+DAJSQ,KAAA,CAAAC,KAAK,GAAAC,MAAA;IACdC,IAAI,EAAC,OAAO;IACZC,WAAW,EAAC,mBAAmB;IAC/BC,QAAQ,EAAR;iDAHSL,KAAA,CAAAC,KAAK,E,6BAKhBT,mBAAA,CAAqC;IAA7BW,IAAI,EAAC;EAAQ,GAAC,QAAM,oB,4BAG9BV,mBAAA,mBAAsB,EACXO,KAAA,CAAAM,YAAY,I,cAAvBhB,mBAAA,CAA+D,OAA/DiB,UAA+D,EAAAC,gBAAA,CAArBR,KAAA,CAAAM,YAAY,oB,mCAEtDb,mBAAA,gBAAmB,E,0BACnBD,mBAAA,CAAmB,YAAf,YAAU,qBACdA,mBAAA,CAmDQ,gB,0BAlDNA,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAwB,YAApB,iBAAe,GACnBA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAe,YAAX,QAAM,E,uBAGdA,mBAAA,CAuCQ,iB,kBAtCNF,mBAAA,CAqCKmB,SAAA,QAAAC,WAAA,CArCWV,KAAA,CAAAW,KAAK,EAAVC,CAAC;yBAAZtB,mBAAA,CAqCK;MArCmBuB,GAAG,EAAED,CAAC,CAACE;QAC7BtB,mBAAA,CAAsB,YAAAgB,gBAAA,CAAfI,CAAC,CAACX,KAAK,kBACdT,mBAAA,CAA4B,YAAAgB,gBAAA,CAArBI,CAAC,CAACG,IAAI,yBACbvB,mBAAA,CAA6B,YAAAgB,gBAAA,CAAtBI,CAAC,CAACI,KAAK,yBACdxB,mBAAA,CAMK,YAAAgB,gBAAA,CAJDI,CAAC,CAACK,aAAa,G,IAAuBC,IAAI,CAACN,CAAC,CAACK,aAAa,EAAEE,kBAAkB,K,qBAKlF3B,mBAAA,CAAuB,YAAAgB,gBAAA,CAAhBI,CAAC,CAACQ,MAAM,kBACf5B,mBAAA,CAwBK,aAvBHC,mBAAA,sCAAyC,EAC9BmB,CAAC,CAACQ,MAAM,kB,cAAnB9B,mBAAA,CAKM,OAAA+B,UAAA,G,gBAJJ7B,mBAAA,CAA6C;MAAtCW,IAAI,EAAC,MAAM;uCAAUS,CAAC,CAACU,WAAW,GAAApB;wDAAbU,CAAC,CAACU,WAAW,E,GACzC9B,mBAAA,CAES;MAFA+B,OAAK,EAAArB,MAAA,IAAEJ,QAAA,CAAA0B,YAAY,CAACZ,CAAC,CAACE,GAAG,EAAEF,CAAC,CAACU,WAAW;OAAG,WAEpD,iBAAAG,UAAA,E,wCAIMb,CAAC,CAACQ,MAAM,iB,cADhB9B,mBAAA,CAKS;;MAHNiC,OAAK,EAAArB,MAAA,IAAEJ,QAAA,CAAA4B,SAAS,CAACd,CAAC,CAACE,GAAG;OACxB,cAED,iBAAAa,UAAA,K,mCAEQf,CAAC,CAACQ,MAAM,sB,cADhB9B,mBAAA,CAKS;;MAHNiC,OAAK,EAAArB,MAAA,IAAEJ,QAAA,CAAA4B,SAAS,CAACd,CAAC,CAACE,GAAG;OACxB,YAED,iBAAAc,UAAA,K,mCAEAnC,mBAAA,gBAAmB,EACnBD,mBAAA,CAAwD;MAA/C+B,OAAK,EAAArB,MAAA,IAAEJ,QAAA,CAAA+B,cAAc,CAACjB,CAAC;OAAG,cAAY,iBAAAkB,UAAA,E;sCAMvDrC,mBAAA,gBAAmB,EACnBD,mBAAA,CAAqE;IAA5D+B,OAAK,EAAA5B,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAiC,iBAAA,IAAAjC,QAAA,CAAAiC,iBAAA,IAAAlC,IAAA,CAAiB;KAAE,2BAAyB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}