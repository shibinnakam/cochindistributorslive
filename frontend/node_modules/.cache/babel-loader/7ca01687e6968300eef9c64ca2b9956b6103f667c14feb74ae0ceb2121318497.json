{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"leave-table\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", null, \"Leave Requests\", -1 /* CACHED */)), _createElementVNode(\"table\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Reason\"), _createElementVNode(\"th\", null, \"Requested Date\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Approved Date\"), _createElementVNode(\"th\", null, \"Rejected Date\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.leaves, leave => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: leave._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(leave.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.reason), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(new Date(leave.date).toLocaleDateString()), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.status), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.approvedDate ? new Date(leave.approvedDate).toLocaleString() : \"-\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.rejectedDate ? new Date(leave.rejectedDate).toLocaleString() : \"-\"), 1 /* TEXT */), _createElementVNode(\"td\", null, [leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.updateStatus(leave._id, 'Approved')\n    }, \" Approve \", 8 /* PROPS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true), leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.updateStatus(leave._id, 'Rejected')\n    }, \" Reject \", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteLeave(leave._id),\n      class: \"delete-btn\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_4)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_Fragment","_renderList","$data","leaves","leave","key","_id","_toDisplayString","email","reason","Date","date","toLocaleDateString","status","approvedDate","toLocaleString","rejectedDate","onClick","$event","$options","updateStatus","_hoisted_2","_hoisted_3","deleteLeave","_hoisted_4"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Leave Requests</h2>\r\n\r\n    <table class=\"leave-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Email</th>\r\n          <th>Reason</th>\r\n          <th>Requested Date</th>\r\n          <th>Status</th>\r\n          <th>Approved Date</th>\r\n          <th>Rejected Date</th>\r\n          <th>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"leave in leaves\" :key=\"leave._id\">\r\n          <td>{{ leave.email }}</td>\r\n          <td>{{ leave.reason }}</td>\r\n          <td>{{ new Date(leave.date).toLocaleDateString() }}</td>\r\n          <td>{{ leave.status }}</td>\r\n          <td>\r\n            {{\r\n              leave.approvedDate\r\n                ? new Date(leave.approvedDate).toLocaleString()\r\n                : \"-\"\r\n            }}\r\n          </td>\r\n          <td>\r\n            {{\r\n              leave.rejectedDate\r\n                ? new Date(leave.rejectedDate).toLocaleString()\r\n                : \"-\"\r\n            }}\r\n          </td>\r\n          <td>\r\n            <button\r\n              v-if=\"leave.status === 'Pending'\"\r\n              @click=\"updateStatus(leave._id, 'Approved')\"\r\n            >\r\n              Approve\r\n            </button>\r\n            <button\r\n              v-if=\"leave.status === 'Pending'\"\r\n              @click=\"updateStatus(leave._id, 'Rejected')\"\r\n            >\r\n              Reject\r\n            </button>\r\n            <button @click=\"deleteLeave(leave._id)\" class=\"delete-btn\">\r\n              Delete\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      leaves: [],\r\n    };\r\n  },\r\n  async created() {\r\n    await this.fetchLeaves();\r\n  },\r\n  methods: {\r\n    async fetchLeaves() {\r\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\r\n      this.leaves = await res.json();\r\n    },\r\n    async updateStatus(id, status) {\r\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ status }),\r\n      });\r\n      const updatedLeave = await res.json();\r\n      this.leaves = this.leaves.map((l) => (l._id === id ? updatedLeave : l));\r\n    },\r\n    async deleteLeave(id) {\r\n      if (!confirm(\"Are you sure you want to delete this leave?\")) return;\r\n\r\n      await fetch(`http://localhost:5000/api/leaves/delete/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n      this.leaves = this.leaves.filter((l) => l._id !== id);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.leave-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\n.leave-table th,\r\n.leave-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  text-align: center;\r\n}\r\n\r\n.leave-table th {\r\n  background-color: #f2f2f2;\r\n  font-weight: bold;\r\n}\r\n\r\nbutton {\r\n  margin: 2px;\r\n  padding: 5px 10px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:first-of-type {\r\n  background-color: #4caf50;\r\n  color: white;\r\n}\r\n\r\nbutton:nth-of-type(2) {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n.delete-btn {\r\n  background-color: #555;\r\n  color: white;\r\n}\r\n</style>\r\n"],"mappings":";;EAIWA,KAAK,EAAC;AAAa;;;;;uBAH5BC,mBAAA,CAuDM,c,0BAtDJC,mBAAA,CAAuB,YAAnB,gBAAc,qBAElBA,mBAAA,CAmDQ,SAnDRC,UAmDQ,G,0BAlDND,mBAAA,CAUQ,gBATNA,mBAAA,CAQK,aAPHA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAuB,YAAnB,gBAAc,GAClBA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAgB,YAAZ,SAAO,E,uBAGfA,mBAAA,CAsCQ,iB,kBArCND,mBAAA,CAoCKG,SAAA,QAAAC,WAAA,CApCeC,KAAA,CAAAC,MAAM,EAAfC,KAAK;yBAAhBP,mBAAA,CAoCK;MApCwBQ,GAAG,EAAED,KAAK,CAACE;QACtCR,mBAAA,CAA0B,YAAAS,gBAAA,CAAnBH,KAAK,CAACI,KAAK,kBAClBV,mBAAA,CAA2B,YAAAS,gBAAA,CAApBH,KAAK,CAACK,MAAM,kBACnBX,mBAAA,CAAwD,YAAAS,gBAAA,KAA7CG,IAAI,CAACN,KAAK,CAACO,IAAI,EAAEC,kBAAkB,oBAC9Cd,mBAAA,CAA2B,YAAAS,gBAAA,CAApBH,KAAK,CAACS,MAAM,kBACnBf,mBAAA,CAMK,YAAAS,gBAAA,CAJDH,KAAK,CAACU,YAAY,G,IAAwBJ,IAAI,CAACN,KAAK,CAACU,YAAY,EAAEC,cAAc,K,qBAKrFjB,mBAAA,CAMK,YAAAS,gBAAA,CAJDH,KAAK,CAACY,YAAY,G,IAAwBN,IAAI,CAACN,KAAK,CAACY,YAAY,EAAED,cAAc,K,qBAKrFjB,mBAAA,CAgBK,aAdKM,KAAK,CAACS,MAAM,kB,cADpBhB,mBAAA,CAKS;;MAHNoB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAAChB,KAAK,CAACE,GAAG;OAC/B,WAED,iBAAAe,UAAA,K,mCAEQjB,KAAK,CAACS,MAAM,kB,cADpBhB,mBAAA,CAKS;;MAHNoB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAAChB,KAAK,CAACE,GAAG;OAC/B,UAED,iBAAAgB,UAAA,K,mCACAxB,mBAAA,CAES;MAFAmB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAI,WAAW,CAACnB,KAAK,CAACE,GAAG;MAAGV,KAAK,EAAC;OAAa,UAE3D,iBAAA4B,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}