{"ast":null,"code":"import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: []\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status\n      });\n      this.fetchStaff();\n    },\n    // 沒 Export individual staff details to PDF\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n\n      // Title\n      doc.setFontSize(18);\n      doc.text(\"Staff Details\", 14, 20);\n\n      // Staff Details Table\n      doc.autoTable({\n        startY: 30,\n        head: [[\"Field\", \"Value\"]],\n        body: [[\"Name\", staff.name || \"窶能"], [\"Email\", staff.email], [\"Phone\", staff.phone || \"窶能"], [\"Date of Joining\", staff.dateOfJoining ? new Date(staff.dateOfJoining).toLocaleDateString() : \"窶能"], [\"Status\", staff.status]]\n      });\n\n      // Save PDF\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","data","email","staff","methods","fetchStaff","res","get","inviteStaff","post","alert","approveStaff","id","put","setStatus","status","exportStaffPDF","doc","setFontSize","text","autoTable","startY","head","body","name","phone","dateOfJoining","Date","toLocaleDateString","save","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"窶能" }}</td>\n          <td>{{ s.phone || \"窶能" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"窶能"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, { status });\n      this.fetchStaff();\n    },\n\n    // 沒 Export individual staff details to PDF\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n\n      // Title\n      doc.setFontSize(18);\n      doc.text(\"Staff Details\", 14, 20);\n\n      // Staff Details Table\n      doc.autoTable({\n        startY: 30,\n        head: [[\"Field\", \"Value\"]],\n        body: [\n          [\"Name\", staff.name || \"窶能"],\n          [\"Email\", staff.email],\n          [\"Phone\", staff.phone || \"窶能"],\n          [\n            \"Date of Joining\",\n            staff.dateOfJoining\n              ? new Date(staff.dateOfJoining).toLocaleDateString()\n              : \"窶能",\n          ],\n          [\"Status\", staff.status],\n        ],\n      });\n\n      // Save PDF\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":"AAoEA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAO,iBAAiB;AAExB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,MAAMC,GAAE,GAAI,MAAMP,KAAK,CAACQ,GAAG,CAAC,iCAAiC,CAAC;MAC9D,IAAI,CAACJ,KAAI,GAAIG,GAAG,CAACL,IAAI,CAACE,KAAK;IAC7B,CAAC;IACD,MAAMK,WAAWA,CAAA,EAAG;MAClB,MAAMT,KAAK,CAACU,IAAI,CAAC,wCAAwC,EAAE;QACzDP,KAAK,EAAE,IAAI,CAACA;MACd,CAAC,CAAC;MACFQ,KAAK,CAAC,kBAAkB,CAAC;MACzB,IAAI,CAACR,KAAI,GAAI,EAAE;MACf,IAAI,CAACG,UAAU,CAAC,CAAC;IACnB,CAAC;IACD,MAAMM,YAAYA,CAACC,EAAE,EAAE;MACrB,MAAMb,KAAK,CAACc,GAAG,CAAC,2CAA2CD,EAAE,EAAE,CAAC;MAChE,IAAI,CAACP,UAAU,CAAC,CAAC;IACnB,CAAC;IACD,MAAMS,SAASA,CAACF,EAAE,EAAEG,MAAM,EAAE;MAC1B,MAAMhB,KAAK,CAACc,GAAG,CAAC,0CAA0CD,EAAE,EAAE,EAAE;QAAEG;MAAO,CAAC,CAAC;MAC3E,IAAI,CAACV,UAAU,CAAC,CAAC;IACnB,CAAC;IAED;IACAW,cAAcA,CAACb,KAAK,EAAE;MACpB,MAAMc,GAAE,GAAI,IAAIjB,KAAK,CAAC,CAAC;;MAEvB;MACAiB,GAAG,CAACC,WAAW,CAAC,EAAE,CAAC;MACnBD,GAAG,CAACE,IAAI,CAAC,eAAe,EAAE,EAAE,EAAE,EAAE,CAAC;;MAEjC;MACAF,GAAG,CAACG,SAAS,CAAC;QACZC,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAC1BC,IAAI,EAAE,CACJ,CAAC,MAAM,EAAEpB,KAAK,CAACqB,IAAG,IAAK,GAAG,CAAC,EAC3B,CAAC,OAAO,EAAErB,KAAK,CAACD,KAAK,CAAC,EACtB,CAAC,OAAO,EAAEC,KAAK,CAACsB,KAAI,IAAK,GAAG,CAAC,EAC7B,CACE,iBAAiB,EACjBtB,KAAK,CAACuB,aAAY,GACd,IAAIC,IAAI,CAACxB,KAAK,CAACuB,aAAa,CAAC,CAACE,kBAAkB,CAAC,IACjD,GAAG,CACR,EACD,CAAC,QAAQ,EAAEzB,KAAK,CAACY,MAAM,CAAC;MAE5B,CAAC,CAAC;;MAEF;MACAE,GAAG,CAACY,IAAI,CAAC,GAAG1B,KAAK,CAACqB,IAAG,IAAK,OAAO,cAAc,CAAC;IAClD;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAACzB,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}