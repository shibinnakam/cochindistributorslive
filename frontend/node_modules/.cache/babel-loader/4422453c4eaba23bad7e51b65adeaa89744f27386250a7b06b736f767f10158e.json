{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-management\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Staff Management\", -1 /* CACHED */)), _createCommentVNode(\" Invite Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.inviteStaff && $options.inviteStaff(...args), [\"prevent\"])),\n    enctype: \"multipart/form-data\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    type: \"email\",\n    placeholder: \"Enter staff email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.name = $event),\n    type: \"text\",\n    placeholder: \"Enter staff name (optional)\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]]), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[2] || (_cache[2] = (...args) => $options.onFileChange && $options.onFileChange(...args))\n  }, null, 32 /* NEED_HYDRATION */), _cache[4] || (_cache[4] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Invite\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */), _cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"Staff List\", -1 /* CACHED */)), _createElementVNode(\"table\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Photo\"), _createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.staff, s => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: s._id\n    }, [_createElementVNode(\"td\", null, [s.photo ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: s.photo,\n      alt: \"Staff Photo\",\n      width: \"50\",\n      height: \"50\"\n    }, null, 8 /* PROPS */, _hoisted_2)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"—\"))]), _createElementVNode(\"td\", null, _toDisplayString(s.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.name || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.status), 1 /* TEXT */), _createElementVNode(\"td\", null, [s.status === 'pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.approveStaff(s._id)\n    }, \" Approve \", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), s.status === 'active' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.setStatus(s._id, 'deactivated')\n    }, \" Deactivate \", 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true), s.status === 'deactivated' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.setStatus(s._id, 'active')\n    }, \" Activate \", 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$options","inviteStaff","enctype","$data","email","$event","type","placeholder","required","name","onChange","onFileChange","_Fragment","_renderList","staff","s","key","_id","photo","src","alt","width","height","_hoisted_3","_toDisplayString","status","onClick","approveStaff","_hoisted_4","setStatus","_hoisted_5","_hoisted_6"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\" enctype=\"multipart/form-data\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <input\n        v-model=\"name\"\n        type=\"text\"\n        placeholder=\"Enter staff name (optional)\"\n      />\n      <input type=\"file\" @change=\"onFileChange\" />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Photo</th>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>\n            <img\n              v-if=\"s.photo\"\n              :src=\"s.photo\"\n              alt=\"Staff Photo\"\n              width=\"50\"\n              height=\"50\"\n            />\n            <span v-else>—</span>\n          </td>\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      name: \"\",\n      photoFile: null,\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    onFileChange(e) {\n      this.photoFile = e.target.files[0];\n    },\n    async inviteStaff() {\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"name\", this.name);\n      if (this.photoFile) {\n        formData.append(\"photo\", this.photoFile);\n      }\n\n      await axios.post(\"http://localhost:5000/api/staff/invite\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.name = \"\";\n      this.photoFile = null;\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;;;;;;;;uBAA7BC,mBAAA,CAkEM,OAlENC,UAkEM,G,0BAjEJC,mBAAA,CAAyB,YAArB,kBAAgB,qBAEpBC,mBAAA,iBAAoB,EACpBD,mBAAA,CAcO;IAdAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAAEG,OAAO,EAAC;sBAC1CR,mBAAA,CAKE;+DAJSS,KAAA,CAAAC,KAAK,GAAAC,MAAA;IACdC,IAAI,EAAC,OAAO;IACZC,WAAW,EAAC,mBAAmB;IAC/BC,QAAQ,EAAR;iDAHSL,KAAA,CAAAC,KAAK,E,mBAKhBV,mBAAA,CAIE;+DAHSS,KAAA,CAAAM,IAAI,GAAAJ,MAAA;IACbC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC;iDAFHJ,KAAA,CAAAM,IAAI,E,GAIff,mBAAA,CAA4C;IAArCY,IAAI,EAAC,MAAM;IAAEI,QAAM,EAAAb,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAW,YAAA,IAAAX,QAAA,CAAAW,YAAA,IAAAZ,IAAA,CAAY;+DACxCL,mBAAA,CAAqC;IAA7BY,IAAI,EAAC;EAAQ,GAAC,QAAM,oB,sDAG9BZ,mBAAA,CAAmB,YAAf,YAAU,qBACdA,mBAAA,CA4CQ,gB,0BA3CNA,mBAAA,CAQQ,gBAPNA,mBAAA,CAMK,aALHA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAe,YAAX,QAAM,E,uBAGdA,mBAAA,CAiCQ,iB,kBAhCNF,mBAAA,CA+BKoB,SAAA,QAAAC,WAAA,CA/BWV,KAAA,CAAAW,KAAK,EAAVC,CAAC;yBAAZvB,mBAAA,CA+BK;MA/BmBwB,GAAG,EAAED,CAAC,CAACE;QAC7BvB,mBAAA,CASK,aAPKqB,CAAC,CAACG,KAAK,I,cADf1B,mBAAA,CAME;;MAJC2B,GAAG,EAAEJ,CAAC,CAACG,KAAK;MACbE,GAAG,EAAC,aAAa;MACjBC,KAAK,EAAC,IAAI;MACVC,MAAM,EAAC;0DAET9B,mBAAA,CAAqB,QAAA+B,UAAA,EAAR,GAAC,G,GAEhB7B,mBAAA,CAAsB,YAAA8B,gBAAA,CAAfT,CAAC,CAACX,KAAK,kBACdV,mBAAA,CAA4B,YAAA8B,gBAAA,CAArBT,CAAC,CAACN,IAAI,yBACbf,mBAAA,CAAuB,YAAA8B,gBAAA,CAAhBT,CAAC,CAACU,MAAM,kBACf/B,mBAAA,CAgBK,aAfWqB,CAAC,CAACU,MAAM,kB,cAAtBjC,mBAAA,CAES;;MAF8BkC,OAAK,EAAArB,MAAA,IAAEL,QAAA,CAAA2B,YAAY,CAACZ,CAAC,CAACE,GAAG;OAAG,WAEnE,iBAAAW,UAAA,K,mCAEQb,CAAC,CAACU,MAAM,iB,cADhBjC,mBAAA,CAKS;;MAHNkC,OAAK,EAAArB,MAAA,IAAEL,QAAA,CAAA6B,SAAS,CAACd,CAAC,CAACE,GAAG;OACxB,cAED,iBAAAa,UAAA,K,mCAEQf,CAAC,CAACU,MAAM,sB,cADhBjC,mBAAA,CAKS;;MAHNkC,OAAK,EAAArB,MAAA,IAAEL,QAAA,CAAA6B,SAAS,CAACd,CAAC,CAACE,GAAG;OACxB,YAED,iBAAAc,UAAA,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}