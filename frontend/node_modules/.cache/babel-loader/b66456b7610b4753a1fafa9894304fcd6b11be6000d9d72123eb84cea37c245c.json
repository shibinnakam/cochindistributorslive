{"ast":null,"code":"import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: []\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status\n      });\n      this.fetchStaff();\n    },\n    // ✅ Delete staff\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to permanently delete this staff?\")) return;\n      await axios.delete(`http://localhost:5000/api/staff/${id}`);\n      this.fetchStaff();\n    },\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(\"staff-report.pdf\");\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","autoTable","data","email","staff","methods","fetchStaff","res","get","inviteStaff","post","alert","approveStaff","id","put","setStatus","status","deleteStaff","confirm","delete","exportStaffPDF","doc","save","name","exportAllStaffPDF","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n\n            <!-- ✅ Delete Button -->\n            <button @click=\"deleteStaff(s._id)\" style=\"background: #f56565; color: white;\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n    // ✅ Delete staff\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to permanently delete this staff?\")) return;\n      await axios.delete(`http://localhost:5000/api/staff/${id}`);\n      this.fetchStaff();\n    },\n\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":"AA4EA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,SAAQ,MAAO,iBAAiB;AAEvC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,MAAMC,GAAE,GAAI,MAAMR,KAAK,CAACS,GAAG,CAAC,iCAAiC,CAAC;MAC9D,IAAI,CAACJ,KAAI,GAAIG,GAAG,CAACL,IAAI,CAACE,KAAK;IAC7B,CAAC;IACD,MAAMK,WAAWA,CAAA,EAAG;MAClB,MAAMV,KAAK,CAACW,IAAI,CAAC,wCAAwC,EAAE;QACzDP,KAAK,EAAE,IAAI,CAACA;MACd,CAAC,CAAC;MACFQ,KAAK,CAAC,kBAAkB,CAAC;MACzB,IAAI,CAACR,KAAI,GAAI,EAAE;MACf,IAAI,CAACG,UAAU,CAAC,CAAC;IACnB,CAAC;IACD,MAAMM,YAAYA,CAACC,EAAE,EAAE;MACrB,MAAMd,KAAK,CAACe,GAAG,CAAC,2CAA2CD,EAAE,EAAE,CAAC;MAChE,IAAI,CAACP,UAAU,CAAC,CAAC;IACnB,CAAC;IACD,MAAMS,SAASA,CAACF,EAAE,EAAEG,MAAM,EAAE;MAC1B,MAAMjB,KAAK,CAACe,GAAG,CAAC,0CAA0CD,EAAE,EAAE,EAAE;QAC9DG;MACF,CAAC,CAAC;MACF,IAAI,CAACV,UAAU,CAAC,CAAC;IACnB,CAAC;IACD;IACA,MAAMW,WAAWA,CAACJ,EAAE,EAAE;MACpB,IAAI,CAACK,OAAO,CAAC,yDAAyD,CAAC,EAAE;MACzE,MAAMnB,KAAK,CAACoB,MAAM,CAAC,mCAAmCN,EAAE,EAAE,CAAC;MAC3D,IAAI,CAACP,UAAU,CAAC,CAAC;IACnB,CAAC;IAEDc,cAAcA,CAAChB,KAAK,EAAE;MACpB,MAAMiB,GAAE,GAAI,IAAIrB,KAAK,CAAC,CAAC;MACvB;MACAqB,GAAG,CAACC,IAAI,CAAC,GAAGlB,KAAK,CAACmB,IAAG,IAAK,OAAO,cAAc,CAAC;IAClD,CAAC;IACDC,iBAAiBA,CAAA,EAAG;MAClB,MAAMH,GAAE,GAAI,IAAIrB,KAAK,CAAC,CAAC;MACvB;MACAqB,GAAG,CAACC,IAAI,CAAC,kBAAkB,CAAC;IAC9B;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,CAACnB,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}