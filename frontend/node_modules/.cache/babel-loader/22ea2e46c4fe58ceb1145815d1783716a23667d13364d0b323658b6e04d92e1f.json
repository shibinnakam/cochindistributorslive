{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-management\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Staff Management\", -1 /* CACHED */)), _createCommentVNode(\" Invite Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => _ctx.inviteStaff && _ctx.inviteStaff(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.email = $event),\n    type: \"email\",\n    placeholder: \"Enter staff email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.email]]), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Invite\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Staff List \"), _cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Staff List\", -1 /* CACHED */)), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Phone\"), _createElementVNode(\"th\", null, \"Date of Joining\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.staff, s => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: s._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(s.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.name || \"窶能"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.phone || \"窶能"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.dateOfJoining ? new Date(s.dateOfJoining).toLocaleDateString() : \"窶能"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.status), 1 /* TEXT */), _createElementVNode(\"td\", null, [s.status === 'pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => _ctx.approveStaff(s._id)\n    }, \" Approve \", 8 /* PROPS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true), s.status === 'active' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => _ctx.setStatus(s._id, 'deactivated')\n    }, \" Deactivate \", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), s.status === 'deactivated' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => _ctx.setStatus(s._id, 'active')\n    }, \" Activate \", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" PDF Button \"), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.exportStaffPDF(s)\n    }, \"Download PDF\", 8 /* PROPS */, _hoisted_5)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Export All \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.exportAllStaffPDF && _ctx.exportAllStaffPDF(...args))\n  }, \"Download All Staff Report\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","_ctx","inviteStaff","email","$event","type","placeholder","required","_Fragment","_renderList","staff","s","key","_id","_toDisplayString","name","phone","dateOfJoining","Date","toLocaleDateString","status","onClick","approveStaff","_hoisted_2","setStatus","_hoisted_3","_hoisted_4","exportStaffPDF","_hoisted_5","exportAllStaffPDF"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"窶能" }}</td>\n          <td>{{ s.phone || \"窶能" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"窶能"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n\n    // 沒 Export single staff with full details + logo + photo\n    // 沒 Export single staff with full details + logo + photo\nexportStaffPDF(staff) {\n  const doc = new jsPDF();\n\n  // 笨 Add logo (left)\n  const logo = new Image();\n  logo.src = require(\"@/assets/logo.jpeg\");\n  doc.addImage(logo, \"JPEG\", 14, 10, 25, 25);\n\n  // 笨 Company Name + Address (center-left)\n  doc.setFontSize(16);\n  doc.setFont(\"helvetica\", \"bold\");\n  doc.text(\"COCHIN DISTRIBUTORS\", 45, 18);\n\n  doc.setFontSize(11);\n  doc.setFont(\"helvetica\", \"normal\");\n  doc.text(\"Merchant Association Building,\", 45, 26);\n  doc.text(\"Santhi Nagar, Kattappana\", 45, 32);\n  doc.text(\"Ph: 9447419293, 9446074962\", 45, 38);\n\n  // 笨 Staff Photo (top-right if available)\n  if (staff.photo) {\n    const staffImg = new Image();\n    staffImg.src = staff.photo; // Must be URL or base64\n    doc.addImage(staffImg, \"JPEG\", 160, 10, 35, 35);\n  }\n\n  // 笨 Horizontal line under header\n  doc.setDrawColor(0);\n  doc.line(14, 45, 200, 45);\n\n  // 笨 Personal Info Section\n  doc.setFontSize(14);\n  doc.setFont(\"helvetica\", \"bold\");\n  doc.text(\"Personal Information\", 14, 55);\n\n  autoTable(doc, {\n    startY: 60,\n    theme: \"grid\",\n    head: [[\"Field\", \"Value\"]],\n    body: [\n      [\"Name\", staff.name || \"窶能"],\n      [\"Email\", staff.email],\n      [\"Phone\", staff.phone || \"窶能"],\n      [\"Gender\", staff.gender || \"窶能"],\n      [\"Address\", staff.address || \"窶能"],\n      [\"Pincode\", staff.pincode || \"窶能"],\n    ],\n  });\n\n  // 笨 Work Info Section\n  let finalY = doc.lastAutoTable.finalY + 10;\n  doc.setFontSize(14);\n  doc.setFont(\"helvetica\", \"bold\");\n  doc.text(\"Work Information\", 14, finalY);\n\n  autoTable(doc, {\n    startY: finalY + 5,\n    theme: \"grid\",\n    head: [[\"Field\", \"Value\"]],\n    body: [\n      [\n        \"Date of Joining\",\n        staff.dateOfJoining\n          ? new Date(staff.dateOfJoining).toLocaleDateString()\n          : \"窶能",\n      ],\n      [\"Status\", staff.status],\n    ],\n  });\n\n  // 笨 Footer with timestamp\n  let footerY = doc.internal.pageSize.getHeight() - 15;\n  doc.setFontSize(10);\n  doc.setFont(\"helvetica\", \"italic\");\n  doc.text(\n    `Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}`,\n    14,\n    footerY\n  );\n\n  doc.save(`${staff.name || \"staff\"}_details.pdf`);\n},\n\n// 沒 Export all staff in one PDF\nexportAllStaffPDF() {\n  const doc = new jsPDF();\n\n  // 笨 Add logo\n  const logo = new Image();\n  logo.src = require(\"@/assets/logo.jpeg\");\n  doc.addImage(logo, \"JPEG\", 14, 10, 25, 25);\n\n  // 笨 Company header\n  doc.setFontSize(16);\n  doc.setFont(\"helvetica\", \"bold\");\n  doc.text(\"COCHIN DISTRIBUTORS\", 45, 18);\n\n  doc.setFontSize(11);\n  doc.setFont(\"helvetica\", \"normal\");\n  doc.text(\"Merchant Association Building,\", 45, 26);\n  doc.text(\"Santhi Nagar, Kattappana\", 45, 32);\n  doc.text(\"Ph: 9447419293, 9446074962\", 45, 38);\n\n  // 笨 Horizontal line\n  doc.setDrawColor(0);\n  doc.line(14, 45, 200, 45);\n\n  autoTable(doc, {\n    startY: 50,\n    head: [\n      [\n        \"Name\",\n        \"Email\",\n        \"Phone\",\n        \"Gender\",\n        \"Address\",\n        \"Pincode\",\n        \"Date of Joining\",\n        \"Status\",\n      ],\n    ],\n    body: this.staff.map((s) => [\n      s.name || \"窶能",\n      s.email,\n      s.phone || \"窶能",\n      s.gender || \"窶能",\n      s.address || \"窶能",\n      s.pincode || \"窶能",\n      s.dateOfJoining\n        ? new Date(s.dateOfJoining).toLocaleDateString()\n        : \"窶能",\n      s.status || \"窶能",\n    ]),\n  });\n\n  // 笨 Footer\n  let footerY = doc.internal.pageSize.getHeight() - 15;\n  doc.setFontSize(10);\n  doc.setFont(\"helvetica\", \"italic\");\n  doc.text(\n    `Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}`,\n    14,\n    footerY\n  );\n\n  doc.save(\"staff-report.pdf\");\n}\n\n    // 沒 Export all staff in one PDF\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n\n      // 笨 Add logo + name on top\n      const logo = new Image();\n      logo.src = require(\"@/assets/logo.jpeg\");\n      doc.addImage(logo, \"JPEG\", 14, 10, 25, 25);\n\n      doc.setFontSize(18);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.text(\"COCHIN DISTRIBUTORS - Staff Report\", 45, 25);\n\n      autoTable(doc, {\n        startY: 40,\n        head: [\n          [\n            \"Name\",\n            \"Email\",\n            \"Phone\",\n            \"Gender\",\n            \"Address\",\n            \"Pincode\",\n            \"Date of Joining\",\n            \"Status\",\n          ],\n        ],\n        body: this.staff.map((s) => [\n          s.name || \"窶能",\n          s.email,\n          s.phone || \"窶能",\n          s.gender || \"窶能",\n          s.address || \"窶能",\n          s.pincode || \"窶能",\n          s.dateOfJoining\n            ? new Date(s.dateOfJoining).toLocaleDateString()\n            : \"窶能",\n          s.status || \"窶能",\n        ]),\n      });\n\n      // 笨 Footer\n      let footerY = doc.internal.pageSize.getHeight() - 15;\n      doc.setFontSize(10);\n      doc.setFont(\"helvetica\", \"italic\");\n      doc.text(\n        `Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}`,\n        14,\n        footerY\n      );\n\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;;;;;uBAA7BC,mBAAA,CAkEM,OAlENC,UAkEM,G,0BAjEJC,mBAAA,CAAyB,YAArB,kBAAgB,qBAEpBC,mBAAA,iBAAoB,EACpBD,mBAAA,CAQO;IARAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,IAAA,CAAAC,WAAA,IAAAD,IAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;sBAChCL,mBAAA,CAKE;+DAJSM,IAAA,CAAAE,KAAK,GAAAC,MAAA;IACdC,IAAI,EAAC,OAAO;IACZC,WAAW,EAAC,mBAAmB;IAC/BC,QAAQ,EAAR;iDAHSN,IAAA,CAAAE,KAAK,E,6BAKhBR,mBAAA,CAAqC;IAA7BU,IAAI,EAAC;EAAQ,GAAC,QAAM,oB,4BAG9BT,mBAAA,gBAAmB,E,0BACnBD,mBAAA,CAAmB,YAAf,YAAU,qBACdA,mBAAA,CA8CQ,gB,0BA7CNA,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAwB,YAApB,iBAAe,GACnBA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAe,YAAX,QAAM,E,uBAGdA,mBAAA,CAkCQ,iB,kBAjCNF,mBAAA,CAgCKe,SAAA,QAAAC,WAAA,CAhCWR,IAAA,CAAAS,KAAK,EAAVC,CAAC;yBAAZlB,mBAAA,CAgCK;MAhCmBmB,GAAG,EAAED,CAAC,CAACE;QAC7BlB,mBAAA,CAAsB,YAAAmB,gBAAA,CAAfH,CAAC,CAACR,KAAK,kBACdR,mBAAA,CAA4B,YAAAmB,gBAAA,CAArBH,CAAC,CAACI,IAAI,yBACbpB,mBAAA,CAA6B,YAAAmB,gBAAA,CAAtBH,CAAC,CAACK,KAAK,yBACdrB,mBAAA,CAMK,YAAAmB,gBAAA,CAJDH,CAAC,CAACM,aAAa,G,IAAuBC,IAAI,CAACP,CAAC,CAACM,aAAa,EAAEE,kBAAkB,K,qBAKlFxB,mBAAA,CAAuB,YAAAmB,gBAAA,CAAhBH,CAAC,CAACS,MAAM,kBACfzB,mBAAA,CAmBK,aAlBWgB,CAAC,CAACS,MAAM,kB,cAAtB3B,mBAAA,CAES;;MAF8B4B,OAAK,EAAAjB,MAAA,IAAEH,IAAA,CAAAqB,YAAY,CAACX,CAAC,CAACE,GAAG;OAAG,WAEnE,iBAAAU,UAAA,K,mCAEQZ,CAAC,CAACS,MAAM,iB,cADhB3B,mBAAA,CAKS;;MAHN4B,OAAK,EAAAjB,MAAA,IAAEH,IAAA,CAAAuB,SAAS,CAACb,CAAC,CAACE,GAAG;OACxB,cAED,iBAAAY,UAAA,K,mCAEQd,CAAC,CAACS,MAAM,sB,cADhB3B,mBAAA,CAKS;;MAHN4B,OAAK,EAAAjB,MAAA,IAAEH,IAAA,CAAAuB,SAAS,CAACb,CAAC,CAACE,GAAG;OACxB,YAED,iBAAAa,UAAA,K,mCAEA9B,mBAAA,gBAAmB,EACnBD,mBAAA,CAAwD;MAA/C0B,OAAK,EAAAjB,MAAA,IAAEH,IAAA,CAAA0B,cAAc,CAAChB,CAAC;OAAG,cAAY,iBAAAiB,UAAA,E;sCAMvDhC,mBAAA,gBAAmB,EACnBD,mBAAA,CAAqE;IAA5D0B,OAAK,EAAAvB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,IAAA,CAAA4B,iBAAA,IAAA5B,IAAA,CAAA4B,iBAAA,IAAA7B,IAAA,CAAiB;KAAE,2BAAyB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}