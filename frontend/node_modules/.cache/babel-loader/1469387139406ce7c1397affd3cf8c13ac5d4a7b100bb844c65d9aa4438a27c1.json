{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-management\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Staff Management\", -1 /* CACHED */)), _createCommentVNode(\" Invite Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.inviteStaff && $options.inviteStaff(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    type: \"email\",\n    placeholder: \"Enter staff email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Invite\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Staff List \"), _cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Staff List\", -1 /* CACHED */)), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Phone\"), _createElementVNode(\"th\", null, \"Date of Joining\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.staff, s => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: s._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(s.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.name || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.phone || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.dateOfJoining ? new Date(s.dateOfJoining).toLocaleDateString() : \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.status), 1 /* TEXT */), _createElementVNode(\"td\", null, [s.status === 'pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.approveStaff(s._id)\n    }, \" Approve \", 8 /* PROPS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true), s.status === 'active' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.setStatus(s._id, 'deactivated')\n    }, \" Deactivate \", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), s.status === 'deactivated' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.setStatus(s._id, 'active')\n    }, \" Activate \", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" PDF Button \"), _createElementVNode(\"button\", {\n      onClick: $event => $options.exportStaffPDF(s)\n    }, \"Download PDF\", 8 /* PROPS */, _hoisted_5), _createCommentVNode(\" Delete Button \"), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteStaff(s._id),\n      class: \"delete-btn\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_6)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Export All \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.exportAllStaffPDF && $options.exportAllStaffPDF(...args))\n  }, \"Download All Staff Report\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$options","inviteStaff","$data","email","$event","type","placeholder","required","_Fragment","_renderList","staff","s","key","_id","_toDisplayString","name","phone","dateOfJoining","Date","toLocaleDateString","status","onClick","approveStaff","_hoisted_2","setStatus","_hoisted_3","_hoisted_4","exportStaffPDF","_hoisted_5","deleteStaff","_hoisted_6","exportAllStaffPDF"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n\n            <!-- Delete Button -->\n            <button @click=\"deleteStaff(s._id)\" class=\"delete-btn\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        alert(\"Failed to fetch staff\");\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email,\n        });\n        alert(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error sending invite\");\n      }\n    },\n    async approveStaff(id) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error approving staff\");\n      }\n    },\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status,\n        });\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to update status\");\n      }\n    },\n\n    // ✅ Delete staff permanently\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to delete this staff? This action cannot be undone.\")) return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        alert(\"Staff deleted successfully!\");\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to delete staff\");\n      }\n    },\n\n    // --- PDF methods (unchanged) ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n\n<style scoped>\n.delete-btn {\n  background-color: #f56565;\n  color: #fff;\n  margin-left: 5px;\n}\n.delete-btn:hover {\n  opacity: 0.85;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}