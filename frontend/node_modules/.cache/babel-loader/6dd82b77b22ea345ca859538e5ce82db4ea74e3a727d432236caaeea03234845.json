{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { EventDispatcher, Texture } from 'three';\nimport { MeshoptDecoder } from 'three/examples/jsm/libs/meshopt_decoder.module.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { KTX2Loader } from 'three/examples/jsm/loaders/KTX2Loader.js';\nimport { CacheEvictionPolicy } from '../utilities/cache-eviction-policy.js';\nimport GLTFMaterialsVariantsExtension from './gltf-instance/VariantMaterialLoaderPlugin.js';\nTexture.DEFAULT_ANISOTROPY = 4;\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nexport const loadWithLoader = (url, loader, progressCallback = () => {}) => {\n  const onProgress = event => {\n    const fraction = event.loaded / event.total;\n    progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n  };\n  return new Promise((resolve, reject) => {\n    loader.load(url, resolve, onProgress, reject);\n  });\n};\n/** Helper to load a script tag. */\nconst fetchScript = src => {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = src;\n  });\n};\nconst cache = new Map();\nconst preloaded = new Map();\nlet dracoDecoderLocation;\nconst dracoLoader = new DRACOLoader();\nlet ktx2TranscoderLocation;\nconst ktx2Loader = new KTX2Loader();\nlet meshoptDecoderLocation;\nlet meshoptDecoder;\nexport const $loader = Symbol('loader');\nexport const $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\nexport class CachingGLTFLoader extends EventDispatcher {\n  static setDRACODecoderLocation(url) {\n    dracoDecoderLocation = url;\n    dracoLoader.setDecoderPath(url);\n  }\n  static getDRACODecoderLocation() {\n    return dracoDecoderLocation;\n  }\n  static setKTX2TranscoderLocation(url) {\n    ktx2TranscoderLocation = url;\n    ktx2Loader.setTranscoderPath(url);\n  }\n  static getKTX2TranscoderLocation() {\n    return ktx2TranscoderLocation;\n  }\n  static setMeshoptDecoderLocation(url) {\n    if (meshoptDecoderLocation !== url) {\n      meshoptDecoderLocation = url;\n      meshoptDecoder = fetchScript(url).then(() => MeshoptDecoder.ready).then(() => MeshoptDecoder);\n    }\n  }\n  static getMeshoptDecoderLocation() {\n    return meshoptDecoderLocation;\n  }\n  static initializeKTX2Loader(renderer) {\n    ktx2Loader.detectSupport(renderer);\n  }\n  static get cache() {\n    return cache;\n  }\n  /** @nocollapse */\n  static clearCache() {\n    cache.forEach((_value, url) => {\n      this.delete(url);\n    });\n    this[$evictionPolicy].reset();\n  }\n  static has(url) {\n    return cache.has(url);\n  }\n  /** @nocollapse */\n  static async delete(url) {\n    if (!this.has(url)) {\n      return;\n    }\n    const gltfLoads = cache.get(url);\n    preloaded.delete(url);\n    cache.delete(url);\n    const gltf = await gltfLoads;\n    // Dispose of the cached glTF's materials and geometries:\n    gltf.dispose();\n  }\n  /**\n   * Returns true if the model that corresponds to the specified url is\n   * available in our local cache.\n   */\n  static hasFinishedLoading(url) {\n    return !!preloaded.get(url);\n  }\n  constructor(GLTFInstance) {\n    super();\n    this[_b] = new GLTFLoader().register(parser => new GLTFMaterialsVariantsExtension(parser));\n    this[$GLTFInstance] = GLTFInstance;\n    this[$loader].setDRACOLoader(dracoLoader);\n    this[$loader].setKTX2Loader(ktx2Loader);\n  }\n  get [(_a = $evictionPolicy, _b = $loader, $evictionPolicy)]() {\n    return this.constructor[$evictionPolicy];\n  }\n  /**\n   * Preloads a glTF, populating the cache. Returns a promise that resolves\n   * when the cache is populated.\n   */\n  async preload(url, element, progressCallback = () => {}) {\n    this[$loader].setWithCredentials(element.withCredentials);\n    this.dispatchEvent({\n      type: 'preload',\n      element: element,\n      src: url\n    });\n    if (!cache.has(url)) {\n      if (meshoptDecoder != null) {\n        this[$loader].setMeshoptDecoder(await meshoptDecoder);\n      }\n      const rawGLTFLoads = loadWithLoader(url, this[$loader], progress => {\n        progressCallback(progress * 0.8);\n      });\n      const GLTFInstance = this[$GLTFInstance];\n      const gltfInstanceLoads = rawGLTFLoads.then(rawGLTF => {\n        return GLTFInstance.prepare(rawGLTF);\n      }).then(preparedGLTF => {\n        progressCallback(0.9);\n        return new GLTFInstance(preparedGLTF);\n      }).catch(reason => {\n        console.error(reason);\n        return new GLTFInstance();\n      });\n      cache.set(url, gltfInstanceLoads);\n    }\n    await cache.get(url);\n    preloaded.set(url, true);\n    if (progressCallback) {\n      progressCallback(1.0);\n    }\n  }\n  /**\n   * Loads a glTF from the specified url and resolves a unique clone of the\n   * glTF. If the glTF has already been loaded, makes a clone of the cached\n   * copy.\n   */\n  async load(url, element, progressCallback = () => {}) {\n    await this.preload(url, element, progressCallback);\n    const gltf = await cache.get(url);\n    const clone = await gltf.clone();\n    this[$evictionPolicy].retain(url);\n    // Patch dispose so that we can properly account for instance use\n    // in the caching layer:\n    clone.dispose = () => {\n      this[$evictionPolicy].release(url);\n    };\n    return clone;\n  }\n}\nCachingGLTFLoader[_a] = new CacheEvictionPolicy(CachingGLTFLoader);","map":{"version":3,"names":["EventDispatcher","Texture","MeshoptDecoder","DRACOLoader","GLTFLoader","KTX2Loader","CacheEvictionPolicy","GLTFMaterialsVariantsExtension","DEFAULT_ANISOTROPY","loadWithLoader","url","loader","progressCallback","onProgress","event","fraction","loaded","total","Math","max","min","isFinite","Promise","resolve","reject","load","fetchScript","src","script","document","createElement","body","appendChild","onload","onerror","async","cache","Map","preloaded","dracoDecoderLocation","dracoLoader","ktx2TranscoderLocation","ktx2Loader","meshoptDecoderLocation","meshoptDecoder","$loader","Symbol","$evictionPolicy","$GLTFInstance","CachingGLTFLoader","setDRACODecoderLocation","setDecoderPath","getDRACODecoderLocation","setKTX2TranscoderLocation","setTranscoderPath","getKTX2TranscoderLocation","setMeshoptDecoderLocation","then","ready","getMeshoptDecoderLocation","initializeKTX2Loader","renderer","detectSupport","clearCache","forEach","_value","delete","reset","has","gltfLoads","get","gltf","dispose","hasFinishedLoading","constructor","GLTFInstance","_b","register","parser","setDRACOLoader","setKTX2Loader","_a","preload","element","setWithCredentials","withCredentials","dispatchEvent","type","setMeshoptDecoder","rawGLTFLoads","progress","gltfInstanceLoads","rawGLTF","prepare","preparedGLTF","catch","reason","console","error","set","clone","retain","release"],"sources":["../../src/three-components/CachingGLTFLoader.ts"],"sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {EventDispatcher, Texture, WebGLRenderer} from 'three';\nimport {MeshoptDecoder} from 'three/examples/jsm/libs/meshopt_decoder.module.js';\nimport {DRACOLoader} from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport {GLTF, GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport {KTX2Loader} from 'three/examples/jsm/loaders/KTX2Loader.js';\n\nimport ModelViewerElementBase from '../model-viewer-base.js';\nimport {CacheEvictionPolicy} from '../utilities/cache-eviction-policy.js';\n\nimport GLTFMaterialsVariantsExtension from './gltf-instance/VariantMaterialLoaderPlugin.js';\nimport {GLTFInstance, GLTFInstanceConstructor} from './GLTFInstance.js';\n\nexport type ProgressCallback = (progress: number) => void;\n\n(Texture as any).DEFAULT_ANISOTROPY = 4;\n\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nexport const loadWithLoader =\n    (url: string,\n     loader: GLTFLoader,\n     progressCallback: ProgressCallback = () => {}) => {\n      const onProgress = (event: ProgressEvent) => {\n        const fraction = event.loaded / event.total;\n        progressCallback!\n            (Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n      };\n      return new Promise<GLTF>((resolve, reject) => {\n        loader.load(url, resolve, onProgress, reject);\n      });\n    };\n\n/** Helper to load a script tag. */\nconst fetchScript = (src: string): Promise<Event> => {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = src;\n  });\n};\n\nconst cache = new Map<string, Promise<GLTFInstance>>();\nconst preloaded = new Map<string, boolean>();\n\nlet dracoDecoderLocation: string;\nconst dracoLoader = new DRACOLoader();\n\nlet ktx2TranscoderLocation: string;\nconst ktx2Loader = new KTX2Loader();\n\nlet meshoptDecoderLocation: string;\nlet meshoptDecoder: Promise<typeof MeshoptDecoder>|undefined;\n\nexport const $loader = Symbol('loader');\nexport const $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\n\nexport class CachingGLTFLoader<T extends GLTFInstanceConstructor =\n                                             GLTFInstanceConstructor> extends\n    EventDispatcher<\n        {'preload': {element: ModelViewerElementBase, src: String}}> {\n  static setDRACODecoderLocation(url: string) {\n    dracoDecoderLocation = url;\n    dracoLoader.setDecoderPath(url);\n  }\n\n  static getDRACODecoderLocation() {\n    return dracoDecoderLocation;\n  }\n\n  static setKTX2TranscoderLocation(url: string) {\n    ktx2TranscoderLocation = url;\n    ktx2Loader.setTranscoderPath(url);\n  }\n\n  static getKTX2TranscoderLocation() {\n    return ktx2TranscoderLocation;\n  }\n\n  static setMeshoptDecoderLocation(url: string) {\n    if (meshoptDecoderLocation !== url) {\n      meshoptDecoderLocation = url;\n      meshoptDecoder = fetchScript(url)\n                           .then(() => MeshoptDecoder.ready)\n                           .then(() => MeshoptDecoder);\n    }\n  }\n\n  static getMeshoptDecoderLocation() {\n    return meshoptDecoderLocation;\n  }\n\n  static initializeKTX2Loader(renderer: WebGLRenderer) {\n    ktx2Loader.detectSupport(renderer);\n  }\n\n  static[$evictionPolicy]: CacheEvictionPolicy =\n      new CacheEvictionPolicy(CachingGLTFLoader);\n\n  static get cache() {\n    return cache;\n  }\n\n  /** @nocollapse */\n  static clearCache() {\n    cache.forEach((_value, url) => {\n      this.delete(url);\n    });\n    this[$evictionPolicy].reset();\n  }\n\n  static has(url: string) {\n    return cache.has(url);\n  }\n\n  /** @nocollapse */\n  static async delete(url: string) {\n    if (!this.has(url)) {\n      return;\n    }\n\n    const gltfLoads = cache.get(url);\n    preloaded.delete(url);\n    cache.delete(url);\n\n    const gltf = await gltfLoads;\n    // Dispose of the cached glTF's materials and geometries:\n\n    gltf!.dispose();\n  }\n\n  /**\n   * Returns true if the model that corresponds to the specified url is\n   * available in our local cache.\n   */\n  static hasFinishedLoading(url: string) {\n    return !!preloaded.get(url);\n  }\n\n  constructor(GLTFInstance: T) {\n    super();\n    this[$GLTFInstance] = GLTFInstance;\n    this[$loader].setDRACOLoader(dracoLoader);\n    this[$loader].setKTX2Loader(ktx2Loader);\n  }\n\n  protected[$loader]: GLTFLoader = new GLTFLoader().register(\n      parser => new GLTFMaterialsVariantsExtension(parser));\n  protected[$GLTFInstance]: T;\n\n  protected get[$evictionPolicy](): CacheEvictionPolicy {\n    return (this.constructor as typeof CachingGLTFLoader)[$evictionPolicy];\n  }\n\n  /**\n   * Preloads a glTF, populating the cache. Returns a promise that resolves\n   * when the cache is populated.\n   */\n  async preload(\n      url: string, element: ModelViewerElementBase,\n      progressCallback: ProgressCallback = () => {}) {\n    this[$loader].setWithCredentials(element.withCredentials);\n    this.dispatchEvent({type: 'preload', element: element, src: url});\n    if (!cache.has(url)) {\n      if (meshoptDecoder != null) {\n        this[$loader].setMeshoptDecoder(await meshoptDecoder);\n      }\n\n      const rawGLTFLoads =\n          loadWithLoader(url, this[$loader], (progress: number) => {\n            progressCallback(progress * 0.8);\n          });\n\n      const GLTFInstance = this[$GLTFInstance];\n      const gltfInstanceLoads = rawGLTFLoads\n                                    .then((rawGLTF) => {\n                                      return GLTFInstance.prepare(rawGLTF);\n                                    })\n                                    .then((preparedGLTF) => {\n                                      progressCallback(0.9);\n                                      return new GLTFInstance(preparedGLTF);\n                                    })\n                                    .catch((reason => {\n                                      console.error(reason);\n                                      return new GLTFInstance();\n                                    }));\n      cache.set(url, gltfInstanceLoads);\n    }\n\n    await cache.get(url);\n\n    preloaded.set(url, true);\n\n    if (progressCallback) {\n      progressCallback(1.0);\n    }\n  }\n\n  /**\n   * Loads a glTF from the specified url and resolves a unique clone of the\n   * glTF. If the glTF has already been loaded, makes a clone of the cached\n   * copy.\n   */\n  async load(\n      url: string, element: ModelViewerElementBase,\n      progressCallback: ProgressCallback = () => {}): Promise<InstanceType<T>> {\n    await this.preload(url, element, progressCallback);\n\n    const gltf = await cache.get(url)!;\n    const clone = await gltf.clone() as InstanceType<T>;\n\n    this[$evictionPolicy].retain(url);\n\n    // Patch dispose so that we can properly account for instance use\n    // in the caching layer:\n    clone.dispose = () => {\n      this[$evictionPolicy].release(url);\n    };\n\n    return clone;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}