{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"set-password\"\n};\nconst _hoisted_2 = {\n  class: \"set-password-box\"\n};\nconst _hoisted_3 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"Set Your Password\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    placeholder: \"Enter new password\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.password = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    placeholder: \"Confirm new password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.confirmPassword = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.confirmPassword]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.setPassword && $options.setPassword(...args)),\n    disabled: $data.loading\n  }, _toDisplayString($data.loading ? \"Setting...\" : \"Set Password\"), 9 /* TEXT, PROPS */, _hoisted_3), $data.message ? (_openBlock(), _createElementBlock(\"p\", {\n    key: 0,\n    class: _normalizeClass($data.isError ? 'error' : 'success')\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","type","placeholder","$data","password","$event","confirmPassword","onClick","_cache","args","$options","setPassword","disabled","loading","_hoisted_3","message","_normalizeClass","isError"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\SetPassword.vue"],"sourcesContent":["<template>\n  <div class=\"set-password\">\n    <div class=\"set-password-box\">\n      <h2>Set Your Password</h2>\n\n      <input\n        type=\"password\"\n        placeholder=\"Enter new password\"\n        v-model=\"password\"\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Confirm new password\"\n        v-model=\"confirmPassword\"\n      />\n\n      <button @click=\"setPassword\" :disabled=\"loading\">\n        {{ loading ? \"Setting...\" : \"Set Password\" }}\n      </button>\n\n      <p v-if=\"message\" :class=\"isError ? 'error' : 'success'\">\n        {{ message }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      password: \"\",\n      confirmPassword: \"\",\n      message: \"\",\n      isError: false,\n      loading: false,\n    };\n  },\n  methods: {\n    async setPassword() {\n      this.message = \"\";\n      this.isError = false;\n\n      if (!this.password || this.password.length < 6) {\n        this.message = \"Password must be at least 6 characters\";\n        this.isError = true;\n        return;\n      }\n\n      if (this.password !== this.confirmPassword) {\n        this.message = \"Passwords do not match\";\n        this.isError = true;\n        return;\n      }\n\n      const token = this.$route.params.token || this.$route.query.token;\n      const email = this.$route.query.email;\n\n\n      if (!token || !email) {\n        this.message = \"Invalid or missing reset information\";\n        this.isError = true;\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const res = await axios.post(\n          `${process.env.VUE_APP_API_URL}/api/auth/reset-password`,\n          { token, email, password: this.password }\n        );\n        this.message = res.data.msg || \"Password set successfully!\";\n        this.isError = false;\n\n        setTimeout(() => {\n          this.$router.push(\"/login\");\n        }, 2000);\n      } catch (err) {\n        this.message = err.response?.data?.msg || \"Error setting password\";\n        this.isError = true;\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.set-password {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #f5f7fa;\n}\n\n.set-password-box {\n  background: rgba(255, 255, 255, 0.9);\n  padding: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  max-width: 400px;\n  width: 100%;\n  text-align: center;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  margin: 10px 0;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n}\n\nbutton {\n  width: 100%;\n  padding: 10px;\n  background: #2196f3;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background: #90caf9;\n  cursor: not-allowed;\n}\n\n.error {\n  color: red;\n  margin-top: 10px;\n}\n\n.success {\n  color: green;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAkB;;;uBAD/BC,mBAAA,CAuBM,OAvBNC,UAuBM,GAtBJC,mBAAA,CAqBM,OArBNC,UAqBM,G,0BApBJD,mBAAA,CAA0B,YAAtB,mBAAiB,qB,gBAErBA,mBAAA,CAIE;IAHAE,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,oBAAoB;+DACvBC,KAAA,CAAAC,QAAQ,GAAAC,MAAA;iDAARF,KAAA,CAAAC,QAAQ,E,mBAEnBL,mBAAA,CAIE;IAHAE,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,sBAAsB;+DACzBC,KAAA,CAAAG,eAAe,GAAAD,MAAA;iDAAfF,KAAA,CAAAG,eAAe,E,GAG1BP,mBAAA,CAES;IAFAQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAAGG,QAAQ,EAAET,KAAA,CAAAU;sBACnCV,KAAA,CAAAU,OAAO,wDAAAC,UAAA,GAGHX,KAAA,CAAAY,OAAO,I,cAAhBlB,mBAAA,CAEI;;IAFeD,KAAK,EAAAoB,eAAA,CAAEb,KAAA,CAAAc,OAAO;sBAC5Bd,KAAA,CAAAY,OAAO,2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}