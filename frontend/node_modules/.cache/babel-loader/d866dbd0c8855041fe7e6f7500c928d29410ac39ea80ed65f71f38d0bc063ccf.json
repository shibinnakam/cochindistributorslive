{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      name: \"\",\n      image: null,\n      categories: [],\n      search: \"\",\n      showAddForm: false\n    };\n  },\n  computed: {\n    filteredCategories() {\n      return this.categories.filter(c => c.name.toLowerCase().includes(this.search.toLowerCase()));\n    }\n  },\n  methods: {\n    onFileChange(e) {\n      this.image = e.target.files[0];\n    },\n    async addCategory() {\n      try {\n        const formData = new FormData();\n        formData.append(\"name\", this.name);\n        if (this.image) formData.append(\"image\", this.image);\n        const response = await axios.post(\"http://localhost:5000/api/categories\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n        this.categories.push(response.data);\n        this.name = \"\";\n        this.image = null;\n        this.showAddForm = false;\n      } catch (err) {\n        alert(err.response?.data?.error || \"Error adding category\");\n      }\n    },\n    async fetchCategories() {\n      const res = await axios.get(\"http://localhost:5000/api/categories\");\n      this.categories = res.data;\n    },\n    async deleteCategory(id) {\n      if (confirm(\"Delete this category?\")) {\n        await axios.delete(`http://localhost:5000/api/categories/${id}`);\n        this.categories = this.categories.filter(c => c._id !== id);\n      }\n    },\n    editCategory(cat) {\n      alert(\"Open edit modal for \" + cat.name);\n    },\n    formatDate(dateStr) {\n      return new Date(dateStr).toLocaleString();\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n  }\n};","map":{"version":3,"names":["axios","data","name","image","categories","search","showAddForm","computed","filteredCategories","filter","c","toLowerCase","includes","methods","onFileChange","e","target","files","addCategory","formData","FormData","append","response","post","headers","push","err","alert","error","fetchCategories","res","get","deleteCategory","id","confirm","delete","_id","editCategory","cat","formatDate","dateStr","Date","toLocaleString","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\AddCategory.vue"],"sourcesContent":["<template>\n  <div class=\"category-management\">\n    <h2>Category Templates</h2>\n\n    <!-- Search + Add -->\n    <div class=\"header-row\">\n      <input\n        v-model=\"search\"\n        type=\"text\"\n        placeholder=\"Search Category Templates\"\n        class=\"search-box\"\n      />\n      <a href=\"#\" class=\"add-btn\" @click.prevent=\"showAddForm = !showAddForm\">\n        + Add New Category\n      </a>\n    </div>\n\n    <!-- Add Form -->\n    <div v-if=\"showAddForm\" class=\"add-form\">\n      <form @submit.prevent=\"addCategory\">\n        <input\n          v-model=\"name\"\n          type=\"text\"\n          placeholder=\"Enter category name\"\n          required\n        />\n        <input type=\"file\" @change=\"onFileChange\" />\n        <button type=\"submit\">Save</button>\n      </form>\n    </div>\n\n    <!-- Table -->\n    <table class=\"category-table\">\n      <thead>\n        <tr>\n          <th>Category Name</th>\n          <th>Status</th>\n          <th>Default</th>\n          <th>SEO Title</th>\n          <th>Last Updated</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"cat in filteredCategories\" :key=\"cat._id\">\n          <td>{{ cat.name }}</td>\n          <td class=\"status\">Published</td>\n          <td>-</td>\n          <td>N/A</td>\n          <td>{{ formatDate(cat.updatedAt) }}</td>\n          <td>\n            <button @click=\"editCategory(cat)\">Edit</button>\n            <button @click=\"deleteCategory(cat._id)\">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      image: null,\n      categories: [],\n      search: \"\",\n      showAddForm: false,\n    };\n  },\n  computed: {\n    filteredCategories() {\n      return this.categories.filter((c) =>\n        c.name.toLowerCase().includes(this.search.toLowerCase())\n      );\n    },\n  },\n  methods: {\n    onFileChange(e) {\n      this.image = e.target.files[0];\n    },\n    async addCategory() {\n      try {\n        const formData = new FormData();\n        formData.append(\"name\", this.name);\n        if (this.image) formData.append(\"image\", this.image);\n\n        const response = await axios.post(\n          \"http://localhost:5000/api/categories\",\n          formData,\n          { headers: { \"Content-Type\": \"multipart/form-data\" } }\n        );\n\n        this.categories.push(response.data);\n        this.name = \"\";\n        this.image = null;\n        this.showAddForm = false;\n      } catch (err) {\n        alert(err.response?.data?.error || \"Error adding category\");\n      }\n    },\n    async fetchCategories() {\n      const res = await axios.get(\"http://localhost:5000/api/categories\");\n      this.categories = res.data;\n    },\n    async deleteCategory(id) {\n      if (confirm(\"Delete this category?\")) {\n        await axios.delete(`http://localhost:5000/api/categories/${id}`);\n        this.categories = this.categories.filter((c) => c._id !== id);\n      }\n    },\n    editCategory(cat) {\n      alert(\"Open edit modal for \" + cat.name);\n    },\n    formatDate(dateStr) {\n      return new Date(dateStr).toLocaleString();\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n};\n</script>\n\n<style>\n.category-management {\n  max-width: 900px;\n  margin: auto;\n  font-family: Arial, sans-serif;\n}\n.header-row {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.search-box {\n  padding: 5px;\n  width: 250px;\n}\n.add-btn {\n  color: #0073e6;\n  cursor: pointer;\n  text-decoration: none;\n}\n.add-form {\n  margin-bottom: 15px;\n}\n.category-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n.category-table th,\n.category-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n}\n.category-table th {\n  background: #f4f4f4;\n  text-align: left;\n}\n.status {\n  color: green;\n  font-weight: bold;\n}\nbutton {\n  margin-right: 5px;\n  padding: 4px 8px;\n  cursor: pointer;\n}\n</style>\n"],"mappings":";;;AA6DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,IAAI;MACXC,UAAU,EAAE,EAAE;MACdC,MAAM,EAAE,EAAE;MACVC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,kBAAkBA,CAAA,EAAG;MACnB,OAAO,IAAI,CAACJ,UAAU,CAACK,MAAM,CAAEC,CAAC,IAC9BA,CAAC,CAACR,IAAI,CAACS,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAACM,WAAW,CAAC,CAAC,CACzD,CAAC;IACH;EACF,CAAC;EACDE,OAAO,EAAE;IACPC,YAAYA,CAACC,CAAC,EAAE;MACd,IAAI,CAACZ,KAAI,GAAIY,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAChC,CAAC;IACD,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;QAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACnB,IAAI,CAAC;QAClC,IAAI,IAAI,CAACC,KAAK,EAAEgB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAAClB,KAAK,CAAC;QAEpD,MAAMmB,QAAO,GAAI,MAAMtB,KAAK,CAACuB,IAAI,CAC/B,sCAAsC,EACtCJ,QAAQ,EACR;UAAEK,OAAO,EAAE;YAAE,cAAc,EAAE;UAAsB;QAAE,CACvD,CAAC;QAED,IAAI,CAACpB,UAAU,CAACqB,IAAI,CAACH,QAAQ,CAACrB,IAAI,CAAC;QACnC,IAAI,CAACC,IAAG,GAAI,EAAE;QACd,IAAI,CAACC,KAAI,GAAI,IAAI;QACjB,IAAI,CAACG,WAAU,GAAI,KAAK;MAC1B,EAAE,OAAOoB,GAAG,EAAE;QACZC,KAAK,CAACD,GAAG,CAACJ,QAAQ,EAAErB,IAAI,EAAE2B,KAAI,IAAK,uBAAuB,CAAC;MAC7D;IACF,CAAC;IACD,MAAMC,eAAeA,CAAA,EAAG;MACtB,MAAMC,GAAE,GAAI,MAAM9B,KAAK,CAAC+B,GAAG,CAAC,sCAAsC,CAAC;MACnE,IAAI,CAAC3B,UAAS,GAAI0B,GAAG,CAAC7B,IAAI;IAC5B,CAAC;IACD,MAAM+B,cAAcA,CAACC,EAAE,EAAE;MACvB,IAAIC,OAAO,CAAC,uBAAuB,CAAC,EAAE;QACpC,MAAMlC,KAAK,CAACmC,MAAM,CAAC,wCAAwCF,EAAE,EAAE,CAAC;QAChE,IAAI,CAAC7B,UAAS,GAAI,IAAI,CAACA,UAAU,CAACK,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC0B,GAAE,KAAMH,EAAE,CAAC;MAC/D;IACF,CAAC;IACDI,YAAYA,CAACC,GAAG,EAAE;MAChBX,KAAK,CAAC,sBAAqB,GAAIW,GAAG,CAACpC,IAAI,CAAC;IAC1C,CAAC;IACDqC,UAAUA,CAACC,OAAO,EAAE;MAClB,OAAO,IAAIC,IAAI,CAACD,OAAO,CAAC,CAACE,cAAc,CAAC,CAAC;IAC3C;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACd,eAAe,CAAC,CAAC;EACxB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}