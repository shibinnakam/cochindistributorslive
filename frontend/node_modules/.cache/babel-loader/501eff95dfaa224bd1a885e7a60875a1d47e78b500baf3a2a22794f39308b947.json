{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      name: \"\",\n      address: \"\",\n      phone: \"\",\n      password: \"\",\n      gender: \"\",\n      pincode: \"\",\n      profilePhoto: null,\n      profilePhotoPreview: null,\n      message: \"\",\n      submitted: false // track submission\n    };\n  },\n  methods: {\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (file) {\n        this.profilePhoto = file;\n        this.profilePhotoPreview = URL.createObjectURL(file);\n      }\n    },\n    async register() {\n      const token = this.$route.query.token;\n      if (!token) {\n        this.message = \"Invalid or expired link\";\n        return;\n      }\n      if (this.submitted) {\n        this.message = \"You have already submitted.\";\n        return;\n      }\n      try {\n        const formData = new FormData();\n        formData.append(\"token\", token);\n        formData.append(\"name\", this.name);\n        formData.append(\"address\", this.address);\n        formData.append(\"phone\", this.phone);\n        formData.append(\"password\", this.password);\n        formData.append(\"gender\", this.gender);\n        formData.append(\"pincode\", this.pincode);\n        formData.append(\"profilePhoto\", this.profilePhoto);\n        const res = await axios.post(\"http://localhost:5000/api/staff/register\", formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n        this.message = res.data.message || \"Registration successful!\";\n        this.submitted = true;\n\n        // Redirect after 2 seconds\n        setTimeout(() => {\n          this.$router.push(\"/check-mail\"); // replace with your route\n        }, 2000);\n      } catch (err) {\n        if (err.response?.data?.alreadySubmitted) {\n          this.message = \"You have already submitted.\";\n          this.submitted = true;\n        } else {\n          this.message = err.response?.data?.message || \"Error submitting registration\";\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","name","address","phone","password","gender","pincode","profilePhoto","profilePhotoPreview","message","submitted","methods","onFileChange","e","file","target","files","URL","createObjectURL","register","token","$route","query","formData","FormData","append","res","post","headers","setTimeout","$router","push","err","response","alreadySubmitted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffRegister.vue"],"sourcesContent":["<template>\n  <div class=\"staff-register\">\n    <h2>Complete Your Registration</h2>\n\n    <!-- Show message first -->\n    <p v-if=\"message\" class=\"message\">{{ message }}</p>\n\n    <!-- Form disabled if submitted -->\n    <form\n      v-if=\"!submitted\"\n      @submit.prevent=\"register\"\n      enctype=\"multipart/form-data\"\n    >\n      <div class=\"form-grid\">\n        <!-- Left column -->\n        <div>\n          <label>Name *</label>\n          <input v-model=\"name\" placeholder=\"Enter your full name\" required />\n\n          <label>Address *</label>\n          <input v-model=\"address\" placeholder=\"Enter your address\" required />\n\n          <label>Phone *</label>\n          <input v-model=\"phone\" placeholder=\"Enter phone number\" required />\n\n          <label>Password *</label>\n          <input\n            type=\"password\"\n            v-model=\"password\"\n            placeholder=\"Enter password\"\n            required\n          />\n        </div>\n\n        <!-- Right column -->\n        <div>\n          <label>Gender *</label>\n          <select v-model=\"gender\" required>\n            <option disabled value=\"\">Select gender</option>\n            <option value=\"male\">Male</option>\n            <option value=\"female\">Female</option>\n            <option value=\"other\">Other</option>\n          </select>\n\n          <label>Pincode *</label>\n          <input v-model=\"pincode\" placeholder=\"Enter postal pincode\" required />\n\n          <label>Profile Photo *</label>\n          <input type=\"file\" @change=\"onFileChange\" accept=\"image/*\" required />\n\n          <!-- Show preview -->\n          <div v-if=\"profilePhotoPreview\" class=\"preview\">\n            <img :src=\"profilePhotoPreview\" alt=\"Profile Preview\" />\n          </div>\n        </div>\n      </div>\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      address: \"\",\n      phone: \"\",\n      password: \"\",\n      gender: \"\",\n      pincode: \"\",\n      profilePhoto: null,\n      profilePhotoPreview: null,\n      message: \"\",\n      submitted: false, // track submission\n    };\n  },\n  methods: {\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (file) {\n        this.profilePhoto = file;\n        this.profilePhotoPreview = URL.createObjectURL(file);\n      }\n    },\n    async register() {\n      const token = this.$route.query.token;\n      if (!token) {\n        this.message = \"Invalid or expired link\";\n        return;\n      }\n\n      if (this.submitted) {\n        this.message = \"You have already submitted.\";\n        return;\n      }\n\n      try {\n        const formData = new FormData();\n        formData.append(\"token\", token);\n        formData.append(\"name\", this.name);\n        formData.append(\"address\", this.address);\n        formData.append(\"phone\", this.phone);\n        formData.append(\"password\", this.password);\n        formData.append(\"gender\", this.gender);\n        formData.append(\"pincode\", this.pincode);\n        formData.append(\"profilePhoto\", this.profilePhoto);\n\n        const res = await axios.post(\n          \"http://localhost:5000/api/staff/register\",\n          formData,\n          { headers: { \"Content-Type\": \"multipart/form-data\" } }\n        );\n\n        this.message = res.data.message || \"Registration successful!\";\n        this.submitted = true;\n\n        // Redirect after 2 seconds\n        setTimeout(() => {\n          this.$router.push(\"/check-mail\"); // replace with your route\n        }, 2000);\n      } catch (err) {\n        if (err.response?.data?.alreadySubmitted) {\n          this.message = \"You have already submitted.\";\n          this.submitted = true;\n        } else {\n          this.message =\n            err.response?.data?.message || \"Error submitting registration\";\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.staff-register {\n  max-width: 800px;\n  margin: 30px auto;\n  padding: 30px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n  text-align: center;\n  margin-bottom: 25px;\n  font-size: 24px;\n  color: #2d3748;\n}\n\n.message {\n  text-align: center;\n  font-weight: bold;\n  color: #4cafef;\n  margin-bottom: 15px;\n}\n\n.form-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\nlabel {\n  display: block;\n  font-weight: 600;\n  margin-bottom: 6px;\n  color: #333;\n}\n\ninput,\nselect {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 15px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  outline: none;\n  font-size: 14px;\n  transition: border 0.3s;\n}\n\ninput:focus,\nselect:focus {\n  border-color: #4cafef;\n}\n\nbutton {\n  margin-top: 15px;\n  width: 100%;\n  padding: 12px;\n  background: #4cafef;\n  color: #fff;\n  font-size: 16px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: background 0.3s;\n}\n\nbutton:hover {\n  background: #3a9bdc;\n}\n\n.preview img {\n  margin-top: 10px;\n  max-width: 100px;\n  border-radius: 8px;\n}\n</style>\n"],"mappings":";;;;AA+DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE,EAAE;MACXC,YAAY,EAAE,IAAI;MAClBC,mBAAmB,EAAE,IAAI;MACzBC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE,KAAK,CAAE;IACpB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,YAAYA,CAACC,CAAC,EAAE;MACd,MAAMC,IAAG,GAAID,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR,IAAI,CAACP,YAAW,GAAIO,IAAI;QACxB,IAAI,CAACN,mBAAkB,GAAIS,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;MACtD;IACF,CAAC;IACD,MAAMK,QAAQA,CAAA,EAAG;MACf,MAAMC,KAAI,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,KAAK;MACrC,IAAI,CAACA,KAAK,EAAE;QACV,IAAI,CAACX,OAAM,GAAI,yBAAyB;QACxC;MACF;MAEA,IAAI,IAAI,CAACC,SAAS,EAAE;QAClB,IAAI,CAACD,OAAM,GAAI,6BAA6B;QAC5C;MACF;MAEA,IAAI;QACF,MAAMc,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;QAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEL,KAAK,CAAC;QAC/BG,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACxB,IAAI,CAAC;QAClCsB,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAACvB,OAAO,CAAC;QACxCqB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACtB,KAAK,CAAC;QACpCoB,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,IAAI,CAACrB,QAAQ,CAAC;QAC1CmB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,IAAI,CAACpB,MAAM,CAAC;QACtCkB,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAACnB,OAAO,CAAC;QACxCiB,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAE,IAAI,CAAClB,YAAY,CAAC;QAElD,MAAMmB,GAAE,GAAI,MAAM3B,KAAK,CAAC4B,IAAI,CAC1B,0CAA0C,EAC1CJ,QAAQ,EACR;UAAEK,OAAO,EAAE;YAAE,cAAc,EAAE;UAAsB;QAAE,CACvD,CAAC;QAED,IAAI,CAACnB,OAAM,GAAIiB,GAAG,CAAC1B,IAAI,CAACS,OAAM,IAAK,0BAA0B;QAC7D,IAAI,CAACC,SAAQ,GAAI,IAAI;;QAErB;QACAmB,UAAU,CAAC,MAAM;UACf,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,aAAa,CAAC,EAAE;QACpC,CAAC,EAAE,IAAI,CAAC;MACV,EAAE,OAAOC,GAAG,EAAE;QACZ,IAAIA,GAAG,CAACC,QAAQ,EAAEjC,IAAI,EAAEkC,gBAAgB,EAAE;UACxC,IAAI,CAACzB,OAAM,GAAI,6BAA6B;UAC5C,IAAI,CAACC,SAAQ,GAAI,IAAI;QACvB,OAAO;UACL,IAAI,CAACD,OAAM,GACTuB,GAAG,CAACC,QAAQ,EAAEjC,IAAI,EAAES,OAAM,IAAK,+BAA+B;QAClE;MACF;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}