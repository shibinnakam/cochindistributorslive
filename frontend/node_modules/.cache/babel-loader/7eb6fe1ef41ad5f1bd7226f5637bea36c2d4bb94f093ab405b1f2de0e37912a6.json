{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"form-wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"form-card\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-group full-width\"\n};\nconst _hoisted_8 = {\n  class: \"form-group full-width\"\n};\nconst _hoisted_9 = {\n  class: \"form-group full-width\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"image-preview-container\"\n};\nconst _hoisted_11 = [\"src\"];\nconst _hoisted_12 = {\n  key: 1,\n  class: \"image-preview-container\"\n};\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  class: \"form-group full-width button-group\"\n};\nconst _hoisted_15 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"h2\", {\n    class: \"form-title\"\n  }, \"Edit Product\", -1 /* CACHED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers((...args) => $options.updateProduct && $options.updateProduct(...args), [\"prevent\"])),\n    enctype: \"multipart/form-data\",\n    class: \"form-grid\"\n  }, [_createCommentVNode(\" Row 1: Name & Quantity \"), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.name = $event),\n    type: \"text\",\n    placeholder: \"Item Name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.name]])]), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.quantity = $event),\n    type: \"number\",\n    min: \"0\",\n    placeholder: \"Quantity\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.quantity, void 0, {\n    number: true\n  }]])]), _createCommentVNode(\" Row 2: Original Price & Discount Price \"), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.originalPrice = $event),\n    type: \"number\",\n    placeholder: \"Original Price\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.originalPrice, void 0, {\n    number: true\n  }]])]), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.discountPrice = $event),\n    type: \"number\",\n    placeholder: \"Discount Price\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.discountPrice, void 0, {\n    number: true\n  }]])]), _createCommentVNode(\" Row 3: Description (Full Width) \"), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.description = $event),\n    placeholder: \"Description (4-20 chars)\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.description]])]), _createCommentVNode(\" Row 4: File Upload \"), _createElementVNode(\"div\", _hoisted_8, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Product Image\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    id: \"image\",\n    type: \"file\",\n    onChange: _cache[5] || (_cache[5] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args)),\n    accept: \"image/*\"\n  }, null, 32 /* NEED_HYDRATION */)]), _createCommentVNode(\" New Row: 3D Model Upload \"), _createElementVNode(\"div\", _hoisted_9, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"3D Model (.glb, .gltf) - Optional\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    id: \"model3D\",\n    type: \"file\",\n    onChange: _cache[6] || (_cache[6] = (...args) => _ctx.handleModelUpload && _ctx.handleModelUpload(...args)),\n    accept: \".glb,.gltf\"\n  }, null, 32 /* NEED_HYDRATION */)]), _createCommentVNode(\" Current Image Preview \"), $data.form.image && !$data.imageFile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"img\", {\n    src: $options.getImageUrl($data.form.image),\n    alt: \"Current Product\",\n    class: \"image-preview\"\n  }, null, 8 /* PROPS */, _hoisted_11)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" New Image Preview \"), $data.newImagePreview ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"img\", {\n    src: $data.newImagePreview,\n    alt: \"New Preview\",\n    class: \"image-preview\"\n  }, null, 8 /* PROPS */, _hoisted_13)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Row 5: Submit Button (Full Width) \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $data.loading,\n    class: \"btn-submit\"\n  }, _toDisplayString($data.loading ? \"Updating...\" : \"Update Product\"), 9 /* TEXT, PROPS */, _hoisted_15)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","updateProduct","enctype","_createCommentVNode","_hoisted_3","$data","form","name","$event","type","placeholder","_hoisted_4","quantity","min","number","_hoisted_5","originalPrice","_hoisted_6","discountPrice","_hoisted_7","description","_hoisted_8","id","onChange","handleFileUpload","accept","_hoisted_9","_ctx","handleModelUpload","image","imageFile","_hoisted_10","src","getImageUrl","alt","newImagePreview","_hoisted_12","_hoisted_14","disabled","loading","_hoisted_15"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\ProductEdit.vue"],"sourcesContent":["<template>\n  <div class=\"form-wrapper\">\n    <div class=\"form-card\">\n      <h2 class=\"form-title\">Edit Product</h2>\n      <form\n        @submit.prevent=\"updateProduct\"\n        enctype=\"multipart/form-data\"\n        class=\"form-grid\"\n      >\n        <!-- Row 1: Name & Quantity -->\n        <div class=\"form-group\">\n          <input v-model=\"form.name\" type=\"text\" placeholder=\"Item Name\" />\n        </div>\n        <div class=\"form-group\">\n          <input\n            v-model.number=\"form.quantity\"\n            type=\"number\"\n            min=\"0\"\n            placeholder=\"Quantity\"\n          />\n        </div>\n\n        <!-- Row 2: Original Price & Discount Price -->\n        <div class=\"form-group\">\n          <input\n            v-model.number=\"form.originalPrice\"\n            type=\"number\"\n            placeholder=\"Original Price\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <input\n            v-model.number=\"form.discountPrice\"\n            type=\"number\"\n            placeholder=\"Discount Price\"\n          />\n        </div>\n\n        <!-- Row 3: Description (Full Width) -->\n        <div class=\"form-group full-width\">\n          <textarea\n            v-model=\"form.description\"\n            placeholder=\"Description (4-20 chars)\"\n          ></textarea>\n        </div>\n\n        <!-- Row 4: File Upload -->\n        <div class=\"form-group full-width\">\n          <label>Product Image</label>\n          <input\n            id=\"image\"\n            type=\"file\"\n            @change=\"handleFileUpload\"\n            accept=\"image/*\"\n          />\n        </div>\n\n        <!-- New Row: 3D Model Upload -->\n        <div class=\"form-group full-width\">\n          <label>3D Model (.glb, .gltf) - Optional</label>\n          <input\n            id=\"model3D\"\n            type=\"file\"\n            @change=\"handleModelUpload\"\n            accept=\".glb,.gltf\"\n          />\n        </div>\n\n        <!-- Current Image Preview -->\n        <div v-if=\"form.image && !imageFile\" class=\"image-preview-container\">\n          <img\n            :src=\"getImageUrl(form.image)\"\n            alt=\"Current Product\"\n            class=\"image-preview\"\n          />\n        </div>\n\n        <!-- New Image Preview -->\n        <div v-if=\"newImagePreview\" class=\"image-preview-container\">\n          <img :src=\"newImagePreview\" alt=\"New Preview\" class=\"image-preview\" />\n        </div>\n\n        <!-- Row 5: Submit Button (Full Width) -->\n        <div class=\"form-group full-width button-group\">\n          <button type=\"submit\" :disabled=\"loading\" class=\"btn-submit\">\n            {{ loading ? \"Updating...\" : \"Update Product\" }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProductEdit\",\n  props: {\n    productId: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      form: {\n        name: \"\",\n        description: \"\",\n        originalPrice: null,\n        discountPrice: null,\n        quantity: null,\n        image: \"\",\n      },\n      imageFile: null,\n      newImagePreview: null,\n      loading: false,\n    };\n  },\n  async mounted() {\n    await this.fetchProduct();\n  },\n  methods: {\n    getImageUrl(path) {\n      return path.startsWith(\"/\") ? `http://localhost:5000${path}` : path;\n    },\n    async fetchProduct() {\n      try {\n        const res = await axios.get(\n          `http://localhost:5000/api/products/getproduct/${this.productId}`\n        );\n        if (res.data.success) {\n          const product = res.data.product;\n          this.form = {\n            name: product.name,\n            description: product.description,\n            originalPrice: product.originalPrice,\n            discountPrice: product.discountPrice,\n            quantity: product.quantity,\n            image: product.image || \"\",\n          };\n        }\n      } catch (err) {\n        console.error(\n          \"Error fetching product:\",\n          err.response?.data || err.message\n        );\n      }\n    },\n    handleFileUpload(e) {\n      this.imageFile = e.target.files[0];\n      if (this.imageFile) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.newImagePreview = event.target.result;\n        };\n        reader.readAsDataURL(this.imageFile);\n      }\n    },\n    async updateProduct() {\n      this.loading = true;\n      try {\n        const formData = new FormData();\n\n        Object.keys(this.form).forEach((key) => {\n          if (this.form[key] !== null && this.form[key] !== \"\") {\n            if (key !== \"image\") {\n              formData.append(key, this.form[key]);\n            }\n          }\n        });\n\n        if (this.imageFile) {\n          formData.append(\"image\", this.imageFile);\n        }\n\n        const res = await axios.put(\n          `http://localhost:5000/api/products/updateproduct/${this.productId}`,\n          formData,\n          { headers: { \"Content-Type\": \"multipart/form-data\" } }\n        );\n\n        if (res.data.success) {\n          this.$emit(\"updated\");\n        }\n      } catch (err) {\n        console.error(err.response?.data || err.message);\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.form-wrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 80vh;\n}\n\n.form-card {\n  background: #fff;\n  padding: 20px;\n  width: 100%;\n  border-radius: 12px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n}\n\n.form-title {\n  text-align: center;\n  margin-bottom: 16px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1e293b;\n}\n\n.form-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n}\n\n.form-group.full-width {\n  grid-column: 1 / -1;\n}\n\n.form-group label {\n  font-size: 12px;\n  font-weight: 500;\n  color: #475569;\n  margin-bottom: 4px;\n}\n\n.form-group input,\n.form-group textarea,\n.form-group select {\n  padding: 8px 10px;\n  border: 1px solid #cbd5e1;\n  border-radius: 6px;\n  font-size: 13px;\n  font-family: inherit;\n  transition: border-color 0.2s;\n}\n\n.form-group input:focus,\n.form-group textarea:focus,\n.form-group select:focus {\n  outline: none;\n  border-color: #2563eb;\n  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n}\n\n.form-group textarea {\n  resize: none;\n  height: 70px;\n  min-height: 70px;\n}\n\n.btn-submit {\n  background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);\n  color: white;\n  font-weight: 600;\n  border: none;\n  cursor: pointer;\n  padding: 10px 16px;\n  border-radius: 6px;\n  transition: all 0.3s ease;\n  width: 100%;\n}\n\n.btn-submit:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);\n}\n\n.btn-submit:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.image-preview-container {\n  grid-column: 1 / -1;\n  display: flex;\n  justify-content: center;\n  padding: 8px 0;\n}\n\n.image-preview {\n  max-width: 120px;\n  max-height: 120px;\n  border-radius: 8px;\n  border: 2px solid #e2e8f0;\n  object-fit: contain;\n}\n\n.button-group {\n  margin-top: 8px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}