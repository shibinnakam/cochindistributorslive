{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  name: \"AdminLeaves\",\n  data() {\n    return {\n      leaves: [],\n      showDeleteModal: false,\n      deleteId: null\n    };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      try {\n        const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n        if (res.ok) {\n          this.leaves = await res.json();\n        }\n      } catch (err) {\n        console.error(\"Error fetching leaves:\", err);\n      }\n    },\n    async updateStatus(id, status) {\n      try {\n        const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n          method: \"PATCH\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            status\n          })\n        });\n        if (res.ok) {\n          const updatedLeave = await res.json();\n          this.leaves = this.leaves.map(l => l._id === id ? updatedLeave : l);\n        }\n      } catch (err) {\n        console.error(\"Error updating status:\", err);\n      }\n    },\n    openDeleteModal(id) {\n      this.deleteId = id;\n      this.showDeleteModal = true;\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteId = null;\n    },\n    async confirmDelete() {\n      if (!this.deleteId) return;\n      try {\n        const res = await fetch(`http://localhost:5000/api/leaves/delete/${this.deleteId}`, {\n          method: \"DELETE\"\n        });\n        if (res.ok) {\n          this.leaves = this.leaves.filter(l => l._id !== this.deleteId);\n          this.closeDeleteModal();\n        }\n      } catch (err) {\n        console.error(\"Error deleting leave:\", err);\n      }\n    },\n    formatDate(date) {\n      if (!date) return \"-\";\n      return new Date(date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\"\n      });\n    },\n    getProcessedDate(leave) {\n      if (leave.status === \"Approved\" && leave.approvedDate) {\n        return this.formatDate(leave.approvedDate);\n      } else if (leave.status === \"Rejected\" && leave.rejectedDate) {\n        return this.formatDate(leave.rejectedDate);\n      }\n      return \"-\";\n    },\n    getStatusClass(status) {\n      switch (status) {\n        case \"Approved\":\n          return \"status-approved\";\n        case \"Rejected\":\n          return \"status-rejected\";\n        default:\n          return \"status-pending\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","leaves","showDeleteModal","deleteId","created","fetchLeaves","methods","res","fetch","ok","json","err","console","error","updateStatus","id","status","method","headers","body","JSON","stringify","updatedLeave","map","l","_id","openDeleteModal","closeDeleteModal","confirmDelete","filter","formatDate","date","Date","toLocaleDateString","year","month","day","getProcessedDate","leave","approvedDate","rejectedDate","getStatusClass"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\n  <div class=\"page-wrapper\">\n    <div class=\"content-container\">\n      <h2 class=\"page-title\">Leave Management</h2>\n\n      <div class=\"table-card\">\n        <h3 class=\"card-title\">Staff Leave Requests</h3>\n\n        <div class=\"table-responsive\">\n          <table class=\"leave-table\">\n            <thead>\n              <tr>\n                <th>Staff Email</th>\n                <th>Reason</th>\n                <th>Requested Date</th>\n                <th>Status</th>\n                <th>Processed On</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-if=\"leaves.length === 0\">\n                <td colspan=\"6\" class=\"empty-state\">\n                  No leave requests found.\n                </td>\n              </tr>\n              <tr v-for=\"leave in leaves\" :key=\"leave._id\">\n                <td>\n                  <div class=\"email-cell\">\n                    <i class=\"fas fa-user-circle user-icon\"></i>\n                    {{ leave.email }}\n                  </div>\n                </td>\n                <td class=\"reason-cell\">{{ leave.reason }}</td>\n                <td class=\"date-cell\">{{ formatDate(leave.date) }}</td>\n                <td>\n                  <span :class=\"['badge', getStatusClass(leave.status)]\">\n                    {{ leave.status }}\n                  </span>\n                </td>\n                <td class=\"date-cell\">\n                  {{ getProcessedDate(leave) }}\n                </td>\n                <td>\n                  <div class=\"action-buttons\">\n                    <template v-if=\"leave.status === 'Pending'\">\n                      <button\n                        @click=\"updateStatus(leave._id, 'Approved')\"\n                        class=\"btn-icon approve\"\n                        title=\"Approve\"\n                      >\n                        <i class=\"fas fa-check\"></i>\n                      </button>\n                      <button\n                        @click=\"updateStatus(leave._id, 'Rejected')\"\n                        class=\"btn-icon reject\"\n                        title=\"Reject\"\n                      >\n                        <i class=\"fas fa-times\"></i>\n                      </button>\n                    </template>\n                    <button\n                      @click=\"openDeleteModal(leave._id)\"\n                      class=\"btn-icon delete\"\n                      title=\"Delete\"\n                    >\n                      <i class=\"fas fa-trash-alt\"></i>\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\">\n      <div class=\"modal-content\">\n        <button class=\"modal-close\" @click=\"closeDeleteModal\">Ã—</button>\n        <div class=\"modal-header\">\n          <h3>Confirm Deletion</h3>\n        </div>\n        <div class=\"modal-body\">\n          <p>Are you sure you want to delete this leave record?</p>\n          <p class=\"warning-text\">This action cannot be undone.</p>\n        </div>\n        <div class=\"modal-footer\">\n          <button class=\"btn-cancel\" @click=\"closeDeleteModal\">Cancel</button>\n          <button class=\"btn-delete\" @click=\"confirmDelete\">Delete</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AdminLeaves\",\n  data() {\n    return {\n      leaves: [],\n      showDeleteModal: false,\n      deleteId: null,\n    };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      try {\n        const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n        if (res.ok) {\n          this.leaves = await res.json();\n        }\n      } catch (err) {\n        console.error(\"Error fetching leaves:\", err);\n      }\n    },\n    async updateStatus(id, status) {\n      try {\n        const res = await fetch(\n          `http://localhost:5000/api/leaves/update/${id}`,\n          {\n            method: \"PATCH\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ status }),\n          }\n        );\n        if (res.ok) {\n          const updatedLeave = await res.json();\n          this.leaves = this.leaves.map((l) =>\n            l._id === id ? updatedLeave : l\n          );\n        }\n      } catch (err) {\n        console.error(\"Error updating status:\", err);\n      }\n    },\n    openDeleteModal(id) {\n      this.deleteId = id;\n      this.showDeleteModal = true;\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteId = null;\n    },\n    async confirmDelete() {\n      if (!this.deleteId) return;\n      try {\n        const res = await fetch(\n          `http://localhost:5000/api/leaves/delete/${this.deleteId}`,\n          {\n            method: \"DELETE\",\n          }\n        );\n        if (res.ok) {\n          this.leaves = this.leaves.filter((l) => l._id !== this.deleteId);\n          this.closeDeleteModal();\n        }\n      } catch (err) {\n        console.error(\"Error deleting leave:\", err);\n      }\n    },\n    formatDate(date) {\n      if (!date) return \"-\";\n      return new Date(date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n    getProcessedDate(leave) {\n      if (leave.status === \"Approved\" && leave.approvedDate) {\n        return this.formatDate(leave.approvedDate);\n      } else if (leave.status === \"Rejected\" && leave.rejectedDate) {\n        return this.formatDate(leave.rejectedDate);\n      }\n      return \"-\";\n    },\n    getStatusClass(status) {\n      switch (status) {\n        case \"Approved\":\n          return \"status-approved\";\n        case \"Rejected\":\n          return \"status-rejected\";\n        default:\n          return \"status-pending\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Page Layout */\n.page-wrapper {\n  min-height: 100vh;\n  background-color: #f1f5f9;\n  padding: 40px 20px;\n  font-family: \"Segoe UI\", Tahoma, Geneva, Verdana, sans-serif;\n}\n\n.content-container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.page-title {\n  font-size: 28px;\n  font-weight: 700;\n  color: #1e293b;\n  margin-bottom: 30px;\n  border-bottom: 2px solid #e2e8f0;\n  padding-bottom: 15px;\n}\n\n/* Card */\n.table-card {\n  background: #ffffff;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  padding: 25px;\n  border: 1px solid #e2e8f0;\n}\n\n.card-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #334155;\n  margin-bottom: 20px;\n}\n\n/* Table Styles */\n.table-responsive {\n  overflow-x: auto;\n}\n\n.leave-table {\n  width: 100%;\n  border-collapse: collapse;\n  min-width: 800px;\n}\n\n.leave-table th {\n  text-align: left;\n  padding: 12px 16px;\n  font-size: 13px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: #64748b;\n  background-color: #f8fafc;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.leave-table td {\n  padding: 16px;\n  border-bottom: 1px solid #f1f5f9;\n  vertical-align: middle;\n  color: #334155;\n  font-size: 14px;\n}\n\n.leave-table tr:last-child td {\n  border-bottom: none;\n}\n\n.leave-table tr:hover td {\n  background-color: #f8fafc;\n}\n\n.email-cell {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-weight: 500;\n  color: #0f172a;\n}\n\n.user-icon {\n  color: #94a3b8;\n  font-size: 16px;\n}\n\n.reason-cell {\n  max-width: 250px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #475569;\n}\n\n.date-cell {\n  color: #64748b;\n  font-family: \"Segoe UI Mono\", monospace; /* Monospace for alignment */\n  font-size: 13px;\n}\n\n/* Status Badges */\n.badge {\n  display: inline-block;\n  padding: 4px 10px;\n  border-radius: 99px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.status-approved {\n  background-color: #dcfce7;\n  color: #166534;\n}\n\n.status-rejected {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n.status-pending {\n  background-color: #fef3c7;\n  color: #92400e;\n}\n\n/* Actions */\n.action-buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.btn-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 14px;\n}\n\n.approve {\n  background-color: #dcfce7;\n  color: #166534;\n}\n\n.approve:hover {\n  background-color: #bbf7d0;\n  transform: translateY(-1px);\n}\n\n.reject {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n.reject:hover {\n  background-color: #fecaca;\n  transform: translateY(-1px);\n}\n\n.delete {\n  background-color: #f1f5f9;\n  color: #64748b;\n}\n\n.delete:hover {\n  background-color: #e2e8f0;\n  color: #ef4444;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px !important;\n  color: #94a3b8;\n  font-style: italic;\n}\n\n/* Modal */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(15, 23, 42, 0.6);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 50;\n}\n\n.modal-content {\n  background: white;\n  width: 90%;\n  max-width: 400px;\n  border-radius: 12px;\n  padding: 0;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  position: relative;\n  overflow: hidden;\n}\n\n.modal-header {\n  padding: 20px 24px;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.modal-header h3 {\n  margin: 0;\n  font-size: 18px;\n  color: #1e293b;\n}\n\n.modal-body {\n  padding: 24px;\n}\n\n.modal-body p {\n  margin: 0 0 10px;\n  color: #475569;\n}\n\n.warning-text {\n  color: #ef4444 !important;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.modal-footer {\n  padding: 16px 24px;\n  background-color: #f8fafc;\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n\n.modal-close {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: transparent;\n  border: none;\n  font-size: 24px;\n  line-height: 1;\n  color: #94a3b8;\n  cursor: pointer;\n}\n\n.btn-cancel,\n.btn-delete {\n  padding: 10px 16px;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  border: none;\n  font-size: 14px;\n}\n\n.btn-cancel {\n  background: white;\n  border: 1px solid #cbd5e1;\n  color: #475569;\n}\n\n.btn-cancel:hover {\n  background: #f1f5f9;\n}\n\n.btn-delete {\n  background: #ef4444;\n  color: white;\n}\n\n.btn-delete:hover {\n  background: #dc2626;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}