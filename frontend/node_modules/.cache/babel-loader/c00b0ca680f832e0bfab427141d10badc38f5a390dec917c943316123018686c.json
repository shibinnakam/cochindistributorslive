{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: []\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status\n      });\n      this.fetchStaff();\n    },\n    // 沒 Export single staff with full details\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      doc.setFontSize(18);\n      doc.text(\"Staff Details\", 14, 20);\n      autoTable(doc, {\n        startY: 30,\n        head: [[\"Field\", \"Value\"]],\n        body: [[\"Name\", staff.name || \"窶能"], [\"Email\", staff.email], [\"Phone\", staff.phone || \"窶能"], [\"Gender\", staff.gender || \"窶能"], [\"Address\", staff.address || \"窶能"], [\"Pincode\", staff.pincode || \"窶能"], [\"Date of Joining\", staff.dateOfJoining ? new Date(staff.dateOfJoining).toLocaleDateString() : \"窶能"], [\"Status\", staff.status]]\n      });\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    // 沒 Export all staff in one PDF\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      doc.setFontSize(18);\n      doc.text(\"Staff Report\", 14, 20);\n      autoTable(doc, {\n        startY: 30,\n        head: [[\"Name\", \"Email\", \"Phone\", \"Gender\", \"Address\", \"Pincode\", \"Date of Joining\", \"Status\"]],\n        body: this.staff.map(s => [s.name || \"窶能", s.email, s.phone || \"窶能", s.gender || \"窶能", s.address || \"窶能", s.pincode || \"窶能", s.dateOfJoining ? new Date(s.dateOfJoining).toLocaleDateString() : \"窶能", s.status || \"窶能"])\n      });\n      doc.save(\"staff-report.pdf\");\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","autoTable","data","email","staff","methods","fetchStaff","res","get","inviteStaff","post","alert","approveStaff","id","put","setStatus","status","exportStaffPDF","doc","setFontSize","text","startY","head","body","name","phone","gender","address","pincode","dateOfJoining","Date","toLocaleDateString","save","exportAllStaffPDF","map","s","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"窶能" }}</td>\n          <td>{{ s.phone || \"窶能" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"窶能"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      alert(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id) {\n      await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n      this.fetchStaff();\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n\n    // 沒 Export single staff with full details\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n\n      doc.setFontSize(18);\n      doc.text(\"Staff Details\", 14, 20);\n\n      autoTable(doc, {\n        startY: 30,\n        head: [[\"Field\", \"Value\"]],\n        body: [\n          [\"Name\", staff.name || \"窶能"],\n          [\"Email\", staff.email],\n          [\"Phone\", staff.phone || \"窶能"],\n          [\"Gender\", staff.gender || \"窶能"],\n          [\"Address\", staff.address || \"窶能"],\n          [\"Pincode\", staff.pincode || \"窶能"],\n          [\n            \"Date of Joining\",\n            staff.dateOfJoining\n              ? new Date(staff.dateOfJoining).toLocaleDateString()\n              : \"窶能",\n          ],\n          [\"Status\", staff.status],\n        ],\n      });\n\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n\n    // 沒 Export all staff in one PDF\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n\n      doc.setFontSize(18);\n      doc.text(\"Staff Report\", 14, 20);\n\n      autoTable(doc, {\n        startY: 30,\n        head: [\n          [\n            \"Name\",\n            \"Email\",\n            \"Phone\",\n            \"Gender\",\n            \"Address\",\n            \"Pincode\",\n            \"Date of Joining\",\n            \"Status\",\n          ],\n        ],\n        body: this.staff.map((s) => [\n          s.name || \"窶能",\n          s.email,\n          s.phone || \"窶能",\n          s.gender || \"窶能",\n          s.address || \"窶能",\n          s.pincode || \"窶能",\n          s.dateOfJoining\n            ? new Date(s.dateOfJoining).toLocaleDateString()\n            : \"窶能",\n          s.status || \"窶能",\n        ]),\n      });\n\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}