{"ast":null,"code":"import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\" // ✅ Success toast\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email\n      });\n      this.showToast(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id, joiningDate) {\n      try {\n        const res = await axios.put(`http://localhost:5000/api/staff/approve/${id}`, {\n          joiningDate\n        });\n        this.fetchStaff();\n        if (res.data.success) {\n          this.showToast(res.data.message);\n        }\n      } catch (err) {\n        this.showToast(err.response?.data?.message || \"Error approving staff\", true);\n      }\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status\n      });\n      this.fetchStaff();\n    },\n    // ✅ Toast helper\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      const toastEl = document.querySelector(\".toast\");\n      if (toastEl) {\n        toastEl.style.background = isError ? \"#f56565\" : \"#48bb78\"; // red for error, green for success\n      }\n      setTimeout(() => this.toastMessage = \"\", 3000);\n    },\n    // PDF export methods unchanged\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(\"staff-report.pdf\");\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","autoTable","data","email","staff","toastMessage","methods","fetchStaff","res","get","inviteStaff","post","showToast","approveStaff","id","joiningDate","put","success","message","err","response","setStatus","status","isError","toastEl","document","querySelector","style","background","setTimeout","exportStaffPDF","doc","save","name","exportAllStaffPDF","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Success Toast -->\n    <div v-if=\"toastMessage\" class=\"toast\">{{ toastMessage }}</div>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <!-- Approve with custom joining date -->\n            <div v-if=\"s.status === 'pending'\">\n              <input type=\"date\" v-model=\"s.joiningDate\" />\n              <button @click=\"approveStaff(s._id, s.joiningDate)\">\n                Approve\n              </button>\n            </div>\n\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\", // ✅ Success toast\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      const res = await axios.get(\"http://localhost:5000/api/staff\");\n      this.staff = res.data.staff;\n    },\n    async inviteStaff() {\n      await axios.post(\"http://localhost:5000/api/staff/invite\", {\n        email: this.email,\n      });\n      this.showToast(\"Invitation sent!\");\n      this.email = \"\";\n      this.fetchStaff();\n    },\n    async approveStaff(id, joiningDate) {\n      try {\n        const res = await axios.put(\n          `http://localhost:5000/api/staff/approve/${id}`,\n          { joiningDate }\n        );\n        this.fetchStaff();\n        if (res.data.success) {\n          this.showToast(res.data.message);\n        }\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error approving staff\",\n          true\n        );\n      }\n    },\n    async setStatus(id, status) {\n      await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n        status,\n      });\n      this.fetchStaff();\n    },\n\n    // ✅ Toast helper\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      const toastEl = document.querySelector(\".toast\");\n      if (toastEl) {\n        toastEl.style.background = isError ? \"#f56565\" : \"#48bb78\"; // red for error, green for success\n      }\n      setTimeout(() => (this.toastMessage = \"\"), 3000);\n    },\n\n    // PDF export methods unchanged\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing code ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n"],"mappings":"AA+EA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,SAAQ,MAAO,iBAAiB;AAEvC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAE,EAAE,CAAE;IACpB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,MAAMC,GAAE,GAAI,MAAMT,KAAK,CAACU,GAAG,CAAC,iCAAiC,CAAC;MAC9D,IAAI,CAACL,KAAI,GAAII,GAAG,CAACN,IAAI,CAACE,KAAK;IAC7B,CAAC;IACD,MAAMM,WAAWA,CAAA,EAAG;MAClB,MAAMX,KAAK,CAACY,IAAI,CAAC,wCAAwC,EAAE;QACzDR,KAAK,EAAE,IAAI,CAACA;MACd,CAAC,CAAC;MACF,IAAI,CAACS,SAAS,CAAC,kBAAkB,CAAC;MAClC,IAAI,CAACT,KAAI,GAAI,EAAE;MACf,IAAI,CAACI,UAAU,CAAC,CAAC;IACnB,CAAC;IACD,MAAMM,YAAYA,CAACC,EAAE,EAAEC,WAAW,EAAE;MAClC,IAAI;QACF,MAAMP,GAAE,GAAI,MAAMT,KAAK,CAACiB,GAAG,CACzB,2CAA2CF,EAAE,EAAE,EAC/C;UAAEC;QAAY,CAChB,CAAC;QACD,IAAI,CAACR,UAAU,CAAC,CAAC;QACjB,IAAIC,GAAG,CAACN,IAAI,CAACe,OAAO,EAAE;UACpB,IAAI,CAACL,SAAS,CAACJ,GAAG,CAACN,IAAI,CAACgB,OAAO,CAAC;QAClC;MACF,EAAE,OAAOC,GAAG,EAAE;QACZ,IAAI,CAACP,SAAS,CACZO,GAAG,CAACC,QAAQ,EAAElB,IAAI,EAAEgB,OAAM,IAAK,uBAAuB,EACtD,IACF,CAAC;MACH;IACF,CAAC;IACD,MAAMG,SAASA,CAACP,EAAE,EAAEQ,MAAM,EAAE;MAC1B,MAAMvB,KAAK,CAACiB,GAAG,CAAC,0CAA0CF,EAAE,EAAE,EAAE;QAC9DQ;MACF,CAAC,CAAC;MACF,IAAI,CAACf,UAAU,CAAC,CAAC;IACnB,CAAC;IAED;IACAK,SAASA,CAACM,OAAO,EAAEK,OAAM,GAAI,KAAK,EAAE;MAClC,IAAI,CAAClB,YAAW,GAAIa,OAAO;MAC3B,MAAMM,OAAM,GAAIC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAChD,IAAIF,OAAO,EAAE;QACXA,OAAO,CAACG,KAAK,CAACC,UAAS,GAAIL,OAAM,GAAI,SAAQ,GAAI,SAAS,EAAE;MAC9D;MACAM,UAAU,CAAC,MAAO,IAAI,CAACxB,YAAW,GAAI,EAAG,EAAE,IAAI,CAAC;IAClD,CAAC;IAED;IACAyB,cAAcA,CAAC1B,KAAK,EAAE;MACpB,MAAM2B,GAAE,GAAI,IAAI/B,KAAK,CAAC,CAAC;MACvB;MACA+B,GAAG,CAACC,IAAI,CAAC,GAAG5B,KAAK,CAAC6B,IAAG,IAAK,OAAO,cAAc,CAAC;IAClD,CAAC;IACDC,iBAAiBA,CAAA,EAAG;MAClB,MAAMH,GAAE,GAAI,IAAI/B,KAAK,CAAC,CAAC;MACvB;MACA+B,GAAG,CAACC,IAAI,CAAC,kBAAkB,CAAC;IAC9B;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC5B,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}