{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", null, \"Leave Requests\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.leaves, leave => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: leave._id,\n      class: \"leave-card\"\n    }, [_createElementVNode(\"p\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"Email:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(leave.email), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"strong\", null, \"Reason:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(leave.reason), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Requested Date:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(new Date(leave.date).toLocaleDateString()), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Status:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(leave.status), 1 /* TEXT */)]), _createCommentVNode(\" Show Approved Date \"), leave.approvedDate ? (_openBlock(), _createElementBlock(\"p\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Approved On:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(new Date(leave.approvedDate).toLocaleString()), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Show Rejected Date \"), leave.rejectedDate ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Rejected On:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(new Date(leave.rejectedDate).toLocaleString()), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Action Buttons \"), leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.updateStatus(leave._id, 'Approved')\n    }, \" Approve \", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 3,\n      onClick: $event => $options.updateStatus(leave._id, 'Rejected')\n    }, \" Reject \", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","_Fragment","_renderList","$data","leaves","leave","key","_id","class","_toDisplayString","email","reason","Date","date","toLocaleDateString","status","_createCommentVNode","approvedDate","_hoisted_1","toLocaleString","rejectedDate","_hoisted_2","onClick","$event","$options","updateStatus","_hoisted_3","_hoisted_4"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>Leave Requests</h2>\n    <div v-for=\"leave in leaves\" :key=\"leave._id\" class=\"leave-card\">\n      <p><strong>Email:</strong> {{ leave.email }}</p>\n      <p><strong>Reason:</strong> {{ leave.reason }}</p>\n      <p>\n        <strong>Requested Date:</strong>\n        {{ new Date(leave.date).toLocaleDateString() }}\n      </p>\n      <p><strong>Status:</strong> {{ leave.status }}</p>\n\n      <!-- Show Approved Date -->\n      <p v-if=\"leave.approvedDate\">\n        <strong>Approved On:</strong>\n        {{ new Date(leave.approvedDate).toLocaleString() }}\n      </p>\n\n      <!-- Show Rejected Date -->\n      <p v-if=\"leave.rejectedDate\">\n        <strong>Rejected On:</strong>\n        {{ new Date(leave.rejectedDate).toLocaleString() }}\n      </p>\n\n      <!-- Action Buttons -->\n      <button\n        v-if=\"leave.status === 'Pending'\"\n        @click=\"updateStatus(leave._id, 'Approved')\"\n      >\n        Approve\n      </button>\n      <button\n        v-if=\"leave.status === 'Pending'\"\n        @click=\"updateStatus(leave._id, 'Rejected')\"\n      >\n        Reject\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return { leaves: [] };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status }),\n      });\n      const updatedLeave = await res.json();\n\n      // Replace only the updated leave (fixed Prettier formatting)\n      this.leaves = this.leaves.map((l) => (l._id === id ? updatedLeave : l));\n    },\n  },\n};\n</script>\n\n<style scoped>\n.leave-card {\n  border: 1px solid #ddd;\n  padding: 10px;\n  margin: 10px 0;\n  border-radius: 8px;\n  background: #f9f9f9;\n}\nbutton {\n  margin-right: 10px;\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\nbutton:first-of-type {\n  background-color: #4caf50;\n  color: white;\n}\nbutton:last-of-type {\n  background-color: #f44336;\n  color: white;\n}\n</style>\n"],"mappings":";;;;;;;;;;uBACEA,mBAAA,CAqCM,c,0BApCJC,mBAAA,CAAuB,YAAnB,gBAAc,sB,kBAClBD,mBAAA,CAkCME,SAAA,QAAAC,WAAA,CAlCeC,KAAA,CAAAC,MAAM,EAAfC,KAAK;yBAAjBN,mBAAA,CAkCM;MAlCwBO,GAAG,EAAED,KAAK,CAACE,GAAG;MAAEC,KAAK,EAAC;QAClDR,mBAAA,CAAgD,Y,0BAA7CA,mBAAA,CAAuB,gBAAf,QAAM,qB,iBAAS,GAAC,GAAAS,gBAAA,CAAGJ,KAAK,CAACK,KAAK,iB,GACzCV,mBAAA,CAAkD,Y,0BAA/CA,mBAAA,CAAwB,gBAAhB,SAAO,qB,iBAAS,GAAC,GAAAS,gBAAA,CAAGJ,KAAK,CAACM,MAAM,iB,GAC3CX,mBAAA,CAGI,Y,0BAFFA,mBAAA,CAAgC,gBAAxB,iBAAe,qB,iBAAS,GAChC,GAAAS,gBAAA,KAAOG,IAAI,CAACP,KAAK,CAACQ,IAAI,EAAEC,kBAAkB,mB,GAE5Cd,mBAAA,CAAkD,Y,0BAA/CA,mBAAA,CAAwB,gBAAhB,SAAO,qB,iBAAS,GAAC,GAAAS,gBAAA,CAAGJ,KAAK,CAACU,MAAM,iB,GAE3CC,mBAAA,wBAA2B,EAClBX,KAAK,CAACY,YAAY,I,cAA3BlB,mBAAA,CAGI,KAAAmB,UAAA,G,0BAFFlB,mBAAA,CAA6B,gBAArB,cAAY,qB,iBAAS,GAC7B,GAAAS,gBAAA,KAAOG,IAAI,CAACP,KAAK,CAACY,YAAY,EAAEE,cAAc,mB,wCAGhDH,mBAAA,wBAA2B,EAClBX,KAAK,CAACe,YAAY,I,cAA3BrB,mBAAA,CAGI,KAAAsB,UAAA,G,0BAFFrB,mBAAA,CAA6B,gBAArB,cAAY,qB,iBAAS,GAC7B,GAAAS,gBAAA,KAAOG,IAAI,CAACP,KAAK,CAACe,YAAY,EAAED,cAAc,mB,wCAGhDH,mBAAA,oBAAuB,EAEfX,KAAK,CAACU,MAAM,kB,cADpBhB,mBAAA,CAKS;;MAHNuB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAACpB,KAAK,CAACE,GAAG;OAC/B,WAED,iBAAAmB,UAAA,K,mCAEQrB,KAAK,CAACU,MAAM,kB,cADpBhB,mBAAA,CAKS;;MAHNuB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAACpB,KAAK,CAACE,GAAG;OAC/B,UAED,iBAAAoB,UAAA,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}