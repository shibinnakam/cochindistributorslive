{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"leave-table\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = {\n  key: 3\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"h2\", null, \"Leave Requests\", -1 /* CACHED */)), _createElementVNode(\"table\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Staff Name\"), _createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Reason\"), _createElementVNode(\"th\", null, \"Requested Date\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Approved Date\"), _createElementVNode(\"th\", null, \"Rejected Date\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.leaves, leave => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: leave._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(leave.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.reason), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(new Date(leave.date).toLocaleDateString()), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(leave.status), 1 /* TEXT */), leave.approvedDate ? (_openBlock(), _createElementBlock(\"td\", _hoisted_2, _toDisplayString(new Date(leave.approvedDate).toLocaleString()), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"td\", _hoisted_3, \"-\")), leave.rejectedDate ? (_openBlock(), _createElementBlock(\"td\", _hoisted_4, _toDisplayString(new Date(leave.rejectedDate).toLocaleString()), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"td\", _hoisted_5, \"-\")), _createElementVNode(\"td\", null, [leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.updateStatus(leave._id, 'Approved')\n    }, \" Approve \", 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true), leave.status === 'Pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.updateStatus(leave._id, 'Rejected')\n    }, \" Reject \", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_Fragment","_renderList","$data","leaves","leave","key","_id","_toDisplayString","name","email","reason","Date","date","toLocaleDateString","status","approvedDate","_hoisted_2","toLocaleString","_hoisted_3","rejectedDate","_hoisted_4","_hoisted_5","onClick","$event","$options","updateStatus","_hoisted_6","_hoisted_7"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>Leave Requests</h2>\n\n    <table class=\"leave-table\">\n      <thead>\n        <tr>\n          <th>Staff Name</th>\n          <th>Email</th>\n          <th>Reason</th>\n          <th>Requested Date</th>\n          <th>Status</th>\n          <th>Approved Date</th>\n          <th>Rejected Date</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"leave in leaves\" :key=\"leave._id\">\n          <td>{{ leave.name }}</td>\n          <td>{{ leave.email }}</td>\n          <td>{{ leave.reason }}</td>\n          <td>{{ new Date(leave.date).toLocaleDateString() }}</td>\n          <td>{{ leave.status }}</td>\n          <td v-if=\"leave.approvedDate\">\n            {{ new Date(leave.approvedDate).toLocaleString() }}\n          </td>\n          <td v-else>-</td>\n          <td v-if=\"leave.rejectedDate\">\n            {{ new Date(leave.rejectedDate).toLocaleString() }}\n          </td>\n          <td v-else>-</td>\n          <td>\n            <button\n              v-if=\"leave.status === 'Pending'\"\n              @click=\"updateStatus(leave._id, 'Approved')\"\n            >\n              Approve\n            </button>\n            <button\n              v-if=\"leave.status === 'Pending'\"\n              @click=\"updateStatus(leave._id, 'Rejected')\"\n            >\n              Reject\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return { leaves: [] };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status }),\n      });\n      const updatedLeave = await res.json();\n\n      // Replace only the updated leave in the list\n      this.leaves = this.leaves.map((l) => (l._id === id ? updatedLeave : l));\n    },\n  },\n};\n</script>\n\n<style scoped>\n.leave-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\n.leave-table th,\n.leave-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\n\n.leave-table th {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\nbutton {\n  margin: 2px;\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\nbutton:first-of-type {\n  background-color: #4caf50;\n  color: white;\n}\n\nbutton:last-of-type {\n  background-color: #f44336;\n  color: white;\n}\n</style>\n"],"mappings":";;EAIWA,KAAK,EAAC;AAAa;;;;;;;;;;;;;;;;uBAH5BC,mBAAA,CAgDM,c,0BA/CJC,mBAAA,CAAuB,YAAnB,gBAAc,qBAElBA,mBAAA,CA4CQ,SA5CRC,UA4CQ,G,0BA3CND,mBAAA,CAWQ,gBAVNA,mBAAA,CASK,aARHA,mBAAA,CAAmB,YAAf,YAAU,GACdA,mBAAA,CAAc,YAAV,OAAK,GACTA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAuB,YAAnB,gBAAc,GAClBA,mBAAA,CAAe,YAAX,QAAM,GACVA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAgB,YAAZ,SAAO,E,uBAGfA,mBAAA,CA8BQ,iB,kBA7BND,mBAAA,CA4BKG,SAAA,QAAAC,WAAA,CA5BeC,KAAA,CAAAC,MAAM,EAAfC,KAAK;yBAAhBP,mBAAA,CA4BK;MA5BwBQ,GAAG,EAAED,KAAK,CAACE;QACtCR,mBAAA,CAAyB,YAAAS,gBAAA,CAAlBH,KAAK,CAACI,IAAI,kBACjBV,mBAAA,CAA0B,YAAAS,gBAAA,CAAnBH,KAAK,CAACK,KAAK,kBAClBX,mBAAA,CAA2B,YAAAS,gBAAA,CAApBH,KAAK,CAACM,MAAM,kBACnBZ,mBAAA,CAAwD,YAAAS,gBAAA,KAA7CI,IAAI,CAACP,KAAK,CAACQ,IAAI,EAAEC,kBAAkB,oBAC9Cf,mBAAA,CAA2B,YAAAS,gBAAA,CAApBH,KAAK,CAACU,MAAM,kBACTV,KAAK,CAACW,YAAY,I,cAA5BlB,mBAAA,CAEK,MAAAmB,UAAA,EAAAT,gBAAA,KADII,IAAI,CAACP,KAAK,CAACW,YAAY,EAAEE,cAAc,uB,cAEhDpB,mBAAA,CAAiB,MAAAqB,UAAA,EAAN,GAAC,IACFd,KAAK,CAACe,YAAY,I,cAA5BtB,mBAAA,CAEK,MAAAuB,UAAA,EAAAb,gBAAA,KADII,IAAI,CAACP,KAAK,CAACe,YAAY,EAAEF,cAAc,uB,cAEhDpB,mBAAA,CAAiB,MAAAwB,UAAA,EAAN,GAAC,IACZvB,mBAAA,CAaK,aAXKM,KAAK,CAACU,MAAM,kB,cADpBjB,mBAAA,CAKS;;MAHNyB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAACrB,KAAK,CAACE,GAAG;OAC/B,WAED,iBAAAoB,UAAA,K,mCAEQtB,KAAK,CAACU,MAAM,kB,cADpBjB,mBAAA,CAKS;;MAHNyB,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAACrB,KAAK,CAACE,GAAG;OAC/B,UAED,iBAAAqB,UAAA,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}