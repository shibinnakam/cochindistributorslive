{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-register\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"message\"\n};\nconst _hoisted_3 = {\n  class: \"form-grid\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"preview\"\n};\nconst _hoisted_5 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[17] || (_cache[17] = _createElementVNode(\"h2\", null, \"Complete Your Registration\", -1 /* CACHED */)), _createCommentVNode(\" Show message first \"), $data.message ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, _toDisplayString($data.message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Form disabled if submitted \"), !$data.submitted ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 1,\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers((...args) => $options.register && $options.register(...args), [\"prevent\"])),\n    enctype: \"multipart/form-data\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Left column \"), _createElementVNode(\"div\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Name *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n    placeholder: \"Enter your full name\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.name]]), _cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Address *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.address = $event),\n    placeholder: \"Enter your address\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.address]]), _cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Phone *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.phone = $event),\n    placeholder: \"Enter phone number\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.phone]]), _cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"Password *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.password = $event),\n    placeholder: \"Enter password\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])]), _createCommentVNode(\" Right column \"), _createElementVNode(\"div\", null, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"Gender *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.gender = $event),\n    required: \"\"\n  }, _cache[12] || (_cache[12] = [_createElementVNode(\"option\", {\n    disabled: \"\",\n    value: \"\"\n  }, \"Select gender\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"male\"\n  }, \"Male\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"female\"\n  }, \"Female\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"other\"\n  }, \"Other\", -1 /* CACHED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.gender]]), _cache[14] || (_cache[14] = _createElementVNode(\"label\", null, \"Pincode *\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.pincode = $event),\n    placeholder: \"Enter postal pincode\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.pincode]]), _cache[15] || (_cache[15] = _createElementVNode(\"label\", null, \"Profile Photo *\", -1 /* CACHED */)), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[6] || (_cache[6] = (...args) => $options.onFileChange && $options.onFileChange(...args)),\n    accept: \"image/*\",\n    required: \"\"\n  }, null, 32 /* NEED_HYDRATION */), _createCommentVNode(\" Show preview \"), $data.profilePhotoPreview ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $data.profilePhotoPreview,\n    alt: \"Profile Preview\"\n  }, null, 8 /* PROPS */, _hoisted_5)])) : _createCommentVNode(\"v-if\", true)])]), _cache[16] || (_cache[16] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Submit\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","message","_hoisted_2","_toDisplayString","submitted","onSubmit","_cache","_withModifiers","args","$options","register","enctype","_hoisted_3","name","$event","placeholder","required","address","phone","type","password","gender","disabled","value","pincode","onChange","onFileChange","accept","profilePhotoPreview","_hoisted_4","src","alt"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffRegister.vue"],"sourcesContent":["<template>\n  <div class=\"staff-register\">\n    <h2>Complete Your Registration</h2>\n\n    <!-- Show message first -->\n    <p v-if=\"message\" class=\"message\">{{ message }}</p>\n\n    <!-- Form disabled if submitted -->\n    <form\n      v-if=\"!submitted\"\n      @submit.prevent=\"register\"\n      enctype=\"multipart/form-data\"\n    >\n      <div class=\"form-grid\">\n        <!-- Left column -->\n        <div>\n          <label>Name *</label>\n          <input v-model=\"name\" placeholder=\"Enter your full name\" required />\n\n          <label>Address *</label>\n          <input v-model=\"address\" placeholder=\"Enter your address\" required />\n\n          <label>Phone *</label>\n          <input v-model=\"phone\" placeholder=\"Enter phone number\" required />\n\n          <label>Password *</label>\n          <input\n            type=\"password\"\n            v-model=\"password\"\n            placeholder=\"Enter password\"\n            required\n          />\n        </div>\n\n        <!-- Right column -->\n        <div>\n          <label>Gender *</label>\n          <select v-model=\"gender\" required>\n            <option disabled value=\"\">Select gender</option>\n            <option value=\"male\">Male</option>\n            <option value=\"female\">Female</option>\n            <option value=\"other\">Other</option>\n          </select>\n\n          <label>Pincode *</label>\n          <input\n            v-model=\"pincode\"\n            placeholder=\"Enter postal pincode\"\n            required\n          />\n\n          <label>Profile Photo *</label>\n          <input type=\"file\" @change=\"onFileChange\" accept=\"image/*\" required />\n\n          <!-- Show preview -->\n          <div v-if=\"profilePhotoPreview\" class=\"preview\">\n            <img :src=\"profilePhotoPreview\" alt=\"Profile Preview\" />\n          </div>\n        </div>\n      </div>\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      address: \"\",\n      phone: \"\",\n      password: \"\",\n      gender: \"\",\n      pincode: \"\",\n      profilePhoto: null,\n      profilePhotoPreview: null,\n      message: \"\",\n      submitted: false, // track submission\n    };\n  },\n  methods: {\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (file) {\n        this.profilePhoto = file;\n        this.profilePhotoPreview = URL.createObjectURL(file);\n      }\n    },\n    async register() {\n      const token = this.$route.query.token;\n      if (!token) {\n        this.message = \"Invalid or expired link\";\n        return;\n      }\n\n      if (this.submitted) {\n        this.message = \"You have already submitted.\";\n        return;\n      }\n\n      try {\n        const formData = new FormData();\n        formData.append(\"token\", token);\n        formData.append(\"name\", this.name);\n        formData.append(\"address\", this.address);\n        formData.append(\"phone\", this.phone);\n        formData.append(\"password\", this.password);\n        formData.append(\"gender\", this.gender);\n        formData.append(\"pincode\", this.pincode);\n        formData.append(\"profilePhoto\", this.profilePhoto);\n\n        const res = await axios.post(\n          \"http://localhost:5000/api/staff/register\",\n          formData,\n          { headers: { \"Content-Type\": \"multipart/form-data\" } }\n        );\n\n        this.message = res.data.message || \"Registration successful!\";\n        this.submitted = true;\n\n        // Redirect if backend provides redirect URL\n        if (res.data.redirect) {\n          setTimeout(() => {\n            this.$router.push(res.data.redirect);\n          }, 2000); // 2 seconds delay\n        }\n      } catch (err) {\n        if (err.response?.data?.alreadySubmitted) {\n          this.message = \"You have already submitted.\";\n          this.submitted = true;\n        } else {\n          this.message =\n            err.response?.data?.message || \"Error submitting registration\";\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.staff-register {\n  max-width: 800px;\n  margin: 30px auto;\n  padding: 30px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n  text-align: center;\n  margin-bottom: 25px;\n  font-size: 24px;\n  color: #2d3748;\n}\n\n.message {\n  text-align: center;\n  font-weight: bold;\n  color: #4cafef;\n  margin-bottom: 15px;\n}\n\n.form-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\nlabel {\n  display: block;\n  font-weight: 600;\n  margin-bottom: 6px;\n  color: #333;\n}\n\ninput,\nselect {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 15px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  outline: none;\n  font-size: 14px;\n  transition: border 0.3s;\n}\n\ninput:focus,\nselect:focus {\n  border-color: #4cafef;\n}\n\nbutton {\n  margin-top: 15px;\n  width: 100%;\n  padding: 12px;\n  background: #4cafef;\n  color: #fff;\n  font-size: 16px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: background 0.3s;\n}\n\nbutton:hover {\n  background: #3a9bdc;\n}\n\n.preview img {\n  margin-top: 10px;\n  max-width: 100px;\n  border-radius: 8px;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;;EAIPA,KAAK,EAAC;;;EAQjBA,KAAK,EAAC;AAAW;;;EA0CcA,KAAK,EAAC;;;;uBAtD9CC,mBAAA,CA8DM,OA9DNC,UA8DM,G,4BA7DJC,mBAAA,CAAmC,YAA/B,4BAA0B,qBAE9BC,mBAAA,wBAA2B,EAClBC,KAAA,CAAAC,OAAO,I,cAAhBL,mBAAA,CAAmD,KAAnDM,UAAmD,EAAAC,gBAAA,CAAdH,KAAA,CAAAC,OAAO,oB,mCAE5CF,mBAAA,gCAAmC,E,CAE1BC,KAAA,CAAAI,SAAS,I,cADlBR,mBAAA,CAsDO;;IApDJS,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,QAAA,IAAAD,QAAA,CAAAC,QAAA,IAAAF,IAAA,CAAQ;IACzBG,OAAO,EAAC;MAERb,mBAAA,CA8CM,OA9CNc,UA8CM,GA7CJb,mBAAA,iBAAoB,EACpBD,mBAAA,CAiBM,c,0BAhBJA,mBAAA,CAAqB,eAAd,QAAM,qB,gBACbA,mBAAA,CAAoE;+DAApDE,KAAA,CAAAa,IAAI,GAAAC,MAAA;IAAEC,WAAW,EAAC,sBAAsB;IAACC,QAAQ,EAAR;iDAAzChB,KAAA,CAAAa,IAAI,E,6BAEpBf,mBAAA,CAAwB,eAAjB,WAAS,qB,gBAChBA,mBAAA,CAAqE;+DAArDE,KAAA,CAAAiB,OAAO,GAAAH,MAAA;IAAEC,WAAW,EAAC,oBAAoB;IAACC,QAAQ,EAAR;iDAA1ChB,KAAA,CAAAiB,OAAO,E,+BAEvBnB,mBAAA,CAAsB,eAAf,SAAO,qB,gBACdA,mBAAA,CAAmE;+DAAnDE,KAAA,CAAAkB,KAAK,GAAAJ,MAAA;IAAEC,WAAW,EAAC,oBAAoB;IAACC,QAAQ,EAAR;iDAAxChB,KAAA,CAAAkB,KAAK,E,+BAErBpB,mBAAA,CAAyB,eAAlB,YAAU,qB,gBACjBA,mBAAA,CAKE;IAJAqB,IAAI,EAAC,UAAU;+DACNnB,KAAA,CAAAoB,QAAQ,GAAAN,MAAA;IACjBC,WAAW,EAAC,gBAAgB;IAC5BC,QAAQ,EAAR;iDAFShB,KAAA,CAAAoB,QAAQ,E,KAMrBrB,mBAAA,kBAAqB,EACrBD,mBAAA,CAuBM,c,4BAtBJA,mBAAA,CAAuB,eAAhB,UAAQ,qB,gBACfA,mBAAA,CAKS;+DALQE,KAAA,CAAAqB,MAAM,GAAAP,MAAA;IAAEE,QAAQ,EAAR;kCACvBlB,mBAAA,CAAgD;IAAxCwB,QAAQ,EAAR,EAAQ;IAACC,KAAK,EAAC;KAAG,eAAa,oBACvCzB,mBAAA,CAAkC;IAA1ByB,KAAK,EAAC;EAAM,GAAC,MAAI,oBACzBzB,mBAAA,CAAsC;IAA9ByB,KAAK,EAAC;EAAQ,GAAC,QAAM,oBAC7BzB,mBAAA,CAAoC;IAA5ByB,KAAK,EAAC;EAAO,GAAC,OAAK,mB,2CAJZvB,KAAA,CAAAqB,MAAM,E,+BAOvBvB,mBAAA,CAAwB,eAAjB,WAAS,qB,gBAChBA,mBAAA,CAIE;+DAHSE,KAAA,CAAAwB,OAAO,GAAAV,MAAA;IAChBC,WAAW,EAAC,sBAAsB;IAClCC,QAAQ,EAAR;iDAFShB,KAAA,CAAAwB,OAAO,E,+BAKlB1B,mBAAA,CAA8B,eAAvB,iBAAe,qBACtBA,mBAAA,CAAsE;IAA/DqB,IAAI,EAAC,MAAM;IAAEM,QAAM,EAAAnB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAiB,YAAA,IAAAjB,QAAA,CAAAiB,YAAA,IAAAlB,IAAA,CAAY;IAAEmB,MAAM,EAAC,SAAS;IAACX,QAAQ,EAAR;qCAE3DjB,mBAAA,kBAAqB,EACVC,KAAA,CAAA4B,mBAAmB,I,cAA9BhC,mBAAA,CAEM,OAFNiC,UAEM,GADJ/B,mBAAA,CAAwD;IAAlDgC,GAAG,EAAE9B,KAAA,CAAA4B,mBAAmB;IAAEG,GAAG,EAAC;8GAK1CjC,mBAAA,CAAqC;IAA7BqB,IAAI,EAAC;EAAQ,GAAC,QAAM,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}