{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  data() {\n    return {\n      leaves: []\n    };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          status\n        })\n      });\n      const updatedLeave = await res.json();\n      this.leaves = this.leaves.map(l => l._id === id ? updatedLeave : l);\n    },\n    async deleteLeave(id) {\n      if (!confirm(\"Are you sure you want to delete this leave?\")) return;\n      await fetch(`http://localhost:5000/api/leaves/delete/${id}`, {\n        method: \"DELETE\"\n      });\n      this.leaves = this.leaves.filter(l => l._id !== id);\n    }\n  }\n};","map":{"version":3,"names":["data","leaves","created","fetchLeaves","methods","res","fetch","json","updateStatus","id","status","method","headers","body","JSON","stringify","updatedLeave","map","l","_id","deleteLeave","confirm","filter"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\n  <div class=\"admin-leaves\">\n    <!-- Top Header -->\n    <div class=\"top-header\">\n      <h1>LEAVE REQUESTS</h1>\n    </div>\n\n    <!-- Header Section -->\n    <div class=\"header-section\">\n      <div class=\"header-controls\">\n        <div class=\"search-filter\">\n          <div class=\"search-box\">\n            <input\n              v-model=\"searchQuery\"\n              type=\"text\"\n              placeholder=\"Search by email...\"\n              class=\"search-input\"\n            />\n            <i class=\"search-icon\">üîç</i>\n          </div>\n          <select v-model=\"statusFilter\" class=\"status-filter\">\n            <option value=\"\">All Status</option>\n            <option value=\"Pending\">Pending</option>\n            <option value=\"Approved\">Approved</option>\n            <option value=\"Rejected\">Rejected</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <!-- Toast Notification -->\n    <div\n      v-if=\"toastMessage\"\n      :class=\"['toast', toastError ? 'error' : 'success']\"\n    >\n      {{ toastMessage }}\n    </div>\n\n    <!-- Table Container -->\n    <div class=\"table-container\">\n      <table class=\"leave-table\">\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Reason</th>\n            <th>Requested Date</th>\n            <th>Status</th>\n            <th>Approved Date</th>\n            <th>Rejected Date</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"leave in filteredLeaves\" :key=\"leave._id\">\n            <td class=\"email-cell\">{{ leave.email }}</td>\n            <td class=\"reason-cell\">{{ leave.reason }}</td>\n            <td class=\"date-cell\">{{ new Date(leave.date).toLocaleDateString() }}</td>\n            <td class=\"status-cell\">\n              <span :class=\"['status-badge', leave.status.toLowerCase()]\">\n                {{ leave.status }}\n              </span>\n            </td>\n            <td class=\"date-cell\">\n              {{\n                leave.approvedDate\n                  ? new Date(leave.approvedDate).toLocaleDateString()\n                  : \"-\"\n              }}\n            </td>\n            <td class=\"date-cell\">\n              {{\n                leave.rejectedDate\n                  ? new Date(leave.rejectedDate).toLocaleDateString()\n                  : \"-\"\n              }}\n            </td>\n            <td class=\"actions-cell\">\n              <div class=\"action-menu\">\n                <button\n                  @click=\"toggleMenu(leave._id)\"\n                  class=\"menu-trigger\"\n                  title=\"More options\"\n                >\n                  ‚ãÆ\n                </button>\n                <div v-if=\"activeMenu === leave._id\" class=\"dropdown-menu\">\n                  <button\n                    v-if=\"leave.status === 'Pending'\"\n                    @click=\"updateStatus(leave._id, 'Approved')\"\n                    class=\"menu-item approve\"\n                  >\n                    ‚úì Approve\n                  </button>\n                  <button\n                    v-if=\"leave.status === 'Pending'\"\n                    @click=\"updateStatus(leave._id, 'Rejected')\"\n                    class=\"menu-item reject\"\n                  >\n                    ‚úï Reject\n                  </button>\n                  <button\n                    @click=\"openDeleteModal(leave._id)\"\n                    class=\"menu-item delete\"\n                  >\n                    üóëÔ∏è Delete\n                  </button>\n                </div>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div v-if=\"filteredLeaves.length === 0\" class=\"no-data\">\n        No leave requests found\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\" @click=\"cancelDelete\">\n      <div class=\"modal-delete\" @click.stop>\n        <div class=\"delete-icon\">‚ö†Ô∏è</div>\n        <h3>Delete Leave Request</h3>\n        <p>Are you sure you want to delete this leave request?</p>\n        <p class=\"warning\">This action cannot be undone.</p>\n        <div class=\"modal-actions-delete\">\n          <button @click=\"confirmDelete\" class=\"btn-delete-confirm\">\n            Delete\n          </button>\n          <button @click=\"cancelDelete\" class=\"btn-delete-cancel\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      leaves: [],\n    };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status }),\n      });\n      const updatedLeave = await res.json();\n      this.leaves = this.leaves.map((l) => (l._id === id ? updatedLeave : l));\n    },\n    async deleteLeave(id) {\n      if (!confirm(\"Are you sure you want to delete this leave?\")) return;\n\n      await fetch(`http://localhost:5000/api/leaves/delete/${id}`, {\n        method: \"DELETE\",\n      });\n      this.leaves = this.leaves.filter((l) => l._id !== id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.leave-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\n.leave-table th,\n.leave-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\n\n.leave-table th {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\nbutton {\n  margin: 2px;\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\nbutton:first-of-type {\n  background-color: #4caf50;\n  color: white;\n}\n\nbutton:nth-of-type(2) {\n  background-color: #f44336;\n  color: white;\n}\n\n.delete-btn {\n  background-color: #555;\n  color: white;\n}\n</style>\n"],"mappings":";;;AA0IA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,WAAW,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,WAAWA,CAAA,EAAG;MAClB,MAAME,GAAE,GAAI,MAAMC,KAAK,CAAC,sCAAsC,CAAC;MAC/D,IAAI,CAACL,MAAK,GAAI,MAAMI,GAAG,CAACE,IAAI,CAAC,CAAC;IAChC,CAAC;IACD,MAAMC,YAAYA,CAACC,EAAE,EAAEC,MAAM,EAAE;MAC7B,MAAML,GAAE,GAAI,MAAMC,KAAK,CAAC,2CAA2CG,EAAE,EAAE,EAAE;QACvEE,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEL;QAAO,CAAC;MACjC,CAAC,CAAC;MACF,MAAMM,YAAW,GAAI,MAAMX,GAAG,CAACE,IAAI,CAAC,CAAC;MACrC,IAAI,CAACN,MAAK,GAAI,IAAI,CAACA,MAAM,CAACgB,GAAG,CAAEC,CAAC,IAAMA,CAAC,CAACC,GAAE,KAAMV,EAAC,GAAIO,YAAW,GAAIE,CAAE,CAAC;IACzE,CAAC;IACD,MAAME,WAAWA,CAACX,EAAE,EAAE;MACpB,IAAI,CAACY,OAAO,CAAC,6CAA6C,CAAC,EAAE;MAE7D,MAAMf,KAAK,CAAC,2CAA2CG,EAAE,EAAE,EAAE;QAC3DE,MAAM,EAAE;MACV,CAAC,CAAC;MACF,IAAI,CAACV,MAAK,GAAI,IAAI,CAACA,MAAM,CAACqB,MAAM,CAAEJ,CAAC,IAAKA,CAAC,CAACC,GAAE,KAAMV,EAAE,CAAC;IACvD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}