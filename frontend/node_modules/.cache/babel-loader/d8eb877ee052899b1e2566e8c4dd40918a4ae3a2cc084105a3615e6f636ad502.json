{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"modal-header\"\n};\nconst _hoisted_2 = {\n  class: \"modal-body\"\n};\nconst _hoisted_3 = {\n  class: \"balance-section\"\n};\nconst _hoisted_4 = {\n  class: \"balance-card\"\n};\nconst _hoisted_5 = {\n  class: \"balance-amount\"\n};\nconst _hoisted_6 = {\n  class: \"amount\"\n};\nconst _hoisted_7 = {\n  class: \"add-money-section\"\n};\nconst _hoisted_8 = {\n  class: \"add-money-form\"\n};\nconst _hoisted_9 = {\n  class: \"amount-input-group\"\n};\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n  class: \"quick-amounts\"\n};\nconst _hoisted_13 = {\n  class: \"amount-buttons\"\n};\nconst _hoisted_14 = [\"disabled\"];\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"wallet-modal-overlay\",\n    onClick: _cache[8] || (_cache[8] = $event => _ctx.$emit('close'))\n  }, [_createElementVNode(\"div\", {\n    class: \"wallet-modal\",\n    onClick: _cache[7] || (_cache[7] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", _hoisted_1, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", null, \"My Wallet\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"close-btn\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('close'))\n  }, \"✕\")]), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Wallet Balance \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"Current Balance\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", {\n    class: \"currency\"\n  }, \"₹\", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($data.balance), 1 /* TEXT */)])])]), _createCommentVNode(\" Add Money Section \"), _createElementVNode(\"div\", _hoisted_7, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"Add Money to Wallet\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"amount\"\n  }, \"Enter Amount (₹)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    id: \"amount\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.addAmount = $event),\n    placeholder: \"Enter amount\",\n    min: \"1\",\n    max: \"10000\",\n    disabled: $data.loading\n  }, null, 8 /* PROPS */, _hoisted_10), [[_vModelText, $data.addAmount]])]), _createElementVNode(\"button\", {\n    class: \"add-money-btn\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.addMoney && $options.addMoney(...args)),\n    disabled: $data.loading || !$data.addAmount || $data.addAmount < 1\n  }, _toDisplayString($data.loading ? \"Processing...\" : \"Add Money\"), 9 /* TEXT, PROPS */, _hoisted_11)])]), _createCommentVNode(\" Quick Amount Buttons \"), _createElementVNode(\"div\", _hoisted_12, [_cache[14] || (_cache[14] = _createElementVNode(\"p\", null, \"Quick Add:\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = $event => $options.setAmount(100)),\n    disabled: $data.loading\n  }, \"₹100\", 8 /* PROPS */, _hoisted_14), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = $event => $options.setAmount(500)),\n    disabled: $data.loading\n  }, \"₹500\", 8 /* PROPS */, _hoisted_15), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = $event => $options.setAmount(1000)),\n    disabled: $data.loading\n  }, \"₹1000\", 8 /* PROPS */, _hoisted_16), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = $event => $options.setAmount(2000)),\n    disabled: $data.loading\n  }, \"₹2000\", 8 /* PROPS */, _hoisted_17)])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","onClick","_cache","$event","_ctx","$emit","_createElementVNode","_withModifiers","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","$data","balance","_hoisted_7","_hoisted_8","_hoisted_9","for","type","id","addAmount","placeholder","min","max","disabled","loading","args","$options","addMoney","_hoisted_11","_hoisted_12","_hoisted_13","setAmount","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\WalletPage.vue"],"sourcesContent":["<template>\n  <div class=\"wallet-modal-overlay\" @click=\"$emit('close')\">\n    <div class=\"wallet-modal\" @click.stop>\n      <div class=\"modal-header\">\n        <h2>My Wallet</h2>\n        <button class=\"close-btn\" @click=\"$emit('close')\">✕</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Wallet Balance -->\n        <div class=\"balance-section\">\n          <div class=\"balance-card\">\n            <h3>Current Balance</h3>\n            <div class=\"balance-amount\">\n              <span class=\"currency\">₹</span>\n              <span class=\"amount\">{{ balance }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Add Money Section -->\n        <div class=\"add-money-section\">\n          <h3>Add Money to Wallet</h3>\n          <div class=\"add-money-form\">\n            <div class=\"amount-input-group\">\n              <label for=\"amount\">Enter Amount (₹)</label>\n              <input\n                type=\"number\"\n                id=\"amount\"\n                v-model=\"addAmount\"\n                placeholder=\"Enter amount\"\n                min=\"1\"\n                max=\"10000\"\n                :disabled=\"loading\"\n              />\n            </div>\n            <button\n              class=\"add-money-btn\"\n              @click=\"addMoney\"\n              :disabled=\"loading || !addAmount || addAmount < 1\"\n            >\n              {{ loading ? \"Processing...\" : \"Add Money\" }}\n            </button>\n          </div>\n        </div>\n\n        <!-- Quick Amount Buttons -->\n        <div class=\"quick-amounts\">\n          <p>Quick Add:</p>\n          <div class=\"amount-buttons\">\n            <button @click=\"setAmount(100)\" :disabled=\"loading\">₹100</button>\n            <button @click=\"setAmount(500)\" :disabled=\"loading\">₹500</button>\n            <button @click=\"setAmount(1000)\" :disabled=\"loading\">₹1000</button>\n            <button @click=\"setAmount(2000)\" :disabled=\"loading\">₹2000</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"WalletPage\",\n  data() {\n    return {\n      balance: 0,\n      addAmount: \"\",\n      loading: false,\n    };\n  },\n  mounted() {\n    this.fetchBalance();\n  },\n  methods: {\n    async fetchBalance() {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.get(\n          \"http://localhost:5000/api/wallet/balance\",\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n        if (res.data.success) {\n          this.balance = res.data.balance;\n        }\n      } catch (err) {\n        console.error(\"Error fetching balance:\", err);\n        alert(\"Failed to fetch wallet balance\");\n      }\n    },\n\n    setAmount(amount) {\n      this.addAmount = amount;\n    },\n\n    async addMoney() {\n      if (!this.addAmount || this.addAmount < 1) {\n        alert(\"Please enter a valid amount\");\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const token = localStorage.getItem(\"token\");\n\n        // Create Razorpay order\n        const res = await axios.post(\n          \"http://localhost:5000/api/wallet/add-money\",\n          { amount: this.addAmount },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n\n        if (res.data.success) {\n          // Initialize Razorpay checkout\n          const options = {\n            key: res.data.key,\n            amount: res.data.amount,\n            currency: res.data.currency,\n            order_id: res.data.orderId,\n            name: \"Distribution Agency\",\n            description: \"Add Money to Wallet\",\n            handler: async (response) => {\n              // Verify payment\n              await this.verifyPayment(response, res.data.amount);\n            },\n            prefill: {\n              name: \"User\",\n              email: \"user@example.com\",\n            },\n            theme: {\n              color: \"#2874f0\",\n            },\n          };\n\n          const rzp = new window.Razorpay(options);\n          rzp.open();\n        }\n      } catch (err) {\n        console.error(\"Error creating payment order:\", err);\n        alert(\"Failed to initiate payment\");\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    async verifyPayment(razorpayResponse, amount) {\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await axios.post(\n          \"http://localhost:5000/api/wallet/verify-payment\",\n          {\n            razorpay_order_id: razorpayResponse.razorpay_order_id,\n            razorpay_payment_id: razorpayResponse.razorpay_payment_id,\n            razorpay_signature: razorpayResponse.razorpay_signature,\n            amount: amount,\n          },\n          { headers: { Authorization: `Bearer ${token}` } }\n        );\n\n        if (res.data.success) {\n          alert(\"Payment successful! Wallet updated.\");\n          this.balance = res.data.newBalance;\n          this.addAmount = \"\";\n        } else {\n          alert(\"Payment verification failed\");\n        }\n      } catch (err) {\n        console.error(\"Error verifying payment:\", err);\n        alert(\"Payment verification failed\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.wallet-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.wallet-modal {\n  background: white;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #333;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: #666;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-btn:hover {\n  color: #333;\n}\n\n.modal-body {\n  padding: 20px;\n}\n\n.balance-section {\n  margin-bottom: 30px;\n}\n\n.balance-card {\n  background: linear-gradient(135deg, #2874f0, #5ba2f4);\n  color: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n}\n\n.balance-card h3 {\n  margin: 0 0 10px 0;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.balance-amount {\n  display: flex;\n  align-items: baseline;\n  justify-content: center;\n  font-size: 32px;\n  font-weight: bold;\n}\n\n.currency {\n  font-size: 24px;\n  margin-right: 4px;\n}\n\n.add-money-section h3 {\n  margin: 0 0 15px 0;\n  color: #333;\n  font-size: 18px;\n}\n\n.add-money-form {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.amount-input-group {\n  flex: 1;\n}\n\n.amount-input-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n  color: #555;\n}\n\n.amount-input-group input {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 16px;\n}\n\n.amount-input-group input:disabled {\n  background-color: #f5f5f5;\n  cursor: not-allowed;\n}\n\n.add-money-btn {\n  background-color: #ff9f00;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 4px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  white-space: nowrap;\n}\n\n.add-money-btn:hover:not(:disabled) {\n  background-color: #f39400;\n}\n\n.add-money-btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.quick-amounts {\n  border-top: 1px solid #e0e0e0;\n  padding-top: 20px;\n}\n\n.quick-amounts p {\n  margin: 0 0 10px 0;\n  font-weight: 500;\n  color: #555;\n}\n\n.amount-buttons {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.amount-buttons button {\n  background: white;\n  border: 1px solid #2874f0;\n  color: #2874f0;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.amount-buttons button:hover:not(:disabled) {\n  background-color: #2874f0;\n  color: white;\n}\n\n.amount-buttons button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n@media (max-width: 480px) {\n  .wallet-modal {\n    width: 95%;\n    margin: 20px;\n  }\n\n  .add-money-form {\n    flex-direction: column;\n  }\n\n  .add-money-btn {\n    width: 100%;\n  }\n\n  .amount-buttons {\n    justify-content: center;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}