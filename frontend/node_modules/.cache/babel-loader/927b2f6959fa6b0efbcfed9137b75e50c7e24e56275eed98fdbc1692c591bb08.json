{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nexport default {\n  data() {\n    return {\n      leaves: []\n    };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          status\n        })\n      });\n      const updatedLeave = await res.json();\n\n      // Replace only the updated leave\n      this.leaves = this.leaves.map(l => l._id === id ? updatedLeave : l);\n    }\n  }\n};","map":{"version":3,"names":["data","leaves","created","fetchLeaves","methods","res","fetch","json","updateStatus","id","status","method","headers","body","JSON","stringify","updatedLeave","map","l","_id"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\AdminLeaves.vue"],"sourcesContent":["<template>\n  <div>\n    <h2>Leave Requests</h2>\n    <div v-for=\"leave in leaves\" :key=\"leave._id\" class=\"leave-card\">\n      <p><strong>Email:</strong> {{ leave.email }}</p>\n      <p><strong>Reason:</strong> {{ leave.reason }}</p>\n      <p><strong>Requested Date:</strong> {{ new Date(leave.date).toLocaleDateString() }}</p>\n      <p><strong>Status:</strong> {{ leave.status }}</p>\n\n      <!-- Show Approved Date -->\n      <p v-if=\"leave.approvedDate\">\n        <strong>Approved On:</strong>\n        {{ new Date(leave.approvedDate).toLocaleString() }}\n      </p>\n\n      <!-- Show Rejected Date -->\n      <p v-if=\"leave.rejectedDate\">\n        <strong>Rejected On:</strong>\n        {{ new Date(leave.rejectedDate).toLocaleString() }}\n      </p>\n\n      <!-- Action Buttons -->\n      <button\n        v-if=\"leave.status === 'Pending'\"\n        @click=\"updateStatus(leave._id, 'Approved')\"\n      >\n        Approve\n      </button>\n      <button\n        v-if=\"leave.status === 'Pending'\"\n        @click=\"updateStatus(leave._id, 'Rejected')\"\n      >\n        Reject\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return { leaves: [] };\n  },\n  async created() {\n    await this.fetchLeaves();\n  },\n  methods: {\n    async fetchLeaves() {\n      const res = await fetch(\"http://localhost:5000/api/leaves/all\");\n      this.leaves = await res.json();\n    },\n    async updateStatus(id, status) {\n      const res = await fetch(`http://localhost:5000/api/leaves/update/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status }),\n      });\n      const updatedLeave = await res.json();\n\n      // Replace only the updated leave\n      this.leaves = this.leaves.map((l) =>\n        l._id === id ? updatedLeave : l\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n.leave-card {\n  border: 1px solid #ddd;\n  padding: 10px;\n  margin: 10px 0;\n  border-radius: 8px;\n  background: #f9f9f9;\n}\nbutton {\n  margin-right: 10px;\n  padding: 5px 10px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\nbutton:first-of-type {\n  background-color: #4caf50;\n  color: white;\n}\nbutton:last-of-type {\n  background-color: #f44336;\n  color: white;\n}\n</style>\n"],"mappings":";;AAuCA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MAAEC,MAAM,EAAE;IAAG,CAAC;EACvB,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,WAAW,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,WAAWA,CAAA,EAAG;MAClB,MAAME,GAAE,GAAI,MAAMC,KAAK,CAAC,sCAAsC,CAAC;MAC/D,IAAI,CAACL,MAAK,GAAI,MAAMI,GAAG,CAACE,IAAI,CAAC,CAAC;IAChC,CAAC;IACD,MAAMC,YAAYA,CAACC,EAAE,EAAEC,MAAM,EAAE;MAC7B,MAAML,GAAE,GAAI,MAAMC,KAAK,CAAC,2CAA2CG,EAAE,EAAE,EAAE;QACvEE,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEL;QAAO,CAAC;MACjC,CAAC,CAAC;MACF,MAAMM,YAAW,GAAI,MAAMX,GAAG,CAACE,IAAI,CAAC,CAAC;;MAErC;MACA,IAAI,CAACN,MAAK,GAAI,IAAI,CAACA,MAAM,CAACgB,GAAG,CAAEC,CAAC,IAC9BA,CAAC,CAACC,GAAE,KAAMV,EAAC,GAAIO,YAAW,GAAIE,CAChC,CAAC;IACH;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}