{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"staff-management\"\n};\nconst _hoisted_2 = {\n  class: \"action-buttons\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Staff Management\", -1 /* CACHED */)), _createCommentVNode(\" Invite Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.inviteStaff && $options.inviteStaff(...args), [\"prevent\"])),\n    class: \"invite-form\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    type: \"email\",\n    placeholder: \"Enter staff email\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Invite\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Toast Notification \"), $data.toastMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass(['toast', $data.toastError ? 'error' : 'success'])\n  }, _toDisplayString($data.toastMessage), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Staff List \"), _cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Staff List\", -1 /* CACHED */)), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Phone\"), _createElementVNode(\"th\", null, \"Date of Joining\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.staff, s => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: s._id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(s.email), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.name || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.phone || \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.dateOfJoining ? new Date(s.dateOfJoining).toLocaleDateString() : \"—\"), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(s.status), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_2, [s.status === 'pending' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $options.approveStaff(s._id)\n    }, \" Approve \", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), s.status === 'active' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $options.setStatus(s._id, 'deactivated')\n    }, \" Deactivate \", 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), s.status === 'deactivated' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      onClick: $event => $options.setStatus(s._id, 'active')\n    }, \" Activate \", 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" PDF \"), _createElementVNode(\"button\", {\n      onClick: $event => $options.exportStaffPDF(s)\n    }, \"Download PDF\", 8 /* PROPS */, _hoisted_6), _createCommentVNode(\" Delete \"), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteStaff(s._id),\n      class: \"delete-btn\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_7)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" Export All \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.exportAllStaffPDF && $options.exportAllStaffPDF(...args)),\n    class: \"export-all\"\n  }, \" Download All Staff Report \")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","onSubmit","_cache","_withModifiers","args","$options","inviteStaff","$data","email","$event","type","placeholder","required","toastMessage","_normalizeClass","toastError","_Fragment","_renderList","staff","s","key","_id","_toDisplayString","name","phone","dateOfJoining","Date","toLocaleDateString","status","_hoisted_2","onClick","approveStaff","_hoisted_3","setStatus","_hoisted_4","_hoisted_5","exportStaffPDF","_hoisted_6","deleteStaff","_hoisted_7","exportAllStaffPDF"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\" class=\"invite-form\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Toast Notification -->\n    <div\n      v-if=\"toastMessage\"\n      :class=\"['toast', toastError ? 'error' : 'success']\"\n    >\n      {{ toastMessage }}\n    </div>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td class=\"action-buttons\">\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n\n            <!-- Delete -->\n            <button @click=\"deleteStaff(s._id)\" class=\"delete-btn\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\" class=\"export-all\">\n      Download All Staff Report\n    </button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\",\n      toastError: false,\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        this.showToast(\"Failed to fetch staff\", true);\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email,\n        });\n        this.showToast(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error sending invite\",\n          true\n        );\n      }\n    },\n    async approveStaff(id) {\n  try {\n    const res = await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n    this.showToast(res.data.message || \"Staff approved successfully\");\n    this.fetchStaff();\n  } catch (err) {\n    this.showToast(\n      err.response?.data?.message || \"Error approving staff\",\n      true\n    );\n  }\n}\n,\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status,\n        });\n        this.showToast(\"Status updated successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\"Failed to update status\", true);\n      }\n    },\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to permanently delete this staff?\"))\n        return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        this.showToast(\"Staff deleted successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error deleting staff\",\n          true\n        );\n      }\n    },\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      this.toastError = isError;\n      setTimeout(() => {\n        this.toastMessage = \"\";\n        this.toastError = false;\n      }, 3000);\n    },\n\n    // --- PDF methods ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n\n<style scoped>\n.staff-management {\n  max-width: 1000px;\n  margin: 20px auto;\n  padding: 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.invite-form {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n.invite-form input {\n  flex: 1;\n  padding: 8px;\n}\n.invite-form button {\n  padding: 8px 15px;\n}\n.action-buttons button {\n  margin: 2px;\n}\n.delete-btn {\n  background: #f56565;\n  color: white;\n}\n.toast {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  padding: 12px 20px;\n  border-radius: 8px;\n  color: #fff;\n  z-index: 9999;\n  transition: all 0.3s ease;\n}\n.toast.success {\n  background: #48bb78;\n}\n.toast.error {\n  background: #f56565;\n}\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\nbutton {\n  padding: 5px 10px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\nbutton:hover {\n  opacity: 0.85;\n}\n.export-all {\n  background: #4cafef;\n  color: #fff;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}