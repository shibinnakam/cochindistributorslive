{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      name: \"\",\n      categories: [],\n      searchQuery: \"\",\n      editId: null,\n      editName: \"\",\n      showDeleteModal: false,\n      showAddForm: false,\n      deleteId: null,\n      activeMenu: null,\n      toastMessage: \"\",\n      toastError: false\n    };\n  },\n  computed: {\n    filteredCategories() {\n      return this.categories.filter(cat => {\n        return !this.searchQuery || cat.name?.toLowerCase().includes(this.searchQuery.toLowerCase());\n      });\n    }\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/categories\");\n        this.categories = res.data;\n      } catch (err) {\n        this.showToast(\"Failed to fetch categories\", true);\n      }\n    },\n    async addCategory() {\n      try {\n        const res = await axios.post(\"http://localhost:5000/api/categories\", {\n          name: this.name\n        });\n        this.categories.unshift(res.data);\n        this.name = \"\";\n        this.showAddForm = false;\n        this.showToast(\"Category added successfully!\");\n      } catch (err) {\n        this.showToast(err.response?.data?.error || \"Error adding category\", true);\n      }\n    },\n    startEdit(cat) {\n      this.editId = cat._id;\n      this.editName = cat.name;\n      this.activeMenu = null;\n    },\n    async updateCategory(id) {\n      try {\n        const res = await axios.put(`http://localhost:5000/api/categories/${id}`, {\n          name: this.editName\n        });\n        const index = this.categories.findIndex(c => c._id === id);\n        if (index !== -1) this.categories[index] = res.data;\n        this.editId = null;\n        this.editName = \"\";\n        this.showToast(\"Category updated successfully!\");\n      } catch (err) {\n        this.showToast(err.response?.data?.error || \"Error updating category\", true);\n      }\n    },\n    openDeleteModal(id) {\n      this.deleteId = id;\n      this.showDeleteModal = true;\n      this.activeMenu = null;\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteId = null;\n    },\n    async confirmDelete() {\n      try {\n        await axios.delete(`http://localhost:5000/api/categories/${this.deleteId}`);\n        this.categories = this.categories.filter(c => c._id !== this.deleteId);\n        this.closeDeleteModal();\n        this.showToast(\"Category deleted successfully!\");\n      } catch (err) {\n        this.showToast(err.response?.data?.error || \"Error deleting category\", true);\n      }\n    },\n    toggleMenu(id) {\n      this.activeMenu = this.activeMenu === id ? null : id;\n    },\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      this.toastError = isError;\n      setTimeout(() => {\n        this.toastMessage = \"\";\n      }, 3000);\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString();\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n  }\n};","map":{"version":3,"names":["axios","data","name","categories","searchQuery","editId","editName","showDeleteModal","showAddForm","deleteId","activeMenu","toastMessage","toastError","computed","filteredCategories","filter","cat","toLowerCase","includes","methods","fetchCategories","res","get","err","showToast","addCategory","post","unshift","response","error","startEdit","_id","updateCategory","id","put","index","findIndex","c","openDeleteModal","closeDeleteModal","confirmDelete","delete","toggleMenu","message","isError","setTimeout","formatDate","date","Date","toLocaleDateString","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\AddCategory.vue"],"sourcesContent":["<template>\n  <div class=\"category-management\">\n    <!-- Top Header -->\n    <div class=\"top-header\">\n      <h1>PRODUCT CATEGORIES</h1>\n    </div>\n\n    <!-- Header Section -->\n    <div class=\"header-section\">\n      <div class=\"header-controls\">\n        <div class=\"search-filter\">\n          <div class=\"search-box\">\n            <input\n              v-model=\"searchQuery\"\n              type=\"text\"\n              placeholder=\"Search categories...\"\n              class=\"search-input\"\n            />\n            <i class=\"search-icon\">üîç</i>\n          </div>\n        </div>\n        <div class=\"action-buttons-header\">\n          <button @click=\"showAddForm = true\" class=\"btn-add\">\n            + Add Category\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Toast Notification -->\n    <div\n      v-if=\"toastMessage\"\n      :class=\"['toast', toastError ? 'error' : 'success']\"\n    >\n      {{ toastMessage }}\n    </div>\n\n    <!-- Add Category Modal -->\n    <div v-if=\"showAddForm\" class=\"modal-overlay\" @click=\"showAddForm = false\">\n      <div class=\"modal-content\" @click.stop>\n        <div class=\"modal-header\">\n          <h2>Add New Category</h2>\n          <button class=\"modal-close\" @click=\"showAddForm = false\">‚úï</button>\n        </div>\n        <form @submit.prevent=\"addCategory\" class=\"add-form-modal\">\n          <input\n            v-model=\"name\"\n            type=\"text\"\n            placeholder=\"Enter category name\"\n            required\n            class=\"category-input\"\n          />\n          <button type=\"submit\" class=\"btn-submit\">Add Category</button>\n        </form>\n      </div>\n    </div>\n\n    <!-- Table Container -->\n    <div class=\"table-container\">\n      <table class=\"category-table\">\n        <thead>\n          <tr>\n            <th>Category Name</th>\n            <th>Status</th>\n            <th>Last Updated</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"cat in filteredCategories\" :key=\"cat._id\">\n            <td class=\"name-cell\">\n              <span v-if=\"editId !== cat._id\" class=\"category-name\">{{ cat.name }}</span>\n              <input\n                v-else\n                v-model=\"editName\"\n                type=\"text\"\n                placeholder=\"Update category\"\n                class=\"edit-input\"\n              />\n            </td>\n            <td class=\"status-cell\">\n              <span class=\"published\">Published</span>\n            </td>\n            <td class=\"date-cell\">{{ formatDate(cat.updatedAt) }}</td>\n            <td class=\"actions-cell\">\n              <div class=\"action-menu\">\n                <button\n                  @click=\"toggleMenu(cat._id)\"\n                  class=\"menu-trigger\"\n                  title=\"More options\"\n                >\n                  ‚ãÆ\n                </button>\n                <div v-if=\"activeMenu === cat._id\" class=\"dropdown-menu\">\n                  <button\n                    v-if=\"editId !== cat._id\"\n                    @click=\"startEdit(cat)\"\n                    class=\"menu-item edit\"\n                  >\n                    ‚úèÔ∏è Edit\n                  </button>\n\n                  <button\n                    v-if=\"editId === cat._id\"\n                    @click=\"updateCategory(cat._id)\"\n                    class=\"menu-item save\"\n                  >\n                    ‚úì Save\n                  </button>\n\n                  <button\n                    @click=\"openDeleteModal(cat._id)\"\n                    class=\"menu-item delete\"\n                  >\n                    üóëÔ∏è Delete\n                  </button>\n                </div>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div v-if=\"filteredCategories.length === 0\" class=\"no-data\">\n        No categories found\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\" @click=\"closeDeleteModal\">\n      <div class=\"modal-delete\" @click.stop>\n        <div class=\"delete-icon\">‚ö†Ô∏è</div>\n        <h3>Delete Category</h3>\n        <p>Are you sure you want to permanently delete this category?</p>\n        <p class=\"warning\">This action cannot be undone.</p>\n        <div class=\"modal-actions-delete\">\n          <button @click=\"confirmDelete\" class=\"btn-delete-confirm\">\n            Delete\n          </button>\n          <button @click=\"closeDeleteModal\" class=\"btn-delete-cancel\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      name: \"\",\n      categories: [],\n      searchQuery: \"\",\n      editId: null,\n      editName: \"\",\n      showDeleteModal: false,\n      showAddForm: false,\n      deleteId: null,\n      activeMenu: null,\n      toastMessage: \"\",\n      toastError: false,\n    };\n  },\n  computed: {\n    filteredCategories() {\n      return this.categories.filter((cat) => {\n        return (\n          !this.searchQuery ||\n          cat.name?.toLowerCase().includes(this.searchQuery.toLowerCase())\n        );\n      });\n    },\n  },\n  methods: {\n    async fetchCategories() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/categories\");\n        this.categories = res.data;\n      } catch (err) {\n        this.showToast(\"Failed to fetch categories\", true);\n      }\n    },\n    async addCategory() {\n      try {\n        const res = await axios.post(\"http://localhost:5000/api/categories\", {\n          name: this.name,\n        });\n        this.categories.unshift(res.data);\n        this.name = \"\";\n        this.showAddForm = false;\n        this.showToast(\"Category added successfully!\");\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.error || \"Error adding category\",\n          true\n        );\n      }\n    },\n    startEdit(cat) {\n      this.editId = cat._id;\n      this.editName = cat.name;\n      this.activeMenu = null;\n    },\n    async updateCategory(id) {\n      try {\n        const res = await axios.put(\n          `http://localhost:5000/api/categories/${id}`,\n          {\n            name: this.editName,\n          }\n        );\n        const index = this.categories.findIndex((c) => c._id === id);\n        if (index !== -1) this.categories[index] = res.data;\n        this.editId = null;\n        this.editName = \"\";\n        this.showToast(\"Category updated successfully!\");\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.error || \"Error updating category\",\n          true\n        );\n      }\n    },\n\n    openDeleteModal(id) {\n      this.deleteId = id;\n      this.showDeleteModal = true;\n      this.activeMenu = null;\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteId = null;\n    },\n    async confirmDelete() {\n      try {\n        await axios.delete(\n          `http://localhost:5000/api/categories/${this.deleteId}`\n        );\n        this.categories = this.categories.filter(\n          (c) => c._id !== this.deleteId\n        );\n        this.closeDeleteModal();\n        this.showToast(\"Category deleted successfully!\");\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.error || \"Error deleting category\",\n          true\n        );\n      }\n    },\n\n    toggleMenu(id) {\n      this.activeMenu = this.activeMenu === id ? null : id;\n    },\n\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      this.toastError = isError;\n      setTimeout(() => {\n        this.toastMessage = \"\";\n      }, 3000);\n    },\n\n    formatDate(date) {\n      return new Date(date).toLocaleDateString();\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n  },\n};\n</script>\n<style scoped>\n/* --- Table Styles --- */\n.category-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n  font-family: Arial, sans-serif;\n  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.category-table thead {\n  background: #f8f9fa; /* Light grey like screenshot */\n  color: #333; /* Dark text */\n  font-weight: 600;\n  text-align: left;\n  border-bottom: 2px solid #dee2e6; /* subtle border */\n}\n.category-table th {\n  padding: 14px 18px;\n  font-size: 15px;\n}\n.category-table td {\n  padding: 12px 16px;\n}\n\n.category-table tbody tr {\n  border-bottom: 1px solid #ddd;\n  transition: background 0.2s ease;\n  background: #fff;\n}\n\n.category-table tbody tr:hover {\n  background: #f9f9f9;\n}\n\n/* Published Status Badge */\n.published {\n  background: #2ecc71;\n  color: #fff;\n  padding: 4px 10px;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n/* --- Buttons (Edit, Save, Delete) --- */\n.btn-icon {\n  border: none;\n  padding: 6px 16px;\n  margin-right: 6px;\n  border-radius: 6px;\n  color: #fff;\n  font-weight: 500;\n  cursor: pointer;\n  background: linear-gradient(135deg, #34495e, #2c3e50);\n  transition: transform 0.2s ease, opacity 0.2s ease;\n  font-size: 14px;\n}\n\n.btn-icon:hover {\n  transform: translateY(-2px);\n  opacity: 0.9;\n}\n\n/* Remove icons inside buttons, keep text only */\n.btn-icon.edit::before,\n.btn-icon.save::before,\n.btn-icon.delete::before {\n  content: \"\";\n}\n\n/* Add New Category button style */\n.add-form button {\n  background: linear-gradient(135deg, #34495e, #2c3e50);\n  color: #fff;\n  border: none;\n  padding: 8px 18px;\n  border-radius: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: transform 0.2s ease, opacity 0.2s ease;\n}\n\n.add-form button:hover {\n  transform: translateY(-2px);\n  opacity: 0.9;\n}\n\n/* --- Modal Styles --- */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.55);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n}\n\n.modal {\n  background: #fff;\n  padding: 24px;\n  border-radius: 10px;\n  width: 420px;\n  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);\n  text-align: center;\n  position: relative;\n}\n\n.modal h3 {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 8px;\n  color: #333;\n}\n\n.modal p {\n  font-size: 14px;\n  color: #666;\n  margin-bottom: 18px;\n}\n\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n}\n\n.cancel {\n  background: transparent;\n  border: none;\n  color: #555;\n  font-weight: 500;\n  cursor: pointer;\n  padding: 8px 14px;\n}\n\n.confirm {\n  background: #e74c3c;\n  border: none;\n  color: #fff;\n  font-weight: 600;\n  cursor: pointer;\n  padding: 8px 16px;\n  border-radius: 6px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);\n  transition: all 0.2s ease-in-out;\n}\n.confirm:hover {\n  background: #c0392b;\n  transform: translateY(-2px);\n}\n\n.close-btn {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background: transparent;\n  border: none;\n  font-size: 16px;\n  cursor: pointer;\n  color: #888;\n}\n.close-btn:hover {\n  color: #333;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}