{"ast":null,"code":"import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: []\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        alert(\"Failed to fetch staff\");\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email\n        });\n        alert(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error sending invite\");\n      }\n    },\n    async approveStaff(id) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error approving staff\");\n      }\n    },\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status\n        });\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to update status\");\n      }\n    },\n    // ✅ Delete staff permanently\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to delete this staff? This action cannot be undone.\")) return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        alert(\"Staff deleted successfully!\");\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to delete staff\");\n      }\n    },\n    // --- PDF methods (unchanged) ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(\"staff-report.pdf\");\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","autoTable","data","email","staff","methods","fetchStaff","res","get","err","alert","inviteStaff","post","approveStaff","id","put","setStatus","status","deleteStaff","confirm","delete","exportStaffPDF","doc","save","name","exportAllStaffPDF","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td>\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF Button -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n\n            <!-- Delete Button -->\n            <button @click=\"deleteStaff(s._id)\" class=\"delete-btn\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\">Download All Staff Report</button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        alert(\"Failed to fetch staff\");\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email,\n        });\n        alert(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error sending invite\");\n      }\n    },\n    async approveStaff(id) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/approve/${id}`);\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Error approving staff\");\n      }\n    },\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status,\n        });\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to update status\");\n      }\n    },\n\n    // ✅ Delete staff permanently\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to delete this staff? This action cannot be undone.\")) return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        alert(\"Staff deleted successfully!\");\n        this.fetchStaff();\n      } catch (err) {\n        alert(\"Failed to delete staff\");\n      }\n    },\n\n    // --- PDF methods (unchanged) ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... existing PDF code ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n\n<style scoped>\n.delete-btn {\n  background-color: #f56565;\n  color: #fff;\n  margin-left: 5px;\n}\n.delete-btn:hover {\n  opacity: 0.85;\n}\n</style>\n"],"mappings":"AA4EA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,SAAQ,MAAO,iBAAiB;AAEvC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMR,KAAK,CAACS,GAAG,CAAC,iCAAiC,CAAC;QAC9D,IAAI,CAACJ,KAAI,GAAIG,GAAG,CAACL,IAAI,CAACE,KAAK;MAC7B,EAAE,OAAOK,GAAG,EAAE;QACZC,KAAK,CAAC,uBAAuB,CAAC;MAChC;IACF,CAAC;IACD,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMZ,KAAK,CAACa,IAAI,CAAC,wCAAwC,EAAE;UACzDT,KAAK,EAAE,IAAI,CAACA;QACd,CAAC,CAAC;QACFO,KAAK,CAAC,kBAAkB,CAAC;QACzB,IAAI,CAACP,KAAI,GAAI,EAAE;QACf,IAAI,CAACG,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOG,GAAG,EAAE;QACZC,KAAK,CAAC,sBAAsB,CAAC;MAC/B;IACF,CAAC;IACD,MAAMG,YAAYA,CAACC,EAAE,EAAE;MACrB,IAAI;QACF,MAAMf,KAAK,CAACgB,GAAG,CAAC,2CAA2CD,EAAE,EAAE,CAAC;QAChE,IAAI,CAACR,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOG,GAAG,EAAE;QACZC,KAAK,CAAC,uBAAuB,CAAC;MAChC;IACF,CAAC;IACD,MAAMM,SAASA,CAACF,EAAE,EAAEG,MAAM,EAAE;MAC1B,IAAI;QACF,MAAMlB,KAAK,CAACgB,GAAG,CAAC,0CAA0CD,EAAE,EAAE,EAAE;UAC9DG;QACF,CAAC,CAAC;QACF,IAAI,CAACX,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOG,GAAG,EAAE;QACZC,KAAK,CAAC,yBAAyB,CAAC;MAClC;IACF,CAAC;IAED;IACA,MAAMQ,WAAWA,CAACJ,EAAE,EAAE;MACpB,IAAI,CAACK,OAAO,CAAC,2EAA2E,CAAC,EAAE;MAC3F,IAAI;QACF,MAAMpB,KAAK,CAACqB,MAAM,CAAC,mCAAmCN,EAAE,EAAE,CAAC;QAC3DJ,KAAK,CAAC,6BAA6B,CAAC;QACpC,IAAI,CAACJ,UAAU,CAAC,CAAC;MACnB,EAAE,OAAOG,GAAG,EAAE;QACZC,KAAK,CAAC,wBAAwB,CAAC;MACjC;IACF,CAAC;IAED;IACAW,cAAcA,CAACjB,KAAK,EAAE;MACpB,MAAMkB,GAAE,GAAI,IAAItB,KAAK,CAAC,CAAC;MACvB;MACAsB,GAAG,CAACC,IAAI,CAAC,GAAGnB,KAAK,CAACoB,IAAG,IAAK,OAAO,cAAc,CAAC;IAClD,CAAC;IACDC,iBAAiBA,CAAA,EAAG;MAClB,MAAMH,GAAE,GAAI,IAAItB,KAAK,CAAC,CAAC;MACvB;MACAsB,GAAG,CAACC,IAAI,CAAC,kBAAkB,CAAC;IAC9B;EACF,CAAC;EACDG,OAAOA,CAAA,EAAG;IACR,IAAI,CAACpB,UAAU,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}