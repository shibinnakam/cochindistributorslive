{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"product-list-wrapper\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"no-products\"\n};\nconst _hoisted_4 = {\n  class: \"products-row\"\n};\nconst _hoisted_5 = {\n  class: \"image-container\"\n};\nconst _hoisted_6 = [\"src\", \"alt\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"discount-badge\"\n};\nconst _hoisted_8 = {\n  class: \"product-info\"\n};\nconst _hoisted_9 = {\n  class: \"product-name\"\n};\nconst _hoisted_10 = {\n  class: \"product-desc\"\n};\nconst _hoisted_11 = {\n  class: \"price-container\"\n};\nconst _hoisted_12 = {\n  class: \"current-price\"\n};\nconst _hoisted_13 = {\n  class: \"original-price\"\n};\nconst _hoisted_14 = {\n  key: 0\n};\nconst _hoisted_15 = {\n  key: 1\n};\nconst _hoisted_16 = {\n  class: \"actions\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = {\n  key: 3,\n  class: \"delete-modal-overlay\"\n};\nconst _hoisted_20 = {\n  class: \"delete-modal\"\n};\nconst _hoisted_21 = {\n  class: \"delete-modal-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[2] || (_cache[2] = [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"Loading products...\", -1 /* CACHED */)]))) : $data.products.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _cache[3] || (_cache[3] = [_createElementVNode(\"p\", null, \"üì¶ No products found\", -1 /* CACHED */)]))) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Product Grid \"), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, product => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: product._id,\n      class: \"product-card\"\n    }, [_createCommentVNode(\" Image Container \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"img\", {\n      src: $options.getImageUrl(product.image),\n      alt: product.name\n    }, null, 8 /* PROPS */, _hoisted_6), $options.calculateDiscount(product.originalPrice, product.discountPrice) > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" -\" + _toDisplayString($options.calculateDiscount(product.originalPrice, product.discountPrice)) + \"% \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Product Info \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h3\", _hoisted_9, _toDisplayString(product.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, _toDisplayString(product.description), 1 /* TEXT */), _createCommentVNode(\" Price \"), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"span\", _hoisted_12, \"‚Çπ\" + _toDisplayString(product.discountPrice), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_13, \"‚Çπ\" + _toDisplayString(product.originalPrice), 1 /* TEXT */)]), _createCommentVNode(\" Quantity Badge \"), _createElementVNode(\"div\", {\n      class: _normalizeClass([\"quantity-badge\", $options.getQuantityClass(product.quantity)])\n    }, [product.quantity === 0 ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \"Out of Stock\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_15, _toDisplayString(product.quantity) + \" in stock\", 1 /* TEXT */))], 2 /* CLASS */), _createCommentVNode(\" Action Buttons \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n      onClick: $event => $options.startEdit(product),\n      class: \"edit-btn\",\n      title: \"Edit\"\n    }, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"span\", null, \"üìù\", -1 /* CACHED */), _createTextVNode(\" Edit \", -1 /* CACHED */)]))], 8 /* PROPS */, _hoisted_17), _createElementVNode(\"button\", {\n      onClick: $event => $options.openDeleteModal(product._id),\n      class: \"delete-btn\",\n      title: \"Delete\"\n    }, [...(_cache[5] || (_cache[5] = [_createElementVNode(\"span\", null, \"üóëÔ∏è\", -1 /* CACHED */), _createTextVNode(\" Delete \", -1 /* CACHED */)]))], 8 /* PROPS */, _hoisted_18)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" Delete Confirmation Modal \"), $data.showDeleteModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"delete-modal-icon\"\n  }, \"‚ö†Ô∏è\", -1 /* CACHED */)), _cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"Delete Product?\", -1 /* CACHED */)), _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"This action cannot be undone.\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.cancelDelete && $options.cancelDelete(...args)),\n    class: \"cancel-btn\"\n  }, \"Cancel\"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.confirmDelete && $options.confirmDelete(...args)),\n    class: \"confirm-btn\"\n  }, \"Delete\")])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_cache","_createElementVNode","products","length","_hoisted_3","_Fragment","key","_createCommentVNode","_hoisted_4","_renderList","product","_id","_hoisted_5","src","$options","getImageUrl","image","alt","name","calculateDiscount","originalPrice","discountPrice","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","description","_hoisted_11","_hoisted_12","_hoisted_13","_normalizeClass","getQuantityClass","quantity","_hoisted_14","_hoisted_15","_hoisted_16","onClick","$event","startEdit","title","openDeleteModal","showDeleteModal","_hoisted_19","_hoisted_20","_hoisted_21","args","cancelDelete","confirmDelete"],"sources":["C:\\Users\\LENOVO\\Music\\OneDrive\\Pictures\\distribution-agency-project\\frontend\\src\\views\\ProductList.vue"],"sourcesContent":["<template>\n  <div class=\"product-list-wrapper\">\n    <div v-if=\"loading\" class=\"loading\">\n      <div class=\"spinner\"></div>\n      <p>Loading products...</p>\n    </div>\n\n    <div v-else-if=\"products.length === 0\" class=\"no-products\">\n      <p>üì¶ No products found</p>\n    </div>\n\n    <!-- Product Grid -->\n    <div v-else class=\"products-row\">\n      <div v-for=\"product in products\" :key=\"product._id\" class=\"product-card\">\n        <!-- Image Container -->\n        <div class=\"image-container\">\n          <img :src=\"getImageUrl(product.image)\" :alt=\"product.name\" />\n          <div\n            class=\"discount-badge\"\n            v-if=\"\n              calculateDiscount(product.originalPrice, product.discountPrice) >\n              0\n            \"\n          >\n            -{{\n              calculateDiscount(product.originalPrice, product.discountPrice)\n            }}%\n          </div>\n        </div>\n\n        <!-- Product Info -->\n        <div class=\"product-info\">\n          <h3 class=\"product-name\">{{ product.name }}</h3>\n          <p class=\"product-desc\">{{ product.description }}</p>\n\n          <!-- Price -->\n          <div class=\"price-container\">\n            <span class=\"current-price\">‚Çπ{{ product.discountPrice }}</span>\n            <span class=\"original-price\">‚Çπ{{ product.originalPrice }}</span>\n          </div>\n\n          <!-- Quantity Badge -->\n          <div\n            class=\"quantity-badge\"\n            :class=\"getQuantityClass(product.quantity)\"\n          >\n            <span v-if=\"product.quantity === 0\">Out of Stock</span>\n            <span v-else>{{ product.quantity }} in stock</span>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"actions\">\n            <button @click=\"startEdit(product)\" class=\"edit-btn\" title=\"Edit\">\n              <span>üìù</span> Edit\n            </button>\n            <button\n              @click=\"openDeleteModal(product._id)\"\n              class=\"delete-btn\"\n              title=\"Delete\"\n            >\n              <span>üóëÔ∏è</span> Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"delete-modal-overlay\">\n      <div class=\"delete-modal\">\n        <div class=\"delete-modal-icon\">‚ö†Ô∏è</div>\n        <h3>Delete Product?</h3>\n        <p>This action cannot be undone.</p>\n        <div class=\"delete-modal-actions\">\n          <button @click=\"cancelDelete\" class=\"cancel-btn\">Cancel</button>\n          <button @click=\"confirmDelete\" class=\"confirm-btn\">Delete</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProductList\",\n  props: {\n    isModal: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      products: [],\n      loading: false,\n      deletingId: null,\n      showDeleteModal: false,\n      deleteId: null,\n    };\n  },\n  mounted() {\n    this.fetchProducts();\n  },\n  methods: {\n    getImageUrl(path) {\n      return path.startsWith(\"/\") ? `http://localhost:5000${path}` : path;\n    },\n    calculateDiscount(original, discount) {\n      if (!original || !discount) return 0;\n      return Math.round(((original - discount) / original) * 100);\n    },\n    getQuantityClass(quantity) {\n      if (quantity === 0) return \"out-of-stock\";\n      if (quantity < 10) return \"low-stock\";\n      return \"in-stock\";\n    },\n    async fetchProducts() {\n      this.loading = true;\n      try {\n        const res = await axios.get(\n          \"http://localhost:5000/api/products/getproduct\"\n        );\n        if (res.data.success) {\n          this.products = res.data.products;\n        }\n      } catch (err) {\n        console.error(\n          \"Error fetching products:\",\n          err.response?.data || err.message\n        );\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // --- Modal Methods ---\n    openDeleteModal(id) {\n      this.deleteId = id;\n      this.showDeleteModal = true;\n    },\n    cancelDelete() {\n      this.showDeleteModal = false;\n      this.deleteId = null;\n    },\n    async confirmDelete() {\n      this.deletingId = this.deleteId;\n      try {\n        const res = await axios.delete(\n          `http://localhost:5000/api/products/deleteproduct/${this.deleteId}`\n        );\n        if (res.data.success) {\n          this.products = this.products.filter((p) => p._id !== this.deleteId);\n          this.showDeleteModal = false;\n          this.deleteId = null;\n          if (this.isModal) {\n            this.$emit(\"close\");\n          }\n        }\n      } catch (err) {\n        console.error(\n          \"Delete product error:\",\n          err.response?.data || err.message\n        );\n      } finally {\n        this.deletingId = null;\n      }\n    },\n\n    startEdit(product) {\n      if (this.isModal) {\n        this.$emit(\"close\");\n      }\n      this.$router.push(`/products/edit/${product._id}`);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.product-list-wrapper {\n  padding: 20px;\n  max-width: 100%;\n  margin: 0 auto;\n  overflow-x: auto; /* ‚úÖ enable horizontal scroll */\n}\n\n.products-row {\n  display: flex;\n  gap: 20px;\n  flex-wrap: nowrap; /* ‚úÖ keep in one row */\n}\n\n/* ‚úÖ Product Card */\n.product-card {\n  min-width: 180px;\n  max-width: 190px;\n  background: #fff;\n  border-radius: 18px; /* more rounded corners */\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* stronger shadow */\n  padding: 20px;\n  text-align: center; /* center everything like Bingo card */\n  flex-shrink: 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  border: 2px solid transparent;\n}\n\n.product-card:hover {\n  transform: translateY(-5px); /* hover lift effect */\n  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);\n  border: 1px solid gold;\n}\n\n.product-card img {\n  width: 100%;\n  height: 150px;\n  object-fit: contain;\n  margin: 12px 0;\n}\n\n.product-card h3 {\n  margin: 2px 0;\n  font-size: 18px;\n  font-weight: 700;\n  color: #000;\n}\n\n.description {\n  font-size: 14px;\n  color: #555;\n  margin-bottom: 12px;\n  height: 13px;\n  overflow: hidden;\n}\n\n.price-section {\n  margin-bottom: 7px;\n}\n\n.original-price {\n  text-decoration: line-through;\n  color: #888;\n  margin-right: 6px;\n  font-size: 14px;\n}\n\n.discount-price {\n  color: #000;\n  font-weight: bold;\n  font-size: 16px;\n  margin-right: 6px;\n}\n\n.discount-percent {\n  color: green;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.quantity-status {\n  margin-bottom: 3px;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.out-of-stock {\n  color: red;\n}\n\n.few-left {\n  color: violet;\n}\n\n.in-stock {\n  color: green;\n}\n\n.actions {\n  display: flex;\n  gap: 8px;\n}\n\n.delete-btn {\n  flex: 1;\n  padding: 8px 12px;\n  border: none;\n  border-radius: 6px;\n  background-color: #cc0000;\n  color: #fff;\n  cursor: pointer;\n  transition: 0.3s;\n}\n\n.delete-btn:hover {\n  background-color: #990000;\n}\n\n.update-btn {\n  flex: 1;\n  padding: 8px 12px;\n  border: none;\n  border-radius: 6px;\n  background-color: #0066cc;\n  color: #fff;\n  cursor: pointer;\n  transition: 0.3s;\n}\n\n.update-btn:hover {\n  background-color: #004c99;\n}\n\n/* --- Modal Styling --- */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n.modal {\n  background: white;\n  padding: 20px;\n  border-radius: 10px;\n  width: 400px;\n  max-width: 90%;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n  text-align: center;\n}\n.modal h3 {\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n.modal p {\n  font-size: 14px;\n  margin-bottom: 20px;\n  color: #666;\n}\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n}\n.confirm-btn {\n  padding: 8px 16px;\n  background: linear-gradient(135deg, #d10000ff, #b20707ff);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n}\n.cancel-btn {\n  padding: 8px 16px;\n  background: #eee;\n  color: #333;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-weight: 600;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}