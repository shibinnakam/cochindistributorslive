{"ast":null,"code":"import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\",\n      toastError: false\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        this.showToast(\"Failed to fetch staff\", true);\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email\n        });\n        this.showToast(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(err.response?.data?.message || \"Error sending invite\", true);\n      }\n    },\n    async approveStaff(id) {\n      try {\n        // You can set joiningDate to today or allow admin to pick\n        const joiningDate = new Date().toISOString();\n        const res = await axios.put(`http://localhost:5000/api/staff/approve/${id}`, {\n          joiningDate\n        } // send as body\n        );\n        this.showToast(res.data.message || \"Staff approved successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(err.response?.data?.message || \"Error approving staff\", true);\n      }\n    },\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status\n        });\n        this.showToast(\"Status updated successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\"Failed to update status\", true);\n      }\n    },\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to permanently delete this staff?\")) return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        this.showToast(\"Staff deleted successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(err.response?.data?.message || \"Error deleting staff\", true);\n      }\n    },\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      this.toastError = isError;\n      setTimeout(() => {\n        this.toastMessage = \"\";\n        this.toastError = false;\n      }, 3000);\n    },\n    // --- PDF methods ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(\"staff-report.pdf\");\n    }\n  },\n  mounted() {\n    this.fetchStaff();\n  }\n};","map":{"version":3,"names":["axios","jsPDF","data","email","staff","toastMessage","toastError","methods","fetchStaff","res","get","err","showToast","inviteStaff","post","response","message","approveStaff","id","joiningDate","Date","toISOString","put","setStatus","status","deleteStaff","confirm","delete","isError","setTimeout","exportStaffPDF","doc","save","name","exportAllStaffPDF","mounted"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\StaffManagement.vue"],"sourcesContent":["<template>\n  <div class=\"staff-management\">\n    <h2>Staff Management</h2>\n\n    <!-- Invite Form -->\n    <form @submit.prevent=\"inviteStaff\" class=\"invite-form\">\n      <input\n        v-model=\"email\"\n        type=\"email\"\n        placeholder=\"Enter staff email\"\n        required\n      />\n      <button type=\"submit\">Invite</button>\n    </form>\n\n    <!-- Toast Notification -->\n    <div\n      v-if=\"toastMessage\"\n      :class=\"['toast', toastError ? 'error' : 'success']\"\n    >\n      {{ toastMessage }}\n    </div>\n\n    <!-- Staff List -->\n    <h3>Staff List</h3>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Phone</th>\n          <th>Date of Joining</th>\n          <th>Status</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"s in staff\" :key=\"s._id\">\n          <td>{{ s.email }}</td>\n          <td>{{ s.name || \"—\" }}</td>\n          <td>{{ s.phone || \"—\" }}</td>\n          <td>\n            {{\n              s.dateOfJoining\n                ? new Date(s.dateOfJoining).toLocaleDateString()\n                : \"—\"\n            }}\n          </td>\n          <td>{{ s.status }}</td>\n          <td class=\"action-buttons\">\n            <button v-if=\"s.status === 'pending'\" @click=\"approveStaff(s._id)\">\n              Approve\n            </button>\n            <button\n              v-if=\"s.status === 'active'\"\n              @click=\"setStatus(s._id, 'deactivated')\"\n            >\n              Deactivate\n            </button>\n            <button\n              v-if=\"s.status === 'deactivated'\"\n              @click=\"setStatus(s._id, 'active')\"\n            >\n              Activate\n            </button>\n\n            <!-- PDF -->\n            <button @click=\"exportStaffPDF(s)\">Download PDF</button>\n\n            <!-- Delete -->\n            <button @click=\"deleteStaff(s._id)\" class=\"delete-btn\">\n              Delete\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Export All -->\n    <button @click=\"exportAllStaffPDF\" class=\"export-all\">\n      Download All Staff Report\n    </button>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\n\nexport default {\n  data() {\n    return {\n      email: \"\",\n      staff: [],\n      toastMessage: \"\",\n      toastError: false,\n    };\n  },\n  methods: {\n    async fetchStaff() {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/staff\");\n        this.staff = res.data.staff;\n      } catch (err) {\n        this.showToast(\"Failed to fetch staff\", true);\n      }\n    },\n    async inviteStaff() {\n      try {\n        await axios.post(\"http://localhost:5000/api/staff/invite\", {\n          email: this.email,\n        });\n        this.showToast(\"Invitation sent!\");\n        this.email = \"\";\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error sending invite\",\n          true\n        );\n      }\n    },\n    async approveStaff(id) {\n      try {\n        // You can set joiningDate to today or allow admin to pick\n        const joiningDate = new Date().toISOString();\n\n        const res = await axios.put(\n          `http://localhost:5000/api/staff/approve/${id}`,\n          { joiningDate } // send as body\n        );\n\n        this.showToast(res.data.message || \"Staff approved successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error approving staff\",\n          true\n        );\n      }\n    },\n    async setStatus(id, status) {\n      try {\n        await axios.put(`http://localhost:5000/api/staff/status/${id}`, {\n          status,\n        });\n        this.showToast(\"Status updated successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\"Failed to update status\", true);\n      }\n    },\n    async deleteStaff(id) {\n      if (!confirm(\"Are you sure you want to permanently delete this staff?\"))\n        return;\n      try {\n        await axios.delete(`http://localhost:5000/api/staff/${id}`);\n        this.showToast(\"Staff deleted successfully\");\n        this.fetchStaff();\n      } catch (err) {\n        this.showToast(\n          err.response?.data?.message || \"Error deleting staff\",\n          true\n        );\n      }\n    },\n    showToast(message, isError = false) {\n      this.toastMessage = message;\n      this.toastError = isError;\n      setTimeout(() => {\n        this.toastMessage = \"\";\n        this.toastError = false;\n      }, 3000);\n    },\n\n    // --- PDF methods ---\n    exportStaffPDF(staff) {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(`${staff.name || \"staff\"}_details.pdf`);\n    },\n    exportAllStaffPDF() {\n      const doc = new jsPDF();\n      // ... your existing PDF generation code here ...\n      doc.save(\"staff-report.pdf\");\n    },\n  },\n  mounted() {\n    this.fetchStaff();\n  },\n};\n</script>\n\n<style scoped>\n.staff-management {\n  max-width: 1000px;\n  margin: 20px auto;\n  padding: 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.invite-form {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n.invite-form input {\n  flex: 1;\n  padding: 8px;\n}\n.invite-form button {\n  padding: 8px 15px;\n}\n.action-buttons button {\n  margin: 2px;\n}\n.delete-btn {\n  background: #f56565;\n  color: white;\n}\n.toast {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  padding: 12px 20px;\n  border-radius: 8px;\n  color: #fff;\n  z-index: 9999;\n  transition: all 0.3s ease;\n}\n.toast.success {\n  background: #48bb78;\n}\n.toast.error {\n  background: #f56565;\n}\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\nbutton {\n  padding: 5px 10px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\nbutton:hover {\n  opacity: 0.85;\n}\n.export-all {\n  background: #4cafef;\n  color: #fff;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}