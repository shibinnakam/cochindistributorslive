{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"set-password\"\n};\nconst _hoisted_2 = {\n  class: \"set-password-box\"\n};\nconst _hoisted_3 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Set Your Password\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.password = $event),\n    type: \"password\",\n    placeholder: \"Enter new password\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.setPassword && $options.setPassword(...args), [\"enter\"]))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.password]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.confirmPassword = $event),\n    type: \"password\",\n    placeholder: \"Confirm password\",\n    onKeyup: _cache[3] || (_cache[3] = _withKeys((...args) => $options.setPassword && $options.setPassword(...args), [\"enter\"]))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.confirmPassword]]), _createElementVNode(\"button\", {\n    disabled: $data.loading,\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.setPassword && $options.setPassword(...args))\n  }, _toDisplayString($data.loading ? \"Setting...\" : \"Set Password\"), 9 /* TEXT, PROPS */, _hoisted_3), $data.message ? (_openBlock(), _createElementBlock(\"p\", {\n    key: 0,\n    class: _normalizeClass({\n      error: $data.isError,\n      success: !$data.isError\n    })\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","password","$event","type","placeholder","onKeyup","_cache","_withKeys","args","$options","setPassword","confirmPassword","disabled","loading","onClick","_hoisted_3","message","_normalizeClass","error","isError","success"],"sources":["C:\\Users\\LENOVO\\Music\\distribution-agency-project\\frontend\\src\\views\\SetPassword.vue"],"sourcesContent":["<template>\n  <div class=\"set-password\">\n    <div class=\"set-password-box\">\n      <h2>Set Your Password</h2>\n\n      <input\n        v-model=\"password\"\n        type=\"password\"\n        placeholder=\"Enter new password\"\n        @keyup.enter=\"setPassword\"\n      />\n      <input\n        v-model=\"confirmPassword\"\n        type=\"password\"\n        placeholder=\"Confirm password\"\n        @keyup.enter=\"setPassword\"\n      />\n\n      <button :disabled=\"loading\" @click=\"setPassword\">\n        {{ loading ? \"Setting...\" : \"Set Password\" }}\n      </button>\n\n      <p v-if=\"message\" :class=\"{ error: isError, success: !isError }\">\n        {{ message }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      password: \"\",\n      confirmPassword: \"\",\n      message: \"\",\n      isError: false,\n      loading: false,\n    };\n  },\n  methods: {\n    async setPassword() {\n      this.message = \"\";\n      this.isError = false;\n\n      if (!this.password || this.password.length < 6) {\n        this.message = \"Password must be at least 6 characters\";\n        this.isError = true;\n        return;\n      }\n\n      if (this.password !== this.confirmPassword) {\n        this.message = \"Passwords do not match\";\n        this.isError = true;\n        return;\n      }\n\n      // Get token from query string OR params\n      const token = this.$route.query.token || this.$route.params.token;\n      if (!token) {\n        this.message = \"Invalid or missing reset token\";\n        this.isError = true;\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const res = await axios.post(\n          `${process.env.VUE_APP_API_URL}/api/auth/reset-password`,\n          { token, password: this.password }\n        );\n        this.message = res.data.msg || \"Password set successfully!\";\n        this.isError = false;\n\n        // Redirect after 2 seconds\n        setTimeout(() => {\n          this.$router.push(\"/login\");\n        }, 2000);\n      } catch (err) {\n        this.message = err.response?.data?.msg || \"Error setting password\";\n        this.isError = true;\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.set-password {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #f5f7fa;\n}\n\n.set-password-box {\n  background: rgba(255, 255, 255, 0.9);\n  padding: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  max-width: 400px;\n  width: 100%;\n  text-align: center;\n}\n\ninput {\n  width: 100%;\n  padding: 10px;\n  margin: 10px 0;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n}\n\nbutton {\n  width: 100%;\n  padding: 10px;\n  background: #2196f3;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\n\nbutton:disabled {\n  background: #90caf9;\n  cursor: not-allowed;\n}\n\n.error {\n  color: red;\n  margin-top: 10px;\n}\n\n.success {\n  color: green;\n  margin-top: 10px;\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAkB;;;uBAD/BC,mBAAA,CAyBM,OAzBNC,UAyBM,GAxBJC,mBAAA,CAuBM,OAvBNC,UAuBM,G,0BAtBJD,mBAAA,CAA0B,YAAtB,mBAAiB,qB,gBAErBA,mBAAA,CAKE;+DAJSE,KAAA,CAAAC,QAAQ,GAAAC,MAAA;IACjBC,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,oBAAoB;IAC/BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;iEAHhBR,KAAA,CAAAC,QAAQ,E,mBAKnBH,mBAAA,CAKE;+DAJSE,KAAA,CAAAW,eAAe,GAAAT,MAAA;IACxBC,IAAI,EAAC,UAAU;IACfC,WAAW,EAAC,kBAAkB;IAC7BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;iEAHhBR,KAAA,CAAAW,eAAe,E,GAM1Bb,mBAAA,CAES;IAFAc,QAAQ,EAAEZ,KAAA,CAAAa,OAAO;IAAGC,OAAK,EAAAR,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;sBAC1CR,KAAA,CAAAa,OAAO,wDAAAE,UAAA,GAGHf,KAAA,CAAAgB,OAAO,I,cAAhBpB,mBAAA,CAEI;;IAFeD,KAAK,EAAAsB,eAAA;MAAAC,KAAA,EAAWlB,KAAA,CAAAmB,OAAO;MAAAC,OAAA,GAAYpB,KAAA,CAAAmB;IAAO;sBACxDnB,KAAA,CAAAgB,OAAO,2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}